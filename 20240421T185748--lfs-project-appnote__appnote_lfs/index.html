<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css" />
    <!-- Some html boilerplate omitted -->
    <link rel="stylesheet" href="/themes/prism-one-dark.css" />
    <title>LFS project appnote</title>
  </head>
  <body>
    <header>
      <a href="/">WuZhihao's Blog</a>
      <nav>
        <a href="/about">About</a> 
      </nav>
    </header>
    <main>
      <nav>



<ul class="breadcrumb">
  <li>
    <a href="/">Home</a>
  </li>
  <li class="my-active-class">
    <a href="/20240421T185748--lfs-project-appnote__appnote_lfs/">LFS project appnote</a>
  </li>
</ul>
</nav>


      <!--<header><nav>



<ul class="breadcrumb">
  <li>
    <a href="/">Home</a>
  </li>
  <li class="my-active-class">
    <a href="/20240421T185748--lfs-project-appnote__appnote_lfs/">LFS project appnote</a>
  </li>
</ul>
</nav>

</header> -->
      
<section>
  <article>
    <h1>LFS project appnote</h1>
    <p>
      Published on: 2024-04-21T10:57:48
    </p>
    <h2>TOC</h2>      
    <nav class="toc" >
        <ul><li><a href="#1.-introduction">1. Introduction</a></li><li><a href="#2.-preparing-the-host-system">2. Preparing the Host System</a><ul><li><a href="#2.2-host-system-requirements">2.2 Host System Requirements</a><ul><li><a href="#2.2.2-software-requirements">2.2.2 Software Requirements</a></li></ul></li><li><a href="#2.4-creating-partitions">2.4 Creating partitions</a></li><li><a href="#2.5-creating-filesystems">2.5 Creating Filesystems</a></li><li><a href="#2.6-setting-%24lfs-variable">2.6 Setting $LFS Variable</a></li><li><a href="#2.7-mounting-partiions">2.7 Mounting partiions</a></li></ul></li><li><a href="#3.-packages-and-patches">3. Packages and Patches</a><ul><li><a href="#3.1-introduction">3.1 Introduction</a></li><li><a href="#4.2-create-limited-directory-layout">4.2 Create Limited Directory Layout</a></li><li><a href="#4.3-add-lfs-user">4.3 Add lfs User</a></li><li><a href="#4.4-setting-up-environment">4.4 Setting Up Environment</a></li><li><a href="#5.2-compile-binutils">5.2 Compile Binutils</a></li><li><a href="#5.3-install-gcc">5.3 Install GCC</a></li><li><a href="#5.4-install-linux-6.7.4">5.4 install linux-6.7.4</a></li><li><a href="#5.5-glibc">5.5 Glibc</a></li><li><a href="#5.6-libstdc%2B%2B-from-gcc-13.2.0">5.6 Libstdc++ from GCC-13.2.0</a></li></ul></li><li><a href="#6.-cross-compiling-temporary-tools">6. Cross Compiling Temporary Tools</a><ul><li><a href="#6.2-m4-1.4.19">6.2 M4-1.4.19</a></li><li><a href="#6.3-ncurses">6.3 Ncurses</a></li><li><a href="#6.4-bash-5.2.21">6.4 Bash-5.2.21</a></li><li><a href="#6.5-coreutils-9.4">6.5 Coreutils-9.4</a></li><li><a href="#6.6-diffutils-3.10">6.6 Diffutils-3.10</a></li><li><a href="#6.7-file-5.45">6.7 File-5.45</a></li><li><a href="#6.8-findutils-4.9.0">6.8 FindUtils-4.9.0</a></li><li><a href="#6.9-gawk-5.3.0">6.9 Gawk-5.3.0</a></li><li><a href="#6.10-grep-3.11">6.10 Grep-3.11</a></li><li><a href="#6.11-gzip-1.13">6.11 Gzip-1.13</a></li><li><a href="#6.12-make-4.4.1">6.12 Make-4.4.1</a></li><li><a href="#6.13-patch-2.7.6">6.13 Patch-2.7.6</a></li><li><a href="#6.14-sed-4.9">6.14 Sed-4.9</a></li><li><a href="#6.15-tar-1.35">6.15 Tar-1.35</a></li><li><a href="#6.16-xz-5.4.6">6.16 Xz-5.4.6</a></li><li><a href="#6.17-binutils-2.42---pass-2">6.17 Binutils-2.42 - Pass 2</a></li><li><a href="#6.18-gcc-13.2.0---pass-2">6.18 GCC-13.2.0 - Pass 2</a></li></ul></li><li><a href="#7.-entering-chroot-and-building-additional-temporary-tools">7. Entering Chroot and Building Additional Temporary Tools</a><ul><li><a href="#7.2-changing-ownership">7.2 Changing Ownership</a></li><li><a href="#7.3-preparing-virtual-kernel-file-systems">7.3 Preparing Virtual Kernel File Systems</a></li><li><a href="#7.3.1-mounting-and-populating-%2Fdev%2F">7.3.1 Mounting and Populating /dev/</a><ul><li><a href="#7.3.2-mounting-virtual-kernel-file-systems">7.3.2 Mounting Virtual Kernel File Systems</a></li></ul></li><li><a href="#7.4-entering-the-chroot-environment">7.4 Entering the Chroot Environment</a></li><li><a href="#7.5-creating-directories">7.5 Creating Directories</a><ul><li><a href="#7.5.1-fhs-compliance-note">7.5.1 FHS Compliance Note</a></li></ul></li><li><a href="#7.6-creating-essential-files-and-symlinks">7.6 Creating Essential Files and Symlinks</a></li><li><a href="#7.7-gettext-0.22.4">7.7 Gettext-0.22.4</a></li><li><a href="#7.8-bison-3.8.2">7.8 Bison-3.8.2</a></li><li><a href="#7.9-perl-5.38.2">7.9 Perl-5.38.2</a></li><li><a href="#7.10-python-3.12.2">7.10 Python-3.12.2</a></li><li><a href="#7.11-texinfo-7.1">7.11 Texinfo-7.1</a></li><li><a href="#7.12-util-linux-2.39.3">7.12 Util-linux-2.39.3</a></li><li><a href="#7.13-cleaning-up-and-saving-the-temporary-system">7.13 Cleaning up and Saving the Temporary System</a><ul><li><a href="#7.13.1-cleaning">7.13.1 Cleaning</a></li><li><a href="#7.13.2-backup">7.13.2 Backup</a></li></ul></li></ul></li><li><a href="#8.-installing-basic-system-software">8. Installing Basic System Software</a><ul><li><a href="#8.3-man-pages-6.06">8.3 Man-pages-6.06</a></li><li><a href="#8.4-iana-etc-20240125">8.4 Iana-Etc-20240125</a></li><li><a href="#8.5-glibc-2.39">8.5 Glibc-2.39</a><ul><li><a href="#8.5.2-configuring-glibc">8.5.2 Configuring Glibc</a></li></ul></li><li><a href="#8.6-zlib-1.3.1">8.6 Zlib-1.3.1</a></li><li><a href="#8.7-bzip2-1.0.8">8.7 Bzip2-1.0.8</a></li><li><a href="#8.8-xz-5.4.6">8.8 Xz-5.4.6</a></li><li><a href="#8.9-zstd-1.5.5">8.9 Zstd-1.5.5</a></li><li><a href="#8.10-file-5.45">8.10 File-5.45</a></li><li><a href="#8.11-readline-8.2">8.11 Readline-8.2</a></li><li><a href="#8.12-m4-1.4.19">8.12 M4-1.4.19</a></li><li><a href="#8.13-bc-6.7.5">8.13 Bc-6.7.5</a></li><li><a href="#8.14-flex-2.6.4">8.14 Flex-2.6.4</a></li><li><a href="#8.15-tcl-8.6.13">8.15 Tcl-8.6.13</a></li><li><a href="#8.16-expect-5.45.4">8.16 Expect-5.45.4</a></li><li><a href="#8.17-dejagnu-1.6.3">8.17 DejaGNU-1.6.3</a></li><li><a href="#8.18-pkgconf-2.1.1">8.18 Pkgconf-2.1.1</a></li><li><a href="#8.19-binutils-2.42">8.19 Binutils-2.42</a></li><li><a href="#8.20-gmp-6.3.0">8.20 GMP-6.3.0</a></li><li><a href="#8.21-mpfr-4.2.1">8.21 MPFR-4.2.1</a></li><li><a href="#8.22-mpc-1.3.1">8.22 MPC-1.3.1</a></li><li><a href="#8.23-attr-2.5.2">8.23 Attr-2.5.2</a></li><li><a href="#8.24-acl-2.3.2">8.24 Acl-2.3.2</a></li><li><a href="#8.25-libcap-2.69">8.25 Libcap-2.69</a></li><li><a href="#8.26-libxcrypt-4.4.36">8.26 Libxcrypt-4.4.36</a></li><li><a href="#8.27-shadow-4.14.5">8.27 Shadow-4.14.5</a></li><li><a href="#8.27.2-configuring-shadow">8.27.2 Configuring Shadow</a></li><li><a href="#8.28-gcc-13.2.0">8.28 GCC-13.2.0</a></li><li><a href="#8.29-ncurses-6.4-20230520">8.29 Ncurses-6.4-20230520</a></li><li><a href="#8.30-sed-4.9">8.30 Sed-4.9</a></li><li><a href="#8.31-psmisc-23.6">8.31 Psmisc-23.6</a></li><li><a href="#8.32-gettext-0.22.4">8.32 Gettext-0.22.4</a></li><li><a href="#8.33-bison-3.8.2">8.33 Bison-3.8.2</a></li><li><a href="#8.35.-bash-5.2.21">8.35. Bash-5.2.21</a></li><li><a href="#8.36-libtool-2.4.7">8.36 Libtool-2.4.7</a></li><li><a href="#8.37-gdbm-1.23">8.37 GDBM-1.23</a></li><li><a href="#8.38-gperf-3.1">8.38 Gperf-3.1</a></li><li><a href="#8.39-expat-2.6.0">8.39 Expat-2.6.0</a></li><li><a href="#8.40-inetutils-2.5">8.40 Inetutils-2.5</a></li><li><a href="#8.41-less-643">8.41 Less-643</a></li><li><a href="#8.42-perl-5.38.2">8.42 Perl-5.38.2</a></li><li><a href="#8.43-xml%3A%3Aparse-2.47">8.43 XML::Parse-2.47</a></li><li><a href="#8.44-intltool-0.51.0">8.44 Intltool-0.51.0</a></li><li><a href="#8.45-autoconf-2.72">8.45 Autoconf-2.72</a></li><li><a href="#8.46-automake-1.16.5">8.46 Automake-1.16.5</a></li><li><a href="#8.47-openssl-3.2.1">8.47 OpenSSL-3.2.1</a></li><li><a href="#8.48-kmod-31">8.48 Kmod-31</a></li><li><a href="#8.49-libelf-from-elfutils-0.190">8.49 Libelf from Elfutils-0.190</a></li><li><a href="#8.50-libffi-3.4.4">8.50 Libffi-3.4.4</a></li><li><a href="#8.51-python-3.12.2">8.51 Python-3.12.2</a></li><li><a href="#8.52-flit-core-3.9.0">8.52 Flit-Core-3.9.0</a></li><li><a href="#8.53-wheel-0.42.0">8.53 Wheel-0.42.0</a></li><li><a href="#8.54-setuptools-69.1.0">8.54 Setuptools-69.1.0</a></li><li><a href="#8.55-ninja-1.11.1">8.55 Ninja-1.11.1</a></li><li><a href="#8.56-meson-1.3.2">8.56 Meson-1.3.2</a></li><li><a href="#8.57-coreutils-9.4">8.57 Coreutils-9.4</a></li><li><a href="#8.58-check-0.15.2">8.58 Check-0.15.2</a></li><li><a href="#8.59-diffutils-3.10">8.59 Diffutils-3.10</a></li><li><a href="#8.60-gawk-5.3.0">8.60 Gawk-5.3.0</a></li><li><a href="#8.61-findutils-4.9.0">8.61 Findutils-4.9.0</a></li><li><a href="#8.62-groff-1.23.0">8.62 Groff-1.23.0</a></li><li><a href="#8.63-grub-2.12">8.63 Grub-2.12</a></li><li><a href="#8.64-gzip-1.13">8.64 Gzip-1.13</a></li><li><a href="#8.65-iproute2-6.7.0">8.65 IPRoute2-6.7.0</a></li><li><a href="#8.66-kbd-2.6.4">8.66 Kbd-2.6.4</a></li><li><a href="#8.67-libpipeline-1.5.7">8.67 Libpipeline-1.5.7</a></li><li><a href="#8.68-make-4.4.1">8.68 Make-4.4.1</a></li><li><a href="#8.69-path-2.7.6">8.69 Path-2.7.6</a></li><li><a href="#8.70-tar-1.35">8.70 Tar-1.35</a></li><li><a href="#8.71-texinfo-7.1">8.71 Texinfo-7.1</a></li><li><a href="#8.72-vim-9.1.0041">8.72 Vim-9.1.0041</a></li><li><a href="#8.73-markupsafe-2.1.5">8.73 MarkupSafe-2.1.5</a></li><li><a href="#8.74-jinja2-3.1.3">8.74 Jinja2-3.1.3</a></li><li><a href="#8.75-udev-from-systemd-255">8.75 Udev from Systemd-255</a><ul><li><a href="#8.75.2-configuring-udev">8.75.2 Configuring Udev</a></li></ul></li><li><a href="#8.76-man-db-2.12.0">8.76 Man-DB-2.12.0</a></li><li><a href="#8.77-procps-ng-4.0.4">8.77 Procps-ng-4.0.4</a></li><li><a href="#8.78-util-linux-2.39.3">8.78 Util-linux-2.39.3</a></li><li><a href="#8.79-e2fsprogs-1.47.0">8.79 E2fsprogs-1.47.0</a><ul><li><a href="#8.79.2-configuring-e2fsprogs">8.79.2 Configuring E2fsprogs</a></li></ul></li><li><a href="#8.80-sysklogd-1.5.1">8.80 Sysklogd-1.5.1</a></li><li><a href="#8.81-sysvinit-3.08">8.81 Sysvinit-3.08</a></li><li><a href="#8.84-cleaning-up">8.84 Cleaning up</a></li></ul></li><li><a href="#9-system-configuration">9 System Configuration</a><ul><li><a href="#9.2-lfs-bootscripts-20230728">9.2 LFS-Bootscripts-20230728</a></li><li><a href="#9.4-managing-devices">9.4 Managing Devices</a><ul><li><a href="#9.5.2-creating-the-%2Fetc%2Fresolv.conf-file">9.5.2 Creating the /etc/resolv.conf File</a></li><li><a href="#9.5.3-configuring-hostname">9.5.3 Configuring hostname</a></li><li><a href="#9.5.4-set-%2Fetc%2Fhosts-file">9.5.4 Set /etc/hosts file</a></li></ul></li><li><a href="#9.6-configuring-sysvint">9.6 Configuring Sysvint</a><ul><li><a href="#9.6.4-configuring-the-system-clock">9.6.4 Configuring the System Clock</a></li><li><a href="#9.6.5-configuring-the-linux-console">9.6.5 Configuring the Linux Console</a></li><li><a href="#9.6.6-creating-files-at-boot">9.6.6 Creating Files at Boot</a></li></ul></li><li><a href="#9.7-configuring-the-system-locale">9.7 Configuring the System Locale</a></li><li><a href="#9.8-creating-%2Fetc%2Finputrc">9.8 Creating /etc/inputrc</a></li><li><a href="#9.9-creating-%2Fetc%2Fshells">9.9 Creating /etc/shells</a></li></ul></li><li><a href="#10-making-the-lfs-system-bootable">10 Making the LFS System Bootable</a><ul><li><a href="#10.3-linux-6.7.4">10.3 Linux-6.7.4</a></li><li><a href="#10.3.2-configuring-linux-module-load-order">10.3.2 Configuring Linux Module Load Order</a></li><li><a href="#10.4-using-grub-to-set-up-the-boot-process">10.4 using GRUB to Set Up the Boot Process</a></li></ul></li><li><a href="#11-the-end">11 The End</a></li></ul>
      </nav>
    <h2 id="1.-introduction" tabindex="-1">1. Introduction</h2>
<p>LFS helps to build a custom Linux distribution from scratch.</p>
<h2 id="2.-preparing-the-host-system" tabindex="-1">2. Preparing the Host System</h2>
<h3 id="2.2-host-system-requirements" tabindex="-1">2.2 Host System Requirements</h3>
<h4 id="2.2.2-software-requirements" tabindex="-1">2.2.2 Software Requirements</h4>
<p>Check software requirements with version-check.sh.</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$ <span class="token function">cat</span> version-check.sh
<span class="token comment">#!/bin/bash</span>
<span class="token comment"># A script to list version numbers of critical development tools</span>
<span class="token comment"># If you have tools installed in other directories, adjust PATH here AND</span>
<span class="token comment"># in ~lfs/.bashrc (section 4.4) as well.</span>
<span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>C
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/bin:/bin
<span class="token function-name function">bail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token builtin class-name">echo</span> <span class="token string">"FATAL: <span class="token variable">$1</span>"</span><span class="token punctuation">;</span> <span class="token builtin class-name">exit</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token function">grep</span> <span class="token parameter variable">--version</span> <span class="token operator">></span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">||</span> bail <span class="token string">"grep does not work"</span>
<span class="token function">sed</span> <span class="token string">''</span> /dev/null <span class="token operator">||</span> bail <span class="token string">"sed does not work"</span>
<span class="token function">sort</span>   /dev/null <span class="token operator">||</span> bail <span class="token string">"sort does not work"</span>
<span class="token function-name function">ver_check</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token operator">!</span> <span class="token builtin class-name">type</span> <span class="token parameter variable">-p</span> <span class="token variable">$2</span> <span class="token operator">&amp;></span>/dev/null
   <span class="token keyword">then</span>
     <span class="token builtin class-name">echo</span> <span class="token string">"ERROR: Cannot find <span class="token variable">$2</span> (<span class="token variable">$1</span>)"</span><span class="token punctuation">;</span> <span class="token builtin class-name">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">fi</span>
   <span class="token assign-left variable">v</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$2 <span class="token parameter variable">--version</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token parameter variable">-o</span> <span class="token string">'[0-9]+\.[0-9\.]+[a-z]*'</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n1</span><span class="token variable">)</span></span>
   <span class="token keyword">if</span> <span class="token builtin class-name">printf</span> <span class="token string">'%s\n'</span> <span class="token variable">$3</span> <span class="token variable">$v</span> <span class="token operator">|</span> <span class="token function">sort</span> --version-sort <span class="token parameter variable">--check</span> <span class="token operator">&amp;></span>/dev/null
   <span class="token keyword">then</span>
     <span class="token builtin class-name">printf</span> <span class="token string">"OK:    %-9s %-6s >= <span class="token variable">$3</span><span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token string">"<span class="token variable">$v</span>"</span><span class="token punctuation">;</span> <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">else</span>
     <span class="token builtin class-name">printf</span> <span class="token string">"ERROR: %-9s is TOO OLD (<span class="token variable">$3</span> or later required)<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$1</span>"</span><span class="token punctuation">;</span>
     <span class="token builtin class-name">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token function-name function">ver_kernel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token assign-left variable">kver</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-r</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-E</span> <span class="token parameter variable">-o</span> <span class="token string">'^[0-9\.]+'</span><span class="token variable">)</span></span>
   <span class="token keyword">if</span> <span class="token builtin class-name">printf</span> <span class="token string">'%s\n'</span> <span class="token variable">$1</span> <span class="token variable">$kver</span> <span class="token operator">|</span> <span class="token function">sort</span> --version-sort <span class="token parameter variable">--check</span> <span class="token operator">&amp;></span>/dev/null
   <span class="token keyword">then</span>
     <span class="token builtin class-name">printf</span> <span class="token string">"OK:    Linux Kernel <span class="token variable">$kver</span> >= <span class="token variable">$1</span><span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">;</span> <span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
   <span class="token keyword">else</span>
     <span class="token builtin class-name">printf</span> <span class="token string">"ERROR: Linux Kernel (<span class="token variable">$kver</span>) is TOO OLD (<span class="token variable">$1</span> or later required)<span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$kver</span>"</span><span class="token punctuation">;</span>
     <span class="token builtin class-name">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token comment"># Coreutils first because --version-sort needs Coreutils >= 7.0</span>
ver_check Coreutils      <span class="token function">sort</span>     <span class="token number">8.1</span> <span class="token operator">||</span> bail <span class="token string">"Coreutils too old, stop"</span>
ver_check Bash           <span class="token function">bash</span>     <span class="token number">3.2</span>
ver_check Binutils       ld       <span class="token number">2.13</span>.1
ver_check Bison          bison    <span class="token number">2.7</span>
ver_check Diffutils      <span class="token function">diff</span>     <span class="token number">2.8</span>.1
ver_check Findutils      <span class="token function">find</span>     <span class="token number">4.2</span>.31
ver_check Gawk           <span class="token function">gawk</span>     <span class="token number">4.0</span>.1
ver_check GCC            gcc      <span class="token number">5.2</span>
ver_check <span class="token string">"GCC (C++)"</span>    g++      <span class="token number">5.2</span>
ver_check Grep           <span class="token function">grep</span>     <span class="token number">2.5</span>.1a
ver_check Gzip           <span class="token function">gzip</span>     <span class="token number">1.3</span>.12
ver_check M4             m4       <span class="token number">1.4</span>.10
ver_check Make           <span class="token function">make</span>     <span class="token number">4.0</span>
ver_check Patch          patch    <span class="token number">2.5</span>.4
ver_check Perl           perl     <span class="token number">5.8</span>.8
ver_check Python         python3  <span class="token number">3.4</span>
ver_check Sed            <span class="token function">sed</span>      <span class="token number">4.1</span>.5
ver_check Tar            <span class="token function">tar</span>      <span class="token number">1.22</span>
ver_check Texinfo        texi2any <span class="token number">5.0</span>
ver_check Xz             xz       <span class="token number">5.0</span>.0
ver_kernel <span class="token number">4.19</span>
<span class="token keyword">if</span> <span class="token function">mount</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-q</span> <span class="token string">'devpts on /dev/pts'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> /dev/ptmx <span class="token punctuation">]</span>
<span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">"OK:    Linux Kernel supports UNIX 98 PTY"</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">"ERROR: Linux Kernel does NOT support UNIX 98 PTY"</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token function-name function">alias_check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token variable">$1</span> <span class="token parameter variable">--version</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-qi</span> <span class="token variable">$2</span>
   <span class="token keyword">then</span> <span class="token builtin class-name">printf</span> <span class="token string">"OK:    %-4s is <span class="token variable">$2</span><span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$1</span>"</span><span class="token punctuation">;</span>
   <span class="token keyword">else</span> <span class="token builtin class-name">printf</span> <span class="token string">"ERROR: %-4s is NOT <span class="token variable">$2</span><span class="token entity" title="\n">\n</span>"</span> <span class="token string">"<span class="token variable">$1</span>"</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Aliases:"</span>
alias_check <span class="token function">awk</span> GNU
alias_check yacc Bison
alias_check <span class="token function">sh</span> Bash
<span class="token builtin class-name">echo</span> <span class="token string">"Compiler check:"</span>
<span class="token keyword">if</span> <span class="token builtin class-name">printf</span> <span class="token string">"int main(){}"</span> <span class="token operator">|</span> g++ <span class="token parameter variable">-x</span> c++ -
<span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">"OK:    g++ works"</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">"ERROR: g++ does NOT work"</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> a.out
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>"</span> <span class="token operator">=</span> <span class="token string">""</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"ERROR: nproc is not available or it produces empty output"</span>
<span class="token keyword">else</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"OK: nproc reports <span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span> logical cores are available"</span>
<span class="token keyword">fi</span>
zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$ ^C</code></pre>
<p>Run script, requirements are met.</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$ <span class="token function">bash</span> version-check.sh
OK:    Coreutils <span class="token number">9.1</span>    <span class="token operator">>=</span> <span class="token number">8.1</span>
OK:    Bash      <span class="token number">5.2</span>.15 <span class="token operator">>=</span> <span class="token number">3.2</span>
OK:    Binutils  <span class="token number">2.39</span>.0.20220810 <span class="token operator">>=</span> <span class="token number">2.13</span>.1
OK:    Bison     <span class="token number">3.8</span>.2  <span class="token operator">>=</span> <span class="token number">2.7</span>
OK:    Diffutils <span class="token number">3.8</span>    <span class="token operator">>=</span> <span class="token number">2.8</span>.1
OK:    Findutils <span class="token number">4.9</span>.0  <span class="token operator">>=</span> <span class="token number">4.2</span>.31
OK:    Gawk      <span class="token number">5.2</span>.1  <span class="token operator">>=</span> <span class="token number">4.0</span>.1
OK:    GCC       <span class="token number">13.0</span>.1 <span class="token operator">>=</span> <span class="token number">5.2</span>
OK:    GCC <span class="token punctuation">(</span>C++<span class="token punctuation">)</span> <span class="token number">13.0</span>.1 <span class="token operator">>=</span> <span class="token number">5.2</span>
OK:    Grep      <span class="token number">3.8</span>    <span class="token operator">>=</span> <span class="token number">2.5</span>.1a
OK:    Gzip      <span class="token number">1.12</span>   <span class="token operator">>=</span> <span class="token number">1.3</span>.12
OK:    M4        <span class="token number">1.4</span>.18 <span class="token operator">>=</span> <span class="token number">1.4</span>.10
OK:    Make      <span class="token number">4.4</span>    <span class="token operator">>=</span> <span class="token number">4.0</span>
OK:    Patch     <span class="token number">2.7</span>.6  <span class="token operator">>=</span> <span class="token number">2.5</span>.4
OK:    Perl      <span class="token number">5.36</span>.0 <span class="token operator">>=</span> <span class="token number">5.8</span>.8
OK:    Python    <span class="token number">3.10</span>.9 <span class="token operator">>=</span> <span class="token number">3.4</span>
OK:    Sed       <span class="token number">4.9</span>    <span class="token operator">>=</span> <span class="token number">4.1</span>.5
OK:    Tar       <span class="token number">1.34</span>   <span class="token operator">>=</span> <span class="token number">1.22</span>
OK:    Texinfo   <span class="token number">7.0</span>.1  <span class="token operator">>=</span> <span class="token number">5.0</span>
OK:    Xz        <span class="token number">5.4</span>.0  <span class="token operator">>=</span> <span class="token number">5.0</span>.0
OK:    Linux Kernel <span class="token number">6.2</span>.10 <span class="token operator">>=</span> <span class="token number">4.19</span>
OK:    Linux Kernel supports UNIX <span class="token number">98</span> PTY
Aliases:
OK:    <span class="token function">awk</span>  is GNU
OK:    yacc is Bison
OK:    <span class="token function">sh</span>   is Bash
Compiler check:
OK:    g++ works
OK: nproc reports <span class="token number">8</span> logical cores are available
zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$</code></pre>
<h3 id="2.4-creating-partitions" tabindex="-1">2.4 Creating partitions</h3>
<p>I use a 106G block device for partitions</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao<span class="token operator">|</span>$ lsblk /dev/sdd
NAME MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sdd    <span class="token number">8</span>:48   <span class="token number">0</span> <span class="token number">106</span>.9G  <span class="token number">0</span> disk
dust:/home/zhihao <span class="token comment"># parted /dev/sdd unit GiB p free</span>
Model: ATA VBOX HARDDISK <span class="token punctuation">(</span>scsi<span class="token punctuation">)</span>
Disk /dev/sdd: 107GiB
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start    End     Size    File system  Name  Flags
        <span class="token number">0</span>.00GiB  107GiB  107GiB  Free Space

dust:/home/zhihao <span class="token comment">#</span>
zhihao@dust<span class="token operator">|</span>/home/zhihao<span class="token operator">|</span>$</code></pre>
<p>The root partition needs 20G size. The swap partition is 2G. (I miss to create Grub BIOS partition here, it's created at 10.4)</p>
<p>LFS suggests some other convenience partitions</p>
<ul>
<li>/boot - 200M</li>
<li>/boot/uefi - 200M</li>
<li>/usr - 25G (Note: I merge /usr with / latter because it can't find /usr/sbin/init at boot time, we only need the /usr partition if we boot with initramfs, so don't create it)</li>
<li>/home - 21G</li>
<li>/opt - 5G</li>
<li>/tmp - 3G</li>
<li>/usr/src - 30G</li>
<li>/root - 20G</li>
</ul>
<p>Run partition commands:</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># parted /dev/sdd</span>
GNU Parted <span class="token number">3.5</span>
Using /dev/sdd
Welcome to GNU Parted<span class="token operator">!</span> Type <span class="token string">'help'</span> to view a list of commands.
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mklabel gpt
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> p
Model: ATA VBOX HARDDISK <span class="token punctuation">(</span>scsi<span class="token punctuation">)</span>
Disk /dev/sdd: 114820775936B
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start  End  Size  File system  Name  Flags

<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart boot 1MiB 200MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart boot-uefi 200MiB 400MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart usr 400MiB 26000MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart home 26000MiB 47504MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart opt 47504MiB 52624MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart tmp 52624MiB 55696MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart usr-src 55696MiB 86416MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart root 86416MiB <span class="token number">100</span>%
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart root 86416MiB 106896MiB
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart swap 106896MiB <span class="token number">100</span>%
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> p <span class="token function">free</span>
Model: ATA VBOX HARDDISK <span class="token punctuation">(</span>scsi<span class="token punctuation">)</span>
Disk /dev/sdd: 114820775936B
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start          End            Size          File system  Name       Flags
        17408B         1048575B       1031168B      Free Space
 <span class="token number">1</span>      1048576B       209715199B     208666624B                 boot
 <span class="token number">2</span>      209715200B     419430399B     209715200B                 boot-uefi
 <span class="token number">3</span>      419430400B     27262975999B   26843545600B               usr
 <span class="token number">4</span>      27262976000B   49811554303B   22548578304B               home
 <span class="token number">5</span>      49811554304B   55180263423B   5368709120B                opt
 <span class="token number">6</span>      55180263424B   58401488895B   3221225472B                tmp
 <span class="token number">7</span>      58401488896B   90613743615B   32212254720B               usr-src
 <span class="token number">8</span>      90613743616B   112088580095B  21474836480B               root
 <span class="token number">9</span>      112088580096B  114820120575B  2731540480B                swap
        114820120576B  114820759039B  638464B       Free Space

<span class="token punctuation">(</span>parted<span class="token punctuation">)</span></code></pre>
<p>2.4.2 Create initramfs</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /usr/sbin/mkinitramfs <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
#!/bin/bash
# This file based in part on the mkinitramfs script for the LFS LiveCD
# written by Alexander E. Patrakov and Jeremy Huntwork.

copy()
{
  local file

  if [ "$2" = "lib" ]; then
    file=$(PATH=/usr/lib type -p $1)
  else
    file=$(type -p $1)
  fi

  if [ -n "$file" ] ; then
    cp $file $WDIR/usr/$2
  else
    echo "Missing required file: $1 for directory $2"
    rm -rf $WDIR
    exit 1
  fi
}

if [ -z $1 ] ; then
  INITRAMFS_FILE=initrd.img-no-kmods
else
  KERNEL_VERSION=$1
  INITRAMFS_FILE=initrd.img-$KERNEL_VERSION
fi

if [ -n "$KERNEL_VERSION" ] &amp;&amp; [ ! -d "/usr/lib/modules/$1" ] ; then
  echo "No modules directory named $1"
  exit 1
fi

printf "Creating $INITRAMFS_FILE... "

binfiles="sh cat cp dd killall ls mkdir mknod mount "
binfiles="$binfiles umount sed sleep ln rm uname"
binfiles="$binfiles readlink basename"

# Systemd installs udevadm in /bin. Other udev implementations have it in /sbin
if [ -x /usr/bin/udevadm ] ; then binfiles="$binfiles udevadm"; fi

sbinfiles="modprobe blkid switch_root"

# Optional files and locations
for f in mdadm mdmon udevd udevadm; do
  if [ -x /usr/sbin/$f ] ; then sbinfiles="$sbinfiles $f"; fi
done

# Add lvm if present (cannot be done with the others because it
# also needs dmsetup
if [ -x /usr/sbin/lvm ] ; then sbinfiles="$sbinfiles lvm dmsetup"; fi

unsorted=$(mktemp /tmp/unsorted.XXXXXXXXXX)

DATADIR=/usr/share/mkinitramfs
INITIN=init.in

# Create a temporary working directory
WDIR=$(mktemp -d /tmp/initrd-work.XXXXXXXXXX)

# Create base directory structure
mkdir -p $WDIR/{dev,run,sys,proc,usr/{bin,lib/{firmware,modules},sbin}}
mkdir -p $WDIR/etc/{modprobe.d,udev/rules.d}
touch $WDIR/etc/modprobe.d/modprobe.conf
ln -s usr/bin  $WDIR/bin
ln -s usr/lib  $WDIR/lib
ln -s usr/sbin $WDIR/sbin
ln -s lib      $WDIR/lib64

# Create necessary device nodes
mknod -m 640 $WDIR/dev/console c 5 1
mknod -m 664 $WDIR/dev/null    c 1 3

# Install the udev configuration files
if [ -f /etc/udev/udev.conf ]; then
  cp /etc/udev/udev.conf $WDIR/etc/udev/udev.conf
fi

for file in $(find /etc/udev/rules.d/ -type f) ; do
  cp $file $WDIR/etc/udev/rules.d
done

# Install any firmware present
cp -a /usr/lib/firmware $WDIR/usr/lib

# Copy the RAID configuration file if present
if [ -f /etc/mdadm.conf ] ; then
  cp /etc/mdadm.conf $WDIR/etc
fi

# Install the init file
install -m0755 $DATADIR/$INITIN $WDIR/init

if [  -n "$KERNEL_VERSION" ] ; then
  if [ -x /usr/bin/kmod ] ; then
    binfiles="$binfiles kmod"
  else
    binfiles="$binfiles lsmod"
    sbinfiles="$sbinfiles insmod"
  fi
fi

# Install basic binaries
for f in $binfiles ; do
  ldd /usr/bin/$f | sed "s/\t//" | cut -d " " -f1 >> $unsorted
  copy /usr/bin/$f bin
done

for f in $sbinfiles ; do
  ldd /usr/sbin/$f | sed "s/\t//" | cut -d " " -f1 >> $unsorted
  copy $f sbin
done

# Add udevd libraries if not in /usr/sbin
if [ -x /usr/lib/udev/udevd ] ; then
  ldd /usr/lib/udev/udevd | sed "s/\t//" | cut -d " " -f1 >> $unsorted
elif [ -x /usr/lib/systemd/systemd-udevd ] ; then
  ldd /usr/lib/systemd/systemd-udevd | sed "s/\t//" | cut -d " " -f1 >> $unsorted
fi

# Add module symlinks if appropriate
if [ -n "$KERNEL_VERSION" ] &amp;&amp; [ -x /usr/bin/kmod ] ; then
  ln -s kmod $WDIR/usr/bin/lsmod
  ln -s kmod $WDIR/usr/bin/insmod
fi

# Add lvm symlinks if appropriate
# Also copy the lvm.conf file
if  [ -x /usr/sbin/lvm ] ; then
  ln -s lvm $WDIR/usr/sbin/lvchange
  ln -s lvm $WDIR/usr/sbin/lvrename
  ln -s lvm $WDIR/usr/sbin/lvextend
  ln -s lvm $WDIR/usr/sbin/lvcreate
  ln -s lvm $WDIR/usr/sbin/lvdisplay
  ln -s lvm $WDIR/usr/sbin/lvscan

  ln -s lvm $WDIR/usr/sbin/pvchange
  ln -s lvm $WDIR/usr/sbin/pvck
  ln -s lvm $WDIR/usr/sbin/pvcreate
  ln -s lvm $WDIR/usr/sbin/pvdisplay
  ln -s lvm $WDIR/usr/sbin/pvscan

  ln -s lvm $WDIR/usr/sbin/vgchange
  ln -s lvm $WDIR/usr/sbin/vgcreate
  ln -s lvm $WDIR/usr/sbin/vgscan
  ln -s lvm $WDIR/usr/sbin/vgrename
  ln -s lvm $WDIR/usr/sbin/vgck
  # Conf file(s)
  cp -a /etc/lvm $WDIR/etc
fi

# Install libraries
sort $unsorted | uniq | while read library ; do
# linux-vdso and linux-gate are pseudo libraries and do not correspond to a file
# libsystemd-shared is in /lib/systemd, so it is not found by copy, and
# it is copied below anyway
  if [[ "$library" == linux-vdso.so.1 ]] ||
     [[ "$library" == linux-gate.so.1 ]] ||
     [[ "$library" == libsystemd-shared* ]]; then
    continue
  fi

  copy $library lib
done

if [ -d /usr/lib/udev ]; then
  cp -a /usr/lib/udev $WDIR/usr/lib
fi
if [ -d /usr/lib/systemd ]; then
  cp -a /usr/lib/systemd $WDIR/usr/lib
fi
if [ -d /usr/lib/elogind ]; then
  cp -a /usr/lib/elogind $WDIR/usr/lib
fi

# Install the kernel modules if requested
if [ -n "$KERNEL_VERSION" ]; then
  find \
     /usr/lib/modules/$KERNEL_VERSION/kernel/{crypto,fs,lib}                      \
     /usr/lib/modules/$KERNEL_VERSION/kernel/drivers/{block,ata,nvme,md,firewire} \
     /usr/lib/modules/$KERNEL_VERSION/kernel/drivers/{scsi,message,pcmcia,virtio} \
     /usr/lib/modules/$KERNEL_VERSION/kernel/drivers/usb/{host,storage}           \
     -type f 2> /dev/null | cpio --make-directories -p --quiet $WDIR

  cp /usr/lib/modules/$KERNEL_VERSION/modules.{builtin,order} \
            $WDIR/usr/lib/modules/$KERNEL_VERSION
  if [ -f /usr/lib/modules/$KERNEL_VERSION/modules.builtin.modinfo ]; then
    cp /usr/lib/modules/$KERNEL_VERSION/modules.builtin.modinfo \
            $WDIR/usr/lib/modules/$KERNEL_VERSION
  fi

  depmod -b $WDIR $KERNEL_VERSION
fi

( cd $WDIR ; find . | cpio -o -H newc --quiet | gzip -9 ) > $INITRAMFS_FILE

# Prepare early loading of microcode if available
if ls /usr/lib/firmware/intel-ucode/* >/dev/null 2>&amp;1 ||
   ls /usr/lib/firmware/amd-ucode/*   >/dev/null 2>&amp;1; then

# first empty WDIR to reuse it
  rm -r $WDIR/*

  DSTDIR=$WDIR/kernel/x86/microcode
  mkdir -p $DSTDIR

  if [ -d /usr/lib/firmware/amd-ucode ]; then
    cat /usr/lib/firmware/amd-ucode/microcode_amd*.bin > $DSTDIR/AuthenticAMD.bin
  fi

  if [ -d /usr/lib/firmware/intel-ucode ]; then
    cat /usr/lib/firmware/intel-ucode/* > $DSTDIR/GenuineIntel.bin
  fi

  ( cd $WDIR; find . | cpio -o -H newc --quiet ) > microcode.img
  cat microcode.img $INITRAMFS_FILE > tmpfile
  mv tmpfile $INITRAMFS_FILE
  rm microcode.img
fi

# Remove the temporary directories and files
rm -rf $WDIR $unsorted
printf "done.\n"

EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment"># chmod 0755 /usr/sbin/mkinitramfs</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment">#</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /usr/share/mkinitramfs <span class="token operator">&amp;&amp;</span>
<span class="token function">cat</span> <span class="token operator">></span> /usr/share/mkinitramfs/init.in <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
#!/bin/sh

PATH=/usr/bin:/usr/sbin
export PATH

problem()
{
   printf "Encountered a problem!\n\nDropping you to a shell.\n\n"
   sh
}

no_device()
{
   printf "The device %s, which is supposed to contain the\n" $1
   printf "root file system, does not exist.\n"
   printf "Please fix this problem and exit this shell.\n\n"
}

no_mount()
{
   printf "Could not mount device %s\n" $1
   printf "Sleeping forever. Please reboot and fix the kernel command line.\n\n"
   printf "Maybe the device is formatted with an unsupported file system?\n\n"
   printf "Or maybe filesystem type autodetection went wrong, in which case\n"
   printf "you should add the rootfstype=... parameter to the kernel command line.\n\n"
   printf "Available partitions:\n"
}

do_mount_root()
{
   mkdir /.root
   [ -n "$rootflags" ] &amp;&amp; rootflags="$rootflags,"
   rootflags="$rootflags$ro"

   case "$root" in
      /dev/*    ) device=$root ;;
      UUID=*    ) eval $root; device="/dev/disk/by-uuid/$UUID" ;;
      PARTUUID=*) eval $root; device="/dev/disk/by-partuuid/$PARTUUID" ;;
      LABEL=*   ) eval $root; device="/dev/disk/by-label/$LABEL" ;;
      ""        ) echo "No root device specified." ; problem ;;
   esac

   while [ ! -b "$device" ] ; do
       no_device $device
       problem
   done

   if ! mount -n -t "$rootfstype" -o "$rootflags" "$device" /.root ; then
       no_mount $device
       cat /proc/partitions
       while true ; do sleep 10000 ; done
   else
       echo "Successfully mounted device $root"
   fi
}

do_try_resume()
{
   case "$resume" in
      UUID=* ) eval $resume; resume="/dev/disk/by-uuid/$UUID"  ;;
      LABEL=*) eval $resume; resume="/dev/disk/by-label/$LABEL" ;;
   esac

   if $noresume || ! [ -b "$resume" ]; then return; fi

   ls -lH "$resume" | ( read x x x x maj min x
       echo -n ${maj%,}:$min > /sys/power/resume )
}

init=/sbin/init
root=
rootdelay=
rootfstype=auto
ro="ro"
rootflags=
device=
resume=
noresume=false

mount -n -t devtmpfs devtmpfs /dev
mount -n -t proc     proc     /proc
mount -n -t sysfs    sysfs    /sys
mount -n -t tmpfs    tmpfs    /run

read -r cmdline &lt; /proc/cmdline

for param in $cmdline ; do
  case $param in
    init=*      ) init=${param#init=}             ;;
    root=*      ) root=${param#root=}             ;;
    rootdelay=* ) rootdelay=${param#rootdelay=}   ;;
    rootfstype=*) rootfstype=${param#rootfstype=} ;;
    rootflags=* ) rootflags=${param#rootflags=}   ;;
    resume=*    ) resume=${param#resume=}         ;;
    noresume    ) noresume=true                   ;;
    ro          ) ro="ro"                         ;;
    rw          ) ro="rw"                         ;;
  esac
done

# udevd location depends on version
if [ -x /sbin/udevd ]; then
  UDEVD=/sbin/udevd
elif [ -x /lib/udev/udevd ]; then
  UDEVD=/lib/udev/udevd
elif [ -x /lib/systemd/systemd-udevd ]; then
  UDEVD=/lib/systemd/systemd-udevd
else
  echo "Cannot find udevd nor systemd-udevd"
  problem
fi

${UDEVD} --daemon --resolve-names=never
udevadm trigger
udevadm settle

if [ -f /etc/mdadm.conf ] ; then mdadm -As                       ; fi
if [ -x /sbin/vgchange  ] ; then /sbin/vgchange -a y > /dev/null ; fi
if [ -n "$rootdelay"    ] ; then sleep "$rootdelay"              ; fi

do_try_resume # This function will not return if resuming from disk
do_mount_root

killall -w ${UDEVD##*/}

exec switch_root /.root "$init" "$@"

EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment">#</span></code></pre>
<p>Install cpio</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao<span class="token operator">|</span>$ <span class="token function">sudo</span> <span class="token function">su</span>
bash-5.2<span class="token comment"># https://ftp.gnu.org/gnu/cpio/cpio-2.15.tar.bz2^C</span>
bash-5.2<span class="token comment"># cd /mnt/lfs</span>
bash-5.2<span class="token comment"># cd sources/</span>
bash-5.2<span class="token comment"># wget "https://ftp.gnu.org/gnu/cpio/cpio-2.15.tar.bz2"</span>
--2024-05-28 <span class="token number">23</span>:34:34--  https://ftp.gnu.org/gnu/cpio/cpio-2.15.tar.bz2
Resolving ftp.gnu.org <span class="token punctuation">(</span>ftp.gnu.org<span class="token punctuation">)</span><span class="token punctuation">..</span>. <span class="token number">209.51</span>.188.20, <span class="token number">2001</span>:470:142:3::b
Connecting to ftp.gnu.org <span class="token punctuation">(</span>ftp.gnu.org<span class="token punctuation">)</span><span class="token operator">|</span><span class="token number">209.51</span>.188.20<span class="token operator">|</span>:443<span class="token punctuation">..</span>. connected.
HTTP request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">200</span> OK
Length: <span class="token number">1651320</span> <span class="token punctuation">(</span><span class="token number">1</span>.6M<span class="token punctuation">)</span> <span class="token punctuation">[</span>application/x-bzip2<span class="token punctuation">]</span>
Saving to: ‘cpio-2.15.tar.bz2’

cpio-2.15.tar.bz2              <span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">]</span>   <span class="token number">1</span>.57M  <span class="token number">25</span>.6KB/s    <span class="token keyword">in</span> 54s

<span class="token number">2024</span>-05-28 <span class="token number">23</span>:35:29 <span class="token punctuation">(</span><span class="token number">29.9</span> KB/s<span class="token punctuation">)</span> - ‘cpio-2.15.tar.bz2’ saved <span class="token punctuation">[</span><span class="token number">1651320</span>/1651320<span class="token punctuation">]</span>

bash-5.2<span class="token comment">#</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf cpio-2.15.tar.bz2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd cpio-2.15</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/cpio-2.15<span class="token comment"># ./configure --prefix=/usr \</span>
<span class="token operator">></span>             --enable-mt   <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-rmt<span class="token operator">=</span>/usr/libexec/rmt
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/cpio-2.15<span class="token comment"># make &amp;&amp;</span>
<span class="token operator">></span> makeinfo <span class="token parameter variable">--html</span>            <span class="token parameter variable">-o</span> doc/html      doc/cpio.texi <span class="token operator">&amp;&amp;</span>
<span class="token operator">></span> makeinfo <span class="token parameter variable">--html</span> --no-split <span class="token parameter variable">-o</span> doc/cpio.html doc/cpio.texi <span class="token operator">&amp;&amp;</span>
<span class="token operator">></span> makeinfo <span class="token parameter variable">--plaintext</span>       <span class="token parameter variable">-o</span> doc/cpio.txt  doc/cpio.texi
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/cpio-2.15<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/cpio-2.15<span class="token comment"># make install &amp;&amp;</span>
<span class="token operator">></span> <span class="token function">install</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-m755</span> <span class="token parameter variable">-d</span> /usr/share/doc/cpio-2.15/html <span class="token operator">&amp;&amp;</span>
<span class="token operator">></span> <span class="token function">install</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-m644</span>    doc/html/* <span class="token punctuation">\</span>
<span class="token operator">></span>                     /usr/share/doc/cpio-2.15/html <span class="token operator">&amp;&amp;</span>
<span class="token operator">></span> <span class="token function">install</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-m644</span>    doc/cpio.<span class="token punctuation">{</span>html,txt<span class="token punctuation">}</span> <span class="token punctuation">\</span>
<span class="token operator">></span>                     /usr/share/doc/cpio-2.15
<span class="token punctuation">..</span>.</code></pre>
<p>Generate initramfs</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/tmp<span class="token comment"># mkinitramfs 6.7.4</span>
Creating initrd.img-6.7.4<span class="token punctuation">..</span>. done.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/tmp<span class="token comment"># ls</span>
initrd.img-6.7.4
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/tmp<span class="token comment"># cp initrd.img-6.7.4 /boot/</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/tmp<span class="token comment">#</span></code></pre>
<h3 id="2.5-creating-filesystems" tabindex="-1">2.5 Creating Filesystems</h3>
<p>Make all patitions ext4 filesystem</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># for i in `ls /dev/sdd[0-9]`; do mkfs -v -t ext4 $i; done</span>
<span class="token function">mke2fs</span> <span class="token number">1.46</span>.5 <span class="token punctuation">(</span><span class="token number">30</span>-Dec-2021<span class="token punctuation">)</span>
fs_types <span class="token keyword">for</span> mke2fs.conf resolution: <span class="token string">'ext4'</span>, <span class="token string">'small'</span>
Filesystem <span class="token assign-left variable">label</span><span class="token operator">=</span>
OS type: Linux
Block <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Fragment <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token assign-left variable">Stride</span><span class="token operator">=</span><span class="token number">0</span> blocks, Stripe <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token number">0</span> blocks
<span class="token number">51000</span> inodes, <span class="token number">203776</span> blocks
<span class="token number">10188</span> blocks <span class="token punctuation">(</span><span class="token number">5.00</span>%<span class="token punctuation">)</span> reserved <span class="token keyword">for</span> the super user
First data <span class="token assign-left variable">block</span><span class="token operator">=</span><span class="token number">1</span>
Maximum filesystem <span class="token assign-left variable">blocks</span><span class="token operator">=</span><span class="token number">33816576</span>
<span class="token number">25</span> block <span class="token function">groups</span>
<span class="token number">8192</span> blocks per group, <span class="token number">8192</span> fragments per group
<span class="token number">2040</span> inodes per group
Filesystem UUID: 74b139a6-1843-4453-9245-a785d14403fa
Superblock backups stored on blocks:
        <span class="token number">8193</span>, <span class="token number">24577</span>, <span class="token number">40961</span>, <span class="token number">57345</span>, <span class="token number">73729</span>

Allocating group tables: <span class="token keyword">done</span>
Writing inode tables: <span class="token keyword">done</span>
Creating journal <span class="token punctuation">(</span><span class="token number">4096</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>

<span class="token function">mke2fs</span> <span class="token number">1.46</span>.5 <span class="token punctuation">(</span><span class="token number">30</span>-Dec-2021<span class="token punctuation">)</span>
fs_types <span class="token keyword">for</span> mke2fs.conf resolution: <span class="token string">'ext4'</span>, <span class="token string">'small'</span>
Filesystem <span class="token assign-left variable">label</span><span class="token operator">=</span>
OS type: Linux
Block <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
Fragment <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token assign-left variable">Stride</span><span class="token operator">=</span><span class="token number">0</span> blocks, Stripe <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token number">0</span> blocks
<span class="token number">51200</span> inodes, <span class="token number">204800</span> blocks
<span class="token number">10240</span> blocks <span class="token punctuation">(</span><span class="token number">5.00</span>%<span class="token punctuation">)</span> reserved <span class="token keyword">for</span> the super user
First data <span class="token assign-left variable">block</span><span class="token operator">=</span><span class="token number">1</span>
Maximum filesystem <span class="token assign-left variable">blocks</span><span class="token operator">=</span><span class="token number">33816576</span>
<span class="token number">25</span> block <span class="token function">groups</span>
<span class="token number">8192</span> blocks per group, <span class="token number">8192</span> fragments per group
<span class="token number">2048</span> inodes per group
Filesystem UUID: 0c9e71ea-32d4-4337-b3b4-2457b9d27272
Superblock backups stored on blocks:
        <span class="token number">8193</span>, <span class="token number">24577</span>, <span class="token number">40961</span>, <span class="token number">57345</span>, <span class="token number">73729</span>

Allocating group tables: <span class="token keyword">done</span>
Writing inode tables: <span class="token keyword">done</span>
Creating journal <span class="token punctuation">(</span><span class="token number">4096</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>
<span class="token punctuation">..</span>.
dust:/home/zhihao <span class="token comment"># </span></code></pre>
<p>Create swap partition</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># mkswap /dev/sdd9</span>
mkswap: /dev/sdd9: warning: wiping old ext4 signature.
Setting up swapspace version <span class="token number">1</span>, size <span class="token operator">=</span> <span class="token number">2.5</span> GiB <span class="token punctuation">(</span><span class="token number">2731536384</span> bytes<span class="token punctuation">)</span>
no label, <span class="token assign-left variable">UUID</span><span class="token operator">=</span>b3e382ad-2bac-43f4-a160-37f96fe098dc
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<h3 id="2.6-setting-%24lfs-variable" tabindex="-1">2.6 Setting $LFS Variable</h3>
<p>Set variable</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao<span class="token operator">|</span>$ <span class="token function">sudo</span> <span class="token function">su</span>
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> root:
dust:/home/zhihao <span class="token comment">#</span>
dust:/home/zhihao <span class="token comment"># export LFS=/mnt/lfs</span>
dust:/home/zhihao <span class="token comment">#</span>
dust:/home/zhihao <span class="token comment"># grep LFS /home/zhihao/.bashrc /home/zhihao/.bash_profile	 /root/.bashrc /root/.bash_profile</span>
/home/zhihao/.bashrc:export <span class="token assign-left variable">LFS</span><span class="token operator">=</span>/mnt/lfs
/home/zhihao/.bash_profile:export <span class="token assign-left variable">LFS</span><span class="token operator">=</span>/mnt/lfs
/root/.bashrc:export <span class="token assign-left variable">LFS</span><span class="token operator">=</span>/mnt/lfs
/root/.bash_profile:export <span class="token assign-left variable">LFS</span><span class="token operator">=</span>/mnt/lfs
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<h3 id="2.7-mounting-partiions" tabindex="-1">2.7 Mounting partiions</h3>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># mkdir -pv $LFS</span>
dust:/home/zhihao <span class="token comment"># lsblk -o +partlabel /dev/sdd</span>
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS PARTLABEL
sdd      <span class="token number">8</span>:48   <span class="token number">0</span> <span class="token number">106</span>.9G  <span class="token number">0</span> disk
├─sdd1   <span class="token number">8</span>:49   <span class="token number">0</span>   199M  <span class="token number">0</span> part             boot
├─sdd2   <span class="token number">8</span>:50   <span class="token number">0</span>   200M  <span class="token number">0</span> part             boot-uefi
├─sdd3   <span class="token number">8</span>:51   <span class="token number">0</span>    25G  <span class="token number">0</span> part             usr
├─sdd4   <span class="token number">8</span>:52   <span class="token number">0</span>    21G  <span class="token number">0</span> part             home
├─sdd5   <span class="token number">8</span>:53   <span class="token number">0</span>     5G  <span class="token number">0</span> part             opt
├─sdd6   <span class="token number">8</span>:54   <span class="token number">0</span>     3G  <span class="token number">0</span> part             tmp
├─sdd7   <span class="token number">8</span>:55   <span class="token number">0</span>    30G  <span class="token number">0</span> part             usr-src
├─sdd8   <span class="token number">8</span>:56   <span class="token number">0</span>    20G  <span class="token number">0</span> part             root
└─sdd9   <span class="token number">8</span>:57   <span class="token number">0</span>   <span class="token number">2</span>.5G  <span class="token number">0</span> part             swap
dust:/home/zhihao <span class="token comment"># mount -v -t ext4 /dev/sdd8 $LFS</span>
mount: /dev/sdd8 mounted on /mnt/lfs.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/boot; mount -v -t ext4 /dev/sdd1 $LFS/boot</span>
mkdir: created directory <span class="token string">'/mnt/lfs/boot'</span>
mount: /dev/sdd1 mounted on /mnt/lfs/boot.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/boot/efi; mount -v -t ext4 /dev/sdd2 $LFS/boot/efi</span>
mkdir: created directory <span class="token string">'/mnt/lfs/boot/efi'</span>
mount: /dev/sdd2 mounted on /mnt/lfs/boot/efi.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/usr; mount -v -t ext4 /dev/sdd3 $LFS/usr</span>
mkdir: created directory <span class="token string">'/mnt/lfs/usr'</span>
mount: /dev/sdd3 mounted on /mnt/lfs/usr.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/home; mount -v -t ext4 /dev/sdd4 $LFS/home</span>
mkdir: created directory <span class="token string">'/mnt/lfs/home'</span>
mount: /dev/sdd4 mounted on /mnt/lfs/home.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/opt; mount -v -t ext4 /dev/sdd5 $LFS/opt</span>
mkdir: created directory <span class="token string">'/mnt/lfs/opt'</span>
mount: /dev/sdd5 mounted on /mnt/lfs/opt.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/tmp; mount -v -t ext4 /dev/sdd6 $LFS/tmp</span>
mkdir: created directory <span class="token string">'/mnt/lfs/tmp'</span>
mount: /dev/sdd6 mounted on /mnt/lfs/tmp.
dust:/home/zhihao <span class="token comment"># mkdir -v $LFS/usr/src; mount -v -t ext4 /dev/sdd7 $LFS/usr/src</span>
mkdir: created directory <span class="token string">'/mnt/lfs/usr/src'</span>
mount: /dev/sdd7 mounted on /mnt/lfs/usr/src.
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<p>Add to fstab</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># tail -n9 /etc/fstab</span>
/dev/disk/by-partlabel/root /mnt/lfs/root ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/boot /mnt/lfs/boot ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/boot-uefi /mnt/lfs/boot/efi ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/usr /mnt/lfs/usr ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/home /mnt/lfs/home ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/opt /mnt/lfs/opt ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/tmp /mnt/lfs/tmp ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/usr-src /mnt/lfs/usr/src ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/swap  swap                    swap   defaults                      <span class="token number">0</span>  <span class="token number">0</span>
dust:/home/zhihao <span class="token comment"># </span></code></pre>
<p>Test if fstab works</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># findmnt $LFS/home</span>
TARGET        SOURCE    FSTYPE OPTIONS
/mnt/lfs/home /dev/sdd4 ext4   rw,relatime
dust:/home/zhihao <span class="token comment"># umount $LFS/home</span>
dust:/home/zhihao <span class="token comment"># findmnt $LFS/home</span>
dust:/home/zhihao <span class="token comment"># mount $LFS/home</span>
dust:/home/zhihao <span class="token comment"># findmnt $LFS/home</span>
TARGET        SOURCE    FSTYPE OPTIONS
/mnt/lfs/home /dev/sdd4 ext4   rw,relatime
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<p>Turn on swap</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># swapon -a</span>
dust:/home/zhihao <span class="token comment"># swapon -s</span>
Filename                                Type            Size            Used            Priority
/dev/sda3                               partition       <span class="token number">1561896</span>         <span class="token number">0</span>               <span class="token parameter variable">-2</span>
/dev/sdd9                               partition       <span class="token number">2667516</span>         <span class="token number">0</span>               <span class="token parameter variable">-3</span>
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<h2 id="3.-packages-and-patches" tabindex="-1">3. Packages and Patches</h2>
<h3 id="3.1-introduction" tabindex="-1">3.1 Introduction</h3>
<p>Create sources directory</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># echo $LFS</span>
/mnt/lfs
dust:/home/zhihao <span class="token comment"># mkdir $LFS/sources</span>
dust:/home/zhihao <span class="token comment"># chmod -v a+wt $LFS/sources</span>
mode of <span class="token string">'/mnt/lfs/sources'</span> changed from 0755 <span class="token punctuation">(</span>rwxr-xr-x<span class="token punctuation">)</span> to <span class="token number">1777</span> <span class="token punctuation">(</span>rwxrwxrwt<span class="token punctuation">)</span></code></pre>
<p>Create wget-list-sysv</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao/Downloads <span class="token comment"># cat wget-list-sysv</span>
https://download.savannah.gnu.org/releases/acl/acl-2.3.2.tar.xz
https://download.savannah.gnu.org/releases/attr/attr-2.5.2.tar.gz
https://ftp.gnu.org/gnu/autoconf/autoconf-2.72.tar.xz
https://ftp.gnu.org/gnu/automake/automake-1.16.5.tar.xz
https://ftp.gnu.org/gnu/bash/bash-5.2.21.tar.gz
https://github.com/gavinhoward/bc/releases/download/6.7.5/bc-6.7.5.tar.xz
https://sourceware.org/pub/binutils/releases/binutils-2.42.tar.xz
https://ftp.gnu.org/gnu/bison/bison-3.8.2.tar.xz
https://www.sourceware.org/pub/bzip2/bzip2-1.0.8.tar.gz
https://github.com/libcheck/check/releases/download/0.15.2/check-0.15.2.tar.gz
https://ftp.gnu.org/gnu/coreutils/coreutils-9.4.tar.xz
https://ftp.gnu.org/gnu/dejagnu/dejagnu-1.6.3.tar.gz
https://ftp.gnu.org/gnu/diffutils/diffutils-3.10.tar.xz
https://downloads.sourceforge.net/project/e2fsprogs/e2fsprogs/v1.47.0/e2fsprogs-1.47.0.tar.gz
https://sourceware.org/ftp/elfutils/0.190/elfutils-0.190.tar.bz2
https://prdownloads.sourceforge.net/expat/expat-2.6.0.tar.xz
https://prdownloads.sourceforge.net/expect/expect5.45.4.tar.gz
https://astron.com/pub/file/file-5.45.tar.gz
https://ftp.gnu.org/gnu/findutils/findutils-4.9.0.tar.xz
https://github.com/westes/flex/releases/download/v2.6.4/flex-2.6.4.tar.gz
https://pypi.org/packages/source/f/flit-core/flit_core-3.9.0.tar.gz
https://ftp.gnu.org/gnu/gawk/gawk-5.3.0.tar.xz
https://ftp.gnu.org/gnu/gcc/gcc-13.2.0/gcc-13.2.0.tar.xz
https://ftp.gnu.org/gnu/gdbm/gdbm-1.23.tar.gz
https://ftp.gnu.org/gnu/gettext/gettext-0.22.4.tar.xz
https://ftp.gnu.org/gnu/glibc/glibc-2.39.tar.xz
https://ftp.gnu.org/gnu/gmp/gmp-6.3.0.tar.xz
https://ftp.gnu.org/gnu/gperf/gperf-3.1.tar.gz
https://ftp.gnu.org/gnu/grep/grep-3.11.tar.xz
https://ftp.gnu.org/gnu/groff/groff-1.23.0.tar.gz
https://ftp.gnu.org/gnu/grub/grub-2.12.tar.xz
https://ftp.gnu.org/gnu/gzip/gzip-1.13.tar.xz
https://github.com/Mic92/iana-etc/releases/download/20240125/iana-etc-20240125.tar.gz
https://ftp.gnu.org/gnu/inetutils/inetutils-2.5.tar.xz
https://launchpad.net/intltool/trunk/0.51.0/+download/intltool-0.51.0.tar.gz
https://www.kernel.org/pub/linux/utils/net/iproute2/iproute2-6.7.0.tar.xz
https://pypi.org/packages/source/J/Jinja2/Jinja2-3.1.3.tar.gz
https://www.kernel.org/pub/linux/utils/kbd/kbd-2.6.4.tar.xz
https://www.kernel.org/pub/linux/utils/kernel/kmod/kmod-31.tar.xz
https://www.greenwoodsoftware.com/less/less-643.tar.gz
https://www.linuxfromscratch.org/lfs/downloads/12.1/lfs-bootscripts-20230728.tar.xz
https://www.kernel.org/pub/linux/libs/security/linux-privs/libcap2/libcap-2.69.tar.xz
https://github.com/libffi/libffi/releases/download/v3.4.4/libffi-3.4.4.tar.gz
https://download.savannah.gnu.org/releases/libpipeline/libpipeline-1.5.7.tar.gz
https://ftp.gnu.org/gnu/libtool/libtool-2.4.7.tar.xz
https://github.com/besser82/libxcrypt/releases/download/v4.4.36/libxcrypt-4.4.36.tar.xz
https://www.kernel.org/pub/linux/kernel/v6.x/linux-6.7.4.tar.xz
https://ftp.gnu.org/gnu/m4/m4-1.4.19.tar.xz
https://ftp.gnu.org/gnu/make/make-4.4.1.tar.gz
https://download.savannah.gnu.org/releases/man-db/man-db-2.12.0.tar.xz
https://www.kernel.org/pub/linux/docs/man-pages/man-pages-6.06.tar.xz
https://pypi.org/packages/source/M/MarkupSafe/MarkupSafe-2.1.5.tar.gz
https://github.com/mesonbuild/meson/releases/download/1.3.2/meson-1.3.2.tar.gz
https://ftp.gnu.org/gnu/mpc/mpc-1.3.1.tar.gz
https://ftp.gnu.org/gnu/mpfr/mpfr-4.2.1.tar.xz
https://anduin.linuxfromscratch.org/LFS/ncurses-6.4-20230520.tar.xz
https://github.com/ninja-build/ninja/archive/v1.11.1/ninja-1.11.1.tar.gz
https://www.openssl.org/source/openssl-3.2.1.tar.gz
https://ftp.gnu.org/gnu/patch/patch-2.7.6.tar.xz
https://www.cpan.org/src/5.0/perl-5.38.2.tar.xz
https://distfiles.ariadne.space/pkgconf/pkgconf-2.1.1.tar.xz
https://sourceforge.net/projects/procps-ng/files/Production/procps-ng-4.0.4.tar.xz
https://sourceforge.net/projects/psmisc/files/psmisc/psmisc-23.6.tar.xz
https://www.python.org/ftp/python/3.12.2/Python-3.12.2.tar.xz
https://www.python.org/ftp/python/doc/3.12.2/python-3.12.2-docs-html.tar.bz2
https://ftp.gnu.org/gnu/readline/readline-8.2.tar.gz
https://ftp.gnu.org/gnu/sed/sed-4.9.tar.xz
https://pypi.org/packages/source/s/setuptools/setuptools-69.1.0.tar.gz
https://github.com/shadow-maint/shadow/releases/download/4.14.5/shadow-4.14.5.tar.xz
https://www.infodrom.org/projects/sysklogd/download/sysklogd-1.5.1.tar.gz
https://github.com/systemd/systemd/archive/v255/systemd-255.tar.gz
https://anduin.linuxfromscratch.org/LFS/systemd-man-pages-255.tar.xz
https://github.com/slicer69/sysvinit/releases/download/3.08/sysvinit-3.08.tar.xz
https://ftp.gnu.org/gnu/tar/tar-1.35.tar.xz
https://downloads.sourceforge.net/tcl/tcl8.6.13-src.tar.gz
https://downloads.sourceforge.net/tcl/tcl8.6.13-html.tar.gz
https://ftp.gnu.org/gnu/texinfo/texinfo-7.1.tar.xz
https://www.iana.org/time-zones/repository/releases/tzdata2024a.tar.gz
https://anduin.linuxfromscratch.org/LFS/udev-lfs-20230818.tar.xz
https://www.kernel.org/pub/linux/utils/util-linux/v2.39/util-linux-2.39.3.tar.xz
https://github.com/vim/vim/archive/v9.1.0041/vim-9.1.0041.tar.gz
https://pypi.org/packages/source/w/wheel/wheel-0.42.0.tar.gz
https://cpan.metacpan.org/authors/id/T/TO/TODDR/XML-Parser-2.47.tar.gz
https://github.com/tukaani-project/xz/releases/download/v5.4.6/xz-5.4.6.tar.xz
https://zlib.net/fossils/zlib-1.3.1.tar.gz
https://github.com/facebook/zstd/releases/download/v1.5.5/zstd-1.5.5.tar.gz
dust:/home/zhihao/Downloads <span class="token comment">#</span></code></pre>
<p>Download packages</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao/Downloads <span class="token comment"># proxychains4 wget --input-file=wget-list-sysv --continue --directory-prefix=$LFS/sources</span></code></pre>
<p>Some packages are not found</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$ <span class="token function">wget</span> <span class="token parameter variable">--continue</span> --directory-prefix<span class="token operator">=</span><span class="token variable">$LFS</span>/sources https://prdownloads.sourceforge.net/expat/expat-2.6.0.tar.xz
--2024-05-22 <span class="token number">11</span>:03:39--  https://prdownloads.sourceforge.net/expat/expat-2.6.0.tar.xz
Connecting to <span class="token number">10.0</span>.2.2:7890<span class="token punctuation">..</span>. connected.
Proxy request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">404</span> Not Found
<span class="token number">2024</span>-05-22 <span class="token number">11</span>:03:40 ERROR <span class="token number">404</span>: Not Found.</code></pre>
<p>The reason is the expat file has been renamed as VULNERABLE https://sourceforge.net/projects/expat/files/expat/2.6.0/expat-2.6.0-RENAMED-VULNERABLE-PLEASE-USE-2.6.2-INSTEAD.tar.xz/download</p>
<p>I download 2.6.2 instead https://sourceforge.net/projects/expat/files/expat/2.6.2/expat-2.6.2.tar.xz/download</p>
<pre class="language-bash"><code class="language-bash">zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$ <span class="token function">wget</span> <span class="token parameter variable">--continue</span> --directory-prefix<span class="token operator">=</span><span class="token variable">$LFS</span>/sources https://prdownloads.sourceforge.net/expat/expat-2.6.2.tar.xz
--2024-05-22 <span class="token number">11</span>:07:17--  https://prdownloads.sourceforge.net/expat/expat-2.6.2.tar.xz
Connecting to <span class="token number">10.0</span>.2.2:7890<span class="token punctuation">..</span>. connected.
Proxy request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">301</span> Moved Permanently
Location: https://downloads.sourceforge.net/project/expat/expat/2.6.2/expat-2.6.2.tar.xz <span class="token punctuation">[</span>following<span class="token punctuation">]</span>
--2024-05-22 <span class="token number">11</span>:07:20--  https://downloads.sourceforge.net/project/expat/expat/2.6.2/expat-2.6.2.tar.xz
Connecting to <span class="token number">10.0</span>.2.2:7890<span class="token punctuation">..</span>. connected.
Proxy request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">302</span> Found
Location: https://netactuate.dl.sourceforge.net/project/expat/expat/2.6.2/expat-2.6.2.tar.xz?viasf<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">[</span>following<span class="token punctuation">]</span>
--2024-05-22 <span class="token number">11</span>:07:22--  https://netactuate.dl.sourceforge.net/project/expat/expat/2.6.2/expat-2.6.2.tar.xz?viasf<span class="token operator">=</span><span class="token number">1</span>
Connecting to <span class="token number">10.0</span>.2.2:7890<span class="token punctuation">..</span>. connected.
Proxy request sent, awaiting response<span class="token punctuation">..</span>. <span class="token number">200</span> OK
Length: <span class="token number">485236</span> <span class="token punctuation">(</span>474K<span class="token punctuation">)</span> <span class="token punctuation">[</span>application/octet-stream<span class="token punctuation">]</span>
Saving to: ‘/mnt/lfs/sources/expat-2.6.2.tar.xz’

expat-2.6.2.tar.xz             <span class="token number">100</span>%<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">]</span> <span class="token number">473</span>.86K   671KB/s    <span class="token keyword">in</span> <span class="token number">0</span>.7s

<span class="token number">2024</span>-05-22 <span class="token number">11</span>:07:24 <span class="token punctuation">(</span><span class="token number">671</span> KB/s<span class="token punctuation">)</span> - ‘/mnt/lfs/sources/expat-2.6.2.tar.xz’ saved <span class="token punctuation">[</span><span class="token number">485236</span>/485236<span class="token punctuation">]</span>

zhihao@dust<span class="token operator">|</span>/home/zhihao/Downloads<span class="token operator">|</span>$</code></pre>
<p>Download patches</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao/Downloads <span class="token comment"># cat wget-list-patches</span>
https://www.linuxfromscratch.org/patches/lfs/12.1/bash-5.2.21-upstream_fixes-1.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/bzip2-1.0.8-install_docs-1.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/coreutils-9.4-i18n-1.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/glibc-2.39-fhs-1.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/kbd-2.6.4-backspace-1.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/readline-8.2-upstream_fixes-3.patch
https://www.linuxfromscratch.org/patches/lfs/12.1/sysvinit-3.08-consolidated-1.patch
dust:/home/zhihao/Downloads <span class="token comment">#</span>
dust:/home/zhihao/Downloads <span class="token comment"># proxychains4 wget --input-file=wget-list-patches --continue --directory-prefix=$LFS/sources</span></code></pre>
<p>Update owner</p>
<pre class="language-bash"><code class="language-bash">    dust:/home/zhihao <span class="token comment"># chown root:root $LFS/sources/*</span>
    dust:/home/zhihao <span class="token comment">#</span></code></pre>
<h3 id="4.2-create-limited-directory-layout" tabindex="-1">4.2 Create Limited Directory Layout</h3>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao/Downloads <span class="token comment"># mkdir -pv $LFS/{etc,var} $LFS/usr/{bin,lib,sbin}</span>
mkdir: created directory <span class="token string">'/mnt/lfs/etc'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/var'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/usr/bin'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/usr/lib'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/usr/sbin'</span>
dust:/home/zhihao/Downloads <span class="token comment"># cd $LFS</span>
dust:/mnt/lfs <span class="token comment"># for i in bin lib sbin; do</span>
<span class="token operator">></span>   <span class="token function">ln</span> <span class="token parameter variable">-sv</span> usr/<span class="token variable">$i</span> <span class="token variable">$LFS</span>/<span class="token variable">$i</span>
<span class="token operator">></span> <span class="token keyword">done</span>
<span class="token string">'/mnt/lfs/bin'</span> -<span class="token operator">></span> <span class="token string">'usr/bin'</span>
<span class="token string">'/mnt/lfs/lib'</span> -<span class="token operator">></span> <span class="token string">'usr/lib'</span>
<span class="token string">'/mnt/lfs/sbin'</span> -<span class="token operator">></span> <span class="token string">'usr/sbin'</span>
dust:/mnt/lfs <span class="token comment"># ll</span>
total <span class="token number">38</span>
lrwxrwxrwx <span class="token number">1</span> root root    <span class="token number">7</span> May <span class="token number">18</span> <span class="token number">21</span>:53 bin -<span class="token operator">></span> usr/bin
drwxr-xr-x <span class="token number">4</span> root root <span class="token number">1024</span> Apr <span class="token number">24</span> <span class="token number">11</span>:15 boot
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">1024</span> Apr <span class="token number">24</span> 09:39 boot-uefi
drwxr-xr-x <span class="token number">1</span> root root    <span class="token number">0</span> May <span class="token number">18</span> <span class="token number">21</span>:50 etc
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Apr <span class="token number">24</span> 09:39 home
lrwxrwxrwx <span class="token number">1</span> root root    <span class="token number">7</span> May <span class="token number">18</span> <span class="token number">21</span>:53 lib -<span class="token operator">></span> usr/lib
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Apr <span class="token number">24</span> 09:39 opt
drwxr-xr-x <span class="token number">8</span> root root <span class="token number">4096</span> Apr <span class="token number">24</span> <span class="token number">11</span>:16 root
lrwxrwxrwx <span class="token number">1</span> root root    <span class="token number">8</span> May <span class="token number">18</span> <span class="token number">21</span>:53 sbin -<span class="token operator">></span> usr/sbin
drwxrwxrwt <span class="token number">1</span> root root <span class="token number">3720</span> May <span class="token number">18</span> <span class="token number">21</span>:44 sources
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Apr <span class="token number">24</span> 09:39 tmp
drwxr-xr-x <span class="token number">7</span> root root <span class="token number">4096</span> May <span class="token number">18</span> <span class="token number">21</span>:50 usr
drwxr-xr-x <span class="token number">3</span> root root <span class="token number">4096</span> Apr <span class="token number">24</span> 09:39 usr-src
drwxr-xr-x <span class="token number">1</span> root root    <span class="token number">0</span> May <span class="token number">18</span> <span class="token number">21</span>:50 var
dust:/mnt/lfs <span class="token comment"># case $(uname -m) in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span> <span class="token function">mkdir</span> <span class="token parameter variable">-pv</span> <span class="token variable">$LFS</span>/lib64 <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
mkdir: created directory <span class="token string">'/mnt/lfs/lib64'</span>
dust:/mnt/lfs <span class="token comment">#</span>
dust:/mnt/lfs <span class="token comment"># mkdir -pv $LFS/tools</span>
mkdir: created directory <span class="token string">'/mnt/lfs/tools'</span>
dust:/mnt/lfs <span class="token comment">#</span></code></pre>
<h3 id="4.3-add-lfs-user" tabindex="-1">4.3 Add lfs User</h3>
<pre class="language-bash"><code class="language-bash">dust:/mnt/lfs <span class="token comment"># groupadd lfs</span>
dust:/mnt/lfs <span class="token comment"># useradd -s /bin/bash -g lfs -m -k /dev/null lfs</span>
dust:/mnt/lfs <span class="token comment"># passwd lfs</span>
dust:/mnt/lfs <span class="token comment"># chown -v lfs $LFS/{usr{,/*},lib,var,etc,bin,sbin,tools}</span>
changed ownership of <span class="token string">'/mnt/lfs/usr'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/usr/bin'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/usr/lib'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/usr/lost+found'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/usr/sbin'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/usr/src'</span> from root to lfs
ownership of <span class="token string">'/mnt/lfs/lib'</span> retained as lfs
changed ownership of <span class="token string">'/mnt/lfs/var'</span> from root to lfs
changed ownership of <span class="token string">'/mnt/lfs/etc'</span> from root to lfs
ownership of <span class="token string">'/mnt/lfs/bin'</span> retained as lfs
ownership of <span class="token string">'/mnt/lfs/sbin'</span> retained as lfs
changed ownership of <span class="token string">'/mnt/lfs/tools'</span> from root to lfs
dust:/mnt/lfs <span class="token comment"># echo $?</span>
<span class="token number">0</span>
dust:/mnt/lfs <span class="token comment"># case $(uname -m) in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span> <span class="token function">chown</span> <span class="token parameter variable">-v</span> lfs <span class="token variable">$LFS</span>/lib64 <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
changed ownership of <span class="token string">'/mnt/lfs/lib64'</span> from root to lfs
dust:/mnt/lfs <span class="token comment">#</span>
dust:/mnt/lfs <span class="token comment"># su - lfs</span>
lfs@dust:~<span class="token operator">></span></code></pre>
<h3 id="4.4-setting-up-environment" tabindex="-1">4.4 Setting Up Environment</h3>
<pre class="language-bash"><code class="language-bash">lfs@dust:~<span class="token operator">></span> <span class="token function">cat</span> <span class="token operator">></span> ~/.bash_profile <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"</span>
<span class="token operator">></span> <span class="token builtin class-name">exec</span> <span class="token function">env</span> <span class="token parameter variable">-i</span> <span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span><span class="token environment constant">$HOME</span> <span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span><span class="token environment constant">$TERM</span> <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'\u:\w\$ '</span> /bin/bash
<span class="token operator">></span> EOF
lfs@dust:~<span class="token operator">></span> <span class="token function">cat</span> <span class="token operator">></span> ~/.bashrc <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> +h
<span class="token operator">></span> <span class="token builtin class-name">umask</span> 022
<span class="token operator">></span> <span class="token assign-left variable">LFS</span><span class="token operator">=</span>/mnt/lfs
<span class="token operator">></span> <span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>POSIX
<span class="token operator">></span> <span class="token assign-left variable">LFS_TGT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span>-lfs-linux-gnu
<span class="token operator">></span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/bin
<span class="token operator">></span> <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-L</span> /bin <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/bin:<span class="token environment constant">$PATH</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token operator">></span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$LFS</span>/tools/bin:<span class="token environment constant">$PATH</span>
<span class="token operator">></span> <span class="token assign-left variable">CONFIG_SITE</span><span class="token operator">=</span><span class="token variable">$LFS</span>/usr/share/config.site
<span class="token operator">></span> <span class="token builtin class-name">export</span> LFS <span class="token environment constant">LC_ALL</span> LFS_TGT <span class="token environment constant">PATH</span> CONFIG_SITE
<span class="token operator">></span> EOF
lfs@dust:~<span class="token operator">></span></code></pre>
<p>Rename bash.bashrc</p>
<pre class="language-bash"><code class="language-bash">dust:/home/zhihao <span class="token comment"># [ ! -e /etc/bash.bashrc ] || mv -v /etc/bash.bashrc /etc/bash.bashrc.NOUSE</span>
renamed <span class="token string">'/etc/bash.bashrc'</span> -<span class="token operator">></span> <span class="token string">'/etc/bash.bashrc.NOUSE'</span>
dust:/home/zhihao <span class="token comment">#</span></code></pre>
<p>Set option and relogin to make it work</p>
<pre class="language-bash"><code class="language-bash">lfs@dust:~<span class="token operator">></span> <span class="token function">cat</span> <span class="token operator">>></span> ~/.bashrc <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"</span>
<span class="token operator">></span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">MAKEFLAGS</span><span class="token operator">=</span>-j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
<span class="token operator">></span> EOF
lfs@dust:~<span class="token operator">></span>
lfs@dust:~<span class="token operator">></span> <span class="token builtin class-name">echo</span> <span class="token variable">$LFS</span>

lfs@dust:~<span class="token operator">></span> <span class="token builtin class-name">logout</span>
dust:/mnt/lfs <span class="token comment"># su - lfs</span>
lfs:~$ <span class="token builtin class-name">echo</span> <span class="token variable">$LFS</span>
/mnt/lfs</code></pre>
<h3 id="5.2-compile-binutils" tabindex="-1">5.2 Compile Binutils</h3>
<p>Decompress binutils shows file group error, but file is extracted successfully</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ xz <span class="token parameter variable">-dk</span> binutils-2.42.tar.xz
xz: binutils-2.42.tar: Cannot <span class="token builtin class-name">set</span> the <span class="token function">file</span> group: Operation not permitted
lfs:/mnt/lfs/sources$
lfs:/mnt/lfs/sources$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> binutils-2.42.tar*
-rw-r--r-- <span class="token number">1</span> lfs  lfs  <span class="token number">319897600</span> Jan <span class="token number">29</span> <span class="token number">23</span>:25 binutils-2.42.tar
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">27567160</span> Jan <span class="token number">29</span> <span class="token number">23</span>:25 binutils-2.42.tar.xz
lfs:/mnt/lfs/sources$</code></pre>
<p>Decompress tar file</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> binutils-2.42.tar
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">ls</span>
COPYING                 SECURITY.txt  cpu         libiberty       mkinstalldirs
COPYING.LIB             ar-lib        depcomp     libsframe       move-if-change
COPYING3                bfd           elfcpp      libtool.m4      multilib.am
COPYING3.LIB            binutils      etc         ltgcc.m4        opcodes
ChangeLog               compile       gas         ltmain.sh       setup.com
ChangeLog.git           config        gold        ltoptions.m4    sha256.sum
MAINTAINERS             config-ml.in  gprof       ltsugar.m4      src-release.sh
Makefile.def            config.guess  gprofng     ltversion.m4    symlink-tree
Makefile.in             config.rpath  include     lt~obsolete.m4  test-driver
Makefile.tpl            config.sub    install-sh  makefile.vms    texinfo
README                  configure     ld          missing         ylwrap
README-maintainer-mode  configure.ac  libctf      mkdep           zlib
lfs:/mnt/lfs/sources/binutils-2.42$</code></pre>
<p>Configure binutils</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">mkdir</span> <span class="token parameter variable">-v</span> build
mkdir: created directory <span class="token string">'build'</span>
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token builtin class-name">cd</span> build/
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token builtin class-name">echo</span> <span class="token variable">$LFS</span>
/mnt/lfs
lfs:/mnt/lfs/sources/binutils-2.42/build$
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token punctuation">..</span>/configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token variable">$LFS</span>/tools <span class="token punctuation">\</span>
<span class="token operator">></span>              --with-sysroot<span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">--target</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>   <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-nls       <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-gprofng<span class="token operator">=</span>no <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-werror    <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-default-hash-style<span class="token operator">=</span>gnu
checking build system type<span class="token punctuation">..</span>. x86_64-pc-linux-gnu
checking <span class="token function">host</span> system type<span class="token punctuation">..</span>. x86_64-pc-linux-gnu
checking target system type<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu
checking <span class="token keyword">for</span> a BSD-compatible install<span class="token punctuation">..</span>. /usr/bin/install <span class="token parameter variable">-c</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token function">make</span>
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token function">make</span> <span class="token function">install</span></code></pre>
<h3 id="5.3-install-gcc" tabindex="-1">5.3 Install GCC</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ xz <span class="token parameter variable">-dk</span> gcc-13.2.0.tar.xz
xz: gcc-13.2.0.tar: Cannot <span class="token builtin class-name">set</span> the <span class="token function">file</span> group: Operation not permitted
lfs:/mnt/lfs/sources$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> gcc-13.2.0.tar
-rw-r--r-- <span class="token number">1</span> lfs lfs <span class="token number">793477120</span> Jul <span class="token number">27</span>  <span class="token number">2023</span> gcc-13.2.0.tar
lfs:/mnt/lfs/sources$ <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> gcc-13.2.0.tar
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> gcc-13.2.0
lfs:/mnt/lfs/sources/gcc-13.2.0$</code></pre>
<p>Handle requirements</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/mpfr-4.2.1.tar.xz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> mpfr-4.2.1 mpfr
renamed <span class="token string">'mpfr-4.2.1'</span> -<span class="token operator">></span> <span class="token string">'mpfr'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/gmp-6.3.0.tar.xz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">0</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> gmp-6.3.0 gmp
renamed <span class="token string">'gmp-6.3.0'</span> -<span class="token operator">></span> <span class="token string">'gmp'</span>

lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/mpc-1.3.1.tar.gz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> mpc-1.3.1 mpc
renamed <span class="token string">'mpc-1.3.1'</span> -<span class="token operator">></span> <span class="token string">'mpc'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token keyword">case</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span> <span class="token keyword">in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span>
<span class="token operator">></span>     <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'/m64=/s/lib64/lib/'</span> <span class="token punctuation">\</span>
<span class="token operator">></span>         <span class="token parameter variable">-i.orig</span> gcc/config/i386/t-linux64
<span class="token operator">></span>  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$</code></pre>
<p>Create build dir</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mkdir</span> <span class="token parameter variable">-v</span> build<span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> build
mkdir: created directory <span class="token string">'build'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$</code></pre>
<p>Configure</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token punctuation">..</span>/configure                  <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--target</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>         <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--prefix</span><span class="token operator">=</span><span class="token variable">$LFS</span>/tools       <span class="token punctuation">\</span>
<span class="token operator">></span>     --with-glibc-version<span class="token operator">=</span><span class="token number">2.39</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     --with-sysroot<span class="token operator">=</span><span class="token variable">$LFS</span>       <span class="token punctuation">\</span>
<span class="token operator">></span>     --with-newlib             <span class="token punctuation">\</span>
<span class="token operator">></span>     --without-headers         <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-default-pie      <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-default-ssp      <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-nls             <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-shared          <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-multilib        <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-threads         <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libatomic       <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libgomp         <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libquadmath     <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libssp          <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libvtv          <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libstdcxx       <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-languages<span class="token operator">=</span>c,c++</code></pre>
<p>Start install</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span> <span class="token function">install</span></code></pre>
<p>Update limits.h</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">cat</span> gcc/limitx.h gcc/glimits.h gcc/limity.h <span class="token operator">></span> <span class="token punctuation">\</span>
<span class="token operator">></span>   <span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>$LFS_TGT-gcc -print-libgcc-file-name<span class="token punctuation">)</span><span class="token variable">`</span></span>/include/limits.h
lfs:/mnt/lfs/sources/gcc-13.2.0$</code></pre>
<h3 id="5.4-install-linux-6.7.4" tabindex="-1">5.4 install linux-6.7.4</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf linux-6.7.4.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> linux-6.7.4
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token function">ls</span>
COPYING        Kbuild    MAINTAINERS  arch   crypto   include   ipc     mm    samples   sound  virt
CREDITS        Kconfig   Makefile     block  drivers  init      kernel  net   scripts   tools
Documentation  LICENSES  README       certs  fs       io_uring  lib     rust  security  usr
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token function">make</span> mrproper
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
<span class="token number">0</span>
lfs:/mnt/lfs/sources/linux-6.7.4$
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token function">make</span> headers
  WRAP    arch/x86/include/generated/uapi/asm/errno.h
  WRAP    arch/x86/include/generated/uapi/asm/bpf_perf_event.h
  HOSTCC  scripts/basic/fixdep
  WRAP    arch/x86/include/generated/uapi/asm/fcntl.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_32.h
  UPD     include/generated/uapi/linux/version.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_64.h
  WRAP    arch/x86/include/generated/uapi/asm/ioctl.h
  WRAP    arch/x86/include/generated/uapi/asm/ioctls.h
  WRAP    arch/x86/include/generated/uapi/asm/ipcbuf.h
  SYSHDR  arch/x86/include/generated/uapi/asm/unistd_x32.h
  WRAP    arch/x86/include/generated/uapi/asm/param.h
  WRAP    arch/x86/include/generated/uapi/asm/poll.h
  WRAP    arch/x86/include/generated/uapi/asm/resource.h
  SYSTBL  arch/x86/include/generated/asm/syscalls_32.h
  WRAP    arch/x86/include/generated/uapi/asm/socket.h
  WRAP    arch/x86/include/generated/uapi/asm/sockios.h
  WRAP    arch/x86/include/generated/uapi/asm/termbits.h
  WRAP    arch/x86/include/generated/uapi/asm/termios.h
  WRAP    arch/x86/include/generated/uapi/asm/types.h
  HOSTCC  scripts/unifdef
  HOSTCC  arch/x86/tools/relocs_32.o
  <span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token function">find</span> usr/include/ <span class="token parameter variable">-type</span> f <span class="token operator">!</span>  <span class="token parameter variable">-name</span> <span class="token string">'*.h'</span> <span class="token parameter variable">-delete</span>
lfs:/mnt/lfs/sources/linux-6.7.4$ <span class="token function">cp</span> <span class="token parameter variable">-rv</span> usr/include <span class="token variable">$LFS</span>/usr
<span class="token string">'usr/include'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/include'</span>
<span class="token string">'usr/include/asm-generic'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/include/asm-generic'</span>
<span class="token string">'usr/include/asm-generic/kvm_para.h'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/include/asm-generic/kvm_para.h'</span>
<span class="token string">'usr/include/asm-generic/signal.h'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/include/asm-generic/signal.h'</span></code></pre>
<h3 id="5.5-glibc" tabindex="-1">5.5 Glibc</h3>
<p>Install</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf glibc-2.39.tar.xz
lfs:/mnt/lfs/sources/glibc-2.39$ <span class="token keyword">case</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span> <span class="token keyword">in</span>
<span class="token operator">></span>     i?86<span class="token punctuation">)</span>   <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> ld-linux.so.2 <span class="token variable">$LFS</span>/lib/ld-lsb.so.3
<span class="token operator">></span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span>     x86_64<span class="token punctuation">)</span> <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> <span class="token punctuation">..</span>/lib/ld-linux-x86-64.so.2 <span class="token variable">$LFS</span>/lib64
<span class="token operator">></span>             <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> <span class="token punctuation">..</span>/lib/ld-linux-x86-64.so.2 <span class="token variable">$LFS</span>/lib64/ld-lsb-x86-64.so.3
<span class="token operator">></span>     <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
<span class="token string">'/mnt/lfs/lib64/ld-linux-x86-64.so.2'</span> -<span class="token operator">></span> <span class="token string">'../lib/ld-linux-x86-64.so.2'</span>
<span class="token string">'/mnt/lfs/lib64/ld-lsb-x86-64.so.3'</span> -<span class="token operator">></span> <span class="token string">'../lib/ld-linux-x86-64.so.2'</span>
lfs:/mnt/lfs/sources/glibc-2.39$
lfs:/mnt/lfs/sources/glibc-2.39$ patch <span class="token parameter variable">-Np1</span> <span class="token parameter variable">-i</span> <span class="token punctuation">..</span>/glibc-2.39-fhs-1.patch
patching <span class="token function">file</span> Makeconfig
Hunk <span class="token comment">#1 succeeded at 262 (offset 12 lines).</span>
patching <span class="token function">file</span> nscd/nscd.h
Hunk <span class="token comment">#1 succeeded at 160 (offset 48 lines).</span>
patching <span class="token function">file</span> nss/db-Makefile
Hunk <span class="token comment">#1 succeeded at 21 (offset -1 lines).</span>
patching <span class="token function">file</span> sysdeps/generic/paths.h
patching <span class="token function">file</span> sysdeps/unix/sysv/linux/paths.h
lfs:/mnt/lfs/sources/glibc-2.39$
lfs:/mnt/lfs/sources/glibc-2.39$ <span class="token function">mkdir</span> <span class="token parameter variable">-v</span> build
mkdir: created directory <span class="token string">'build'</span>
lfs:/mnt/lfs/sources/glibc-2.39$ <span class="token builtin class-name">cd</span> build
lfs:/mnt/lfs/sources/glibc-2.39/build$
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token builtin class-name">echo</span> <span class="token string">"rootsbindir=/usr/sbin"</span> <span class="token operator">></span> configparms
lfs:/mnt/lfs/sources/glibc-2.39/build$
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token punctuation">..</span>/configure                             <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                      <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                    <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token punctuation">..</span>/scripts/config.guess<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<span class="token operator">></span>       --enable-kernel<span class="token operator">=</span><span class="token number">4.19</span>               <span class="token punctuation">\</span>
<span class="token operator">></span>       --with-headers<span class="token operator">=</span><span class="token variable">$LFS</span>/usr/include    <span class="token punctuation">\</span>
<span class="token operator">></span>       --disable-nscd                     <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token assign-left variable">libc_cv_slibdir</span><span class="token operator">=</span>/usr/lib
checking build system type<span class="token punctuation">..</span>. x86_64-pc-linux-gnu
checking <span class="token function">host</span> system type<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu
checking <span class="token keyword">for</span> x86_64-lfs-linux-gnu-gcc<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu-gcc
checking <span class="token keyword">for</span> suffix of object files<span class="token punctuation">..</span>. o
checking whether the compiler supports GNU C<span class="token punctuation">..</span>. <span class="token function">yes</span>
checking whether x86_64-lfs-linux-gnu-gcc accepts -g<span class="token punctuation">..</span>. <span class="token function">yes</span>
checking <span class="token keyword">for</span> x86_64-lfs-linux-gnu-gcc option to <span class="token builtin class-name">enable</span> C11 features<span class="token punctuation">..</span>. none needed
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs$ <span class="token function">du</span> <span class="token parameter variable">-h</span> <span class="token parameter variable">-d1</span> /mnt/lfs/
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/tmp/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
20K     /mnt/lfs/tmp
<span class="token number">4</span>.0K    /mnt/lfs/lib64
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/usr/src/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
118M    /mnt/lfs/usr
<span class="token number">7</span>.3G    /mnt/lfs/sources
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/boot/efi/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/boot/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
26K     /mnt/lfs/boot
<span class="token number">8</span>.0K    /mnt/lfs/etc
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
16K     /mnt/lfs/lost+found
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/home/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
20K     /mnt/lfs/home
<span class="token number">1</span>.3G    /mnt/lfs/tools
20K     /mnt/lfs/var
du: cannot <span class="token builtin class-name">read</span> directory <span class="token string">'/mnt/lfs/opt/lost+found'</span><span class="token builtin class-name">:</span> Permission denied
20K     /mnt/lfs/opt
<span class="token number">8</span>.6G    /mnt/lfs/
lfs:/mnt/lfs$
<span class="token function">sed</span> <span class="token string">'/RTLDLIST=/s@/usr@@g'</span> <span class="token parameter variable">-i</span> <span class="token variable">$LFS</span>/usr/bin/ldd</code></pre>
<p>Test if installed successfully</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token builtin class-name">echo</span> <span class="token string">'int main(){}'</span> <span class="token operator">|</span> <span class="token variable">$LFS_TGT</span>-gcc <span class="token parameter variable">-xc</span> -
lfs:/mnt/lfs/sources/glibc-2.39/build$ readelf <span class="token parameter variable">-l</span> a.out <span class="token operator">|</span> <span class="token function">grep</span> ld-linux
      <span class="token punctuation">[</span>Requesting program interpreter: /lib64/ld-linux-x86-64.so.2<span class="token punctuation">]</span>
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token builtin class-name">echo</span> <span class="token variable">$LFS_TGT</span>
x86_64-lfs-linux-gnu
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token function">which</span> <span class="token variable">$LFS_TGT</span>-gcc
/mnt/lfs/tools/bin/x86_64-lfs-linux-gnu-gcc
lfs:/mnt/lfs/sources/glibc-2.39/build$
lfs:/mnt/lfs/sources/glibc-2.39/build$ <span class="token function">rm</span> <span class="token parameter variable">-v</span> a.out
removed <span class="token string">'a.out'</span>
lfs:/mnt/lfs/sources/glibc-2.39/build$</code></pre>
<h3 id="5.6-libstdc%2B%2B-from-gcc-13.2.0" tabindex="-1">5.6 Libstdc++ from GCC-13.2.0</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">ls</span>
Makefile                   gcc           libcpp        serdep.tmp
build-x86_64-pc-linux-gnu  gmp           libdecnumber  x86_64-lfs-linux-gnu
c++tools                   intl          libiberty     zlib
config.log                 libbacktrace  lto-plugin
config.status              libcc1        mpc
fixincludes                libcody       mpfr
lfs:/mnt/lfs/sources/gcc-13.2.0/build$
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token punctuation">..</span>/libstdc++-v3/configure           <span class="token punctuation">\</span><span class="token operator">></span>     <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                 <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token punctuation">..</span>/config.guess<span class="token variable">)</span></span>      <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                   <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-multilib              <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-nls                   <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libstdcxx-pch         <span class="token punctuation">\</span>
<span class="token operator">></span>     --with-gxx-include-dir<span class="token operator">=</span>/tools/<span class="token variable">$LFS_TGT</span>/include/c++/13.2.0
checking build system type<span class="token punctuation">..</span>. x86_64-pc-linux-gnu
checking <span class="token function">host</span> system type<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu
checking target system type<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu
checking <span class="token keyword">for</span> a BSD-compatible install<span class="token punctuation">..</span>. /usr/bin/install <span class="token parameter variable">-c</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">rm</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/lib/lib<span class="token punctuation">{</span>stdc++<span class="token punctuation">{</span>,exp,fs<span class="token punctuation">}</span>,supc++<span class="token punctuation">}</span>.la
removed <span class="token string">'/mnt/lfs/usr/lib/libstdc++.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libstdc++exp.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libstdc++fs.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libsupc++.la'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$</code></pre>
<h2 id="6.-cross-compiling-temporary-tools" tabindex="-1">6. Cross Compiling Temporary Tools</h2>
<h3 id="6.2-m4-1.4.19" tabindex="-1">6.2 M4-1.4.19</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf m4-1.4.19.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> m4-1.4.19
lfs:/mnt/lfs/sources/m4-1.4.19$
lfs:/mnt/lfs/sources/m4-1.4.19$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
checking <span class="token keyword">for</span> a BSD-compatible install<span class="token punctuation">..</span>. /usr/bin/install <span class="token parameter variable">-c</span>
checking whether build environment is sane<span class="token punctuation">..</span>. <span class="token function">yes</span>
checking <span class="token keyword">for</span> x86_64-lfs-linux-gnu-strip<span class="token punctuation">..</span>. x86_64-lfs-linux-gnu-strip
<span class="token punctuation">..</span>.</code></pre>
<p>Make fails at MB_LEN_MAX error</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/m4-1.4.19$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
/mnt/lfs/usr/include/bits/stdlib.h: In <span class="token keyword">function</span> <span class="token string">'wctomb'</span><span class="token builtin class-name">:</span>
/mnt/lfs/usr/include/bits/stdlib.h:86:3: error: <span class="token comment">#error "Assumed value of MB_LEN_MAX wrong"</span>
   <span class="token number">86</span> <span class="token operator">|</span> <span class="token comment"># error "Assumed value of MB_LEN_MAX wrong"</span>
      <span class="token operator">|</span>   ^~~~~
In <span class="token function">file</span> included from /mnt/lfs/usr/include/stdlib.h:1159,
                 from ./stdlib.h:36,
                 from c-stack.c:44:
/mnt/lfs/usr/include/bits/stdlib.h: In <span class="token keyword">function</span> <span class="token string">'wctomb'</span><span class="token builtin class-name">:</span>
/mnt/lfs/usr/include/bits/stdlib.h:86:3: error: <span class="token comment">#error "Assumed value of MB_LEN_MAX wrong"</span>
   <span class="token number">86</span> <span class="token operator">|</span> <span class="token comment"># error "Assumed value of MB_LEN_MAX wrong"</span>
      <span class="token operator">|</span>   ^~~~~
  CC       c-strcasecmp.o
  CC       c-strncasecmp.o
  CC       canonicalize.o
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: *** <span class="token punctuation">[</span>Makefile:2866: c-stack.o<span class="token punctuation">]</span> Error <span class="token number">1</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: *** Waiting <span class="token keyword">for</span> unfinished jobs<span class="token punctuation">..</span><span class="token punctuation">..</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: *** <span class="token punctuation">[</span>Makefile:2866: openat-proc.o<span class="token punctuation">]</span> Error <span class="token number">1</span>
<span class="token punctuation">..</span>.</code></pre>
<p>There is an FAQ about it in https://linuxfromscratch.org/lfs/faq.html#m4-mb-len-max-wrong , untar gcc and generate limits.h again fixes it</p>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf gcc-13.2.0.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> gcc-13.2.0
lfs:/mnt/lfs$ <span class="token function">ls</span> <span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>$LFS_TGT-gcc -print-libgcc-file-name<span class="token punctuation">)</span><span class="token variable">`</span></span>/include/limits.h
/mnt/lfs/tools/lib/gcc/x86_64-lfs-linux-gnu/13.2.0/include/limits.h
lfs:/mnt/lfs$ <span class="token function">cp</span> <span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>$LFS_TGT-gcc -print-libgcc-file-name<span class="token punctuation">)</span><span class="token variable">`</span></span>/include/limits.h /tmp/
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">cat</span> gcc/limitx.h gcc/glimits.h gcc/limity.h
 <span class="token operator">></span> <span class="token punctuation">\</span>
<span class="token operator">></span>   <span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>$LFS_TGT-gcc -print-libgcc-file-name<span class="token punctuation">)</span><span class="token variable">`</span></span>/include/limits.h
lfs:/mnt/lfs$ <span class="token function">diff</span> <span class="token variable"><span class="token variable">`</span><span class="token function">dirname</span> <span class="token punctuation">$(</span>$LFS_TGT-gcc -print-libgcc-file-name<span class="token punctuation">)</span><span class="token variable">`</span></span>/include/limits.h /tmp/limits.h
<span class="token number">1</span>,35d0
<span class="token operator">&lt;</span> /* Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">1992</span>-2023 Free Software Foundation, Inc.
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> This <span class="token function">file</span> is part of GCC.
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> GCC is <span class="token function">free</span> software<span class="token punctuation">;</span> you can redistribute it and/or modify it under
<span class="token operator">&lt;</span> the terms of the GNU General Public License as published by the Free
<span class="token operator">&lt;</span> Software Foundation<span class="token punctuation">;</span> either version <span class="token number">3</span>, or <span class="token punctuation">(</span>at your option<span class="token punctuation">)</span> any later
<span class="token operator">&lt;</span> version.
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> GCC is distributed <span class="token keyword">in</span> the hope that it will be useful, but WITHOUT ANY
<span class="token operator">&lt;</span> WARRANTY<span class="token punctuation">;</span> without even the implied warranty of MERCHANTABILITY or
<span class="token operator">&lt;</span> FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
<span class="token operator">&lt;</span> <span class="token keyword">for</span> <span class="token function">more</span> details.
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> Under Section <span class="token number">7</span> of GPL version <span class="token number">3</span>, you are granted additional
<span class="token operator">&lt;</span> permissions described <span class="token keyword">in</span> the GCC Runtime Library Exception, version
<span class="token operator">&lt;</span> <span class="token number">3.1</span>, as published by the Free Software Foundation.
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> You should have received a copy of the GNU General Public License and
<span class="token operator">&lt;</span> a copy of the GCC Runtime Library Exception along with this program<span class="token punctuation">;</span>
<span class="token operator">&lt;</span> see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
<span class="token operator">&lt;</span> <span class="token operator">&lt;</span>http://www.gnu.org/licenses/<span class="token operator">></span>.  */
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> /* This administrivia gets added to the beginning of limits.h
<span class="token operator">&lt;</span>    <span class="token keyword">if</span> the system has its own version of limits.h.  */
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> /* We use _GCC_LIMITS_H_ because we want this not to match
<span class="token operator">&lt;</span>    any macros that the system's limits.h uses <span class="token keyword">for</span> its own purposes.  */
<span class="token operator">&lt;</span> <span class="token comment">#ifndef _GCC_LIMITS_H_  /* Terminated in limity.h.  */</span>
<span class="token operator">&lt;</span> <span class="token comment">#define _GCC_LIMITS_H_</span>
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> <span class="token comment">#ifndef _LIBC_LIMITS_H_</span>
<span class="token operator">&lt;</span> /* Use <span class="token string">"..."</span> so that we <span class="token function">find</span> syslimits.h only <span class="token keyword">in</span> this same directory.  */
<span class="token operator">&lt;</span> <span class="token comment">#include "syslimits.h"</span>
<span class="token operator">&lt;</span> <span class="token comment">#endif</span>
<span class="token number">199</span>,208d163
<span class="token operator">&lt;</span> /* This administrivia gets added to the end of limits.h
<span class="token operator">&lt;</span>    <span class="token keyword">if</span> the system has its own version of limits.h.  */
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> <span class="token comment">#else /* not _GCC_LIMITS_H_ */</span>
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> <span class="token comment">#ifdef _GCC_NEXT_LIMITS_H</span>
<span class="token operator">&lt;</span> <span class="token comment">#include_next &lt;limits.h>              /* recurse down to the real one */</span>
<span class="token operator">&lt;</span> <span class="token comment">#endif</span>
<span class="token operator">&lt;</span>
<span class="token operator">&lt;</span> <span class="token comment">#endif /* not _GCC_LIMITS_H_ */</span>
lfs:/mnt/lfs$
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/m4-1.4.19
lfs:/mnt/lfs/sources/m4-1.4.19$ <span class="token function">make</span>
lfs:/mnt/lfs/sources/m4-1.4.19$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span></code></pre>
<h3 id="6.3-ncurses" tabindex="-1">6.3 Ncurses</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf ncurses-6.4-20230520.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> ncurses-6.4-20230520
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">sed</span> <span class="token parameter variable">-i</span> s/mawk// configure
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">mkdir</span> build
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">pushd</span> build
/mnt/lfs/sources/ncurses-6.4-20230520/build /mnt/lfs/sources/ncurses-6.4-20230520
lfs:/mnt/lfs/sources/ncurses-6.4-20230520/build$   <span class="token punctuation">..</span>/configure
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">history</span> <span class="token number">10</span>
  <span class="token number">286</span>  <span class="token function">tar</span> xf ncurses-6.4-20230520.tar.xz
  <span class="token number">287</span>  <span class="token builtin class-name">cd</span> ncurses-6.4-20230520
  <span class="token number">288</span>  <span class="token function">sed</span> <span class="token parameter variable">-i</span> s/mawk// configure
  <span class="token number">289</span>  <span class="token function">mkdir</span> build
  <span class="token number">290</span>  <span class="token function">pushd</span> build
  <span class="token number">291</span>    <span class="token punctuation">..</span>/configure
  <span class="token number">292</span>    <span class="token function">make</span> <span class="token parameter variable">-C</span> include
  <span class="token number">293</span>    <span class="token function">make</span> <span class="token parameter variable">-C</span> progs tic
  <span class="token number">294</span>  <span class="token function">popd</span>
  <span class="token number">295</span>  <span class="token function">history</span> <span class="token number">10</span>
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>              <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./config.guess<span class="token variable">)</span></span>    <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--mandir</span><span class="token operator">=</span>/usr/share/man      <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-manpage-format<span class="token operator">=</span>normal <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-shared                <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-normal             <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-cxx-shared            <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-debug              <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-ada                <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-stripping          <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-widec
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token assign-left variable">TIC_PATH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/build/progs/tic <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">ln</span> <span class="token parameter variable">-sv</span> libncursesw.so <span class="token variable">$LFS</span>/usr/lib/libncurses.so
<span class="token string">'/mnt/lfs/usr/lib/libncurses.so'</span> -<span class="token operator">></span> <span class="token string">'libncursesw.so'</span>
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$
lfs:/mnt/lfs/sources/ncurses-6.4-20230520$ <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'s/^#if.*XOPEN.*$/#if 1/'</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> <span class="token variable">$LFS</span>/usr/include/curses.h</code></pre>
<h3 id="6.4-bash-5.2.21" tabindex="-1">6.4 Bash-5.2.21</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf bash-5.2.21.tar.gz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> bash-5.2.21
lfs:/mnt/lfs/sources/bash-5.2.21$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                      <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sh</span> support/config.guess<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                    <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-bash-malloc
lfs:/mnt/lfs/sources/bash-5.2.21$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/bash-5.2.21$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/bash-5.2.21$ <span class="token function">ln</span> <span class="token parameter variable">-sv</span> <span class="token function">bash</span> <span class="token variable">$LFS</span>/bin/sh
<span class="token string">'/mnt/lfs/bin/sh'</span> -<span class="token operator">></span> <span class="token string">'bash'</span>
lfs:/mnt/lfs/sources/bash-5.2.21$</code></pre>
<h3 id="6.5-coreutils-9.4" tabindex="-1">6.5 Coreutils-9.4</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf coreutils-9.4.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> coreutils-9.4
lfs:/mnt/lfs/sources/coreutils-9.4$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                     <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-install-program<span class="token operator">=</span>hostname <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-no-install-program<span class="token operator">=</span>kill,uptime
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/bin/chroot              <span class="token variable">$LFS</span>/usr/sbin
renamed <span class="token string">'/mnt/lfs/usr/bin/chroot'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/sbin/chroot'</span>
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">mkdir</span> <span class="token parameter variable">-pv</span> <span class="token variable">$LFS</span>/usr/share/man/man8
mkdir: created directory <span class="token string">'/mnt/lfs/usr/share/man/man8'</span>
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/share/man/man1/chroot.1 <span class="token variable">$LFS</span>/usr/share/man/man8/chroot.8
renamed <span class="token string">'/mnt/lfs/usr/share/man/man1/chroot.1'</span> -<span class="token operator">></span> <span class="token string">'/mnt/lfs/usr/share/man/man8/chroot.8'</span>
lfs:/mnt/lfs/sources/coreutils-9.4$ <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/"1"/"8"/'</span>                    <span class="token variable">$LFS</span>/usr/share/man/man8/chroot.8
lfs:/mnt/lfs/sources/coreutils-9.4$</code></pre>
<h3 id="6.6-diffutils-3.10" tabindex="-1">6.6 Diffutils-3.10</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf diffutils-3.10.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> diffutils-3.10
lfs:/mnt/lfs/sources/diffutils-3.10$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/diffutils-3.10$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/diffutils-3.10$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.7-file-5.45" tabindex="-1">6.7 File-5.45</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf file-5.45.tar.gz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> file-5.45
lfs:/mnt/lfs/sources/file-5.45$ <span class="token function">mkdir</span> build
lfs:/mnt/lfs/sources/file-5.45$ <span class="token function">pushd</span> build
/mnt/lfs/sources/file-5.45/build /mnt/lfs/sources/file-5.45 /mnt/lfs/sources
lfs:/mnt/lfs/sources/file-5.45/build$   <span class="token punctuation">..</span>/configure --disable-bzlib      <span class="token punctuation">\</span>
<span class="token operator">></span>                --disable-libseccomp <span class="token punctuation">\</span>
<span class="token operator">></span>                --disable-xzlib      <span class="token punctuation">\</span>
<span class="token operator">></span>                --disable-zlib
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/file-5.45/build$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/file-5.45/build$ <span class="token function">popd</span>
/mnt/lfs/sources/file-5.45 /mnt/lfs/sources
lfs:/mnt/lfs/sources/file-5.45$
lfs:/mnt/lfs/sources/file-5.45$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/file-5.45$ <span class="token function">make</span> <span class="token assign-left variable">FILE_COMPILE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/build/src/file
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/file-5.45$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/file-5.45$ <span class="token function">rm</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/lib/libmagic.la
removed <span class="token string">'/mnt/lfs/usr/lib/libmagic.la'</span>
lfs:/mnt/lfs/sources/file-5.45$</code></pre>
<h3 id="6.8-findutils-4.9.0" tabindex="-1">6.8 FindUtils-4.9.0</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf findutils-4.9.0.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> findutils-4.9.0
lfs:/mnt/lfs/sources/findutils-4.9.0$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--localstatedir</span><span class="token operator">=</span>/var/lib/locate <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                 <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/findutils-4.9.0$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/findutils-4.9.0$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.9-gawk-5.3.0" tabindex="-1">6.9 Gawk-5.3.0</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf gawk-5.3.0.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> <span class="token function">gawk</span>
bash: cd: gawk: No such <span class="token function">file</span> or directory
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> gawk-5.3.0
lfs:/mnt/lfs/sources/gawk-5.3.0$ <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/extras//'</span> Makefile.in
lfs:/mnt/lfs/sources/gawk-5.3.0$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gawk-5.3.0$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gawk-5.3.0$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.10-grep-3.11" tabindex="-1">6.10 Grep-3.11</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf grep-3.11.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> grep-3.11
lfs:/mnt/lfs/sources/grep-3.11$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./build-aux/config.guess<span class="token variable">)</span></span>
lfs:/mnt/lfs/sources/grep-3.11$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/grep-3.11$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.11-gzip-1.13" tabindex="-1">6.11 Gzip-1.13</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf gzip-1.13.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> gzip-1.13
lfs:/mnt/lfs/sources/gzip-1.13$
lfs:/mnt/lfs/sources/gzip-1.13$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gzip-1.13$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gzip-1.13$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.12-make-4.4.1" tabindex="-1">6.12 Make-4.4.1</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf make-4.4.1.tar.gz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> make-4.4.1
lfs:/mnt/lfs/sources/make-4.4.1$
lfs:/mnt/lfs/sources/make-4.4.1$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-guile <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/make-4.4.1$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/make-4.4.1$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.13-patch-2.7.6" tabindex="-1">6.13 Patch-2.7.6</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf patch-2.7.6.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> patch-2.7.6
lfs:/mnt/lfs/sources/patch-2.7.6$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/patch-2.7.6$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/patch-2.7.6$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.14-sed-4.9" tabindex="-1">6.14 Sed-4.9</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf sed-4.9.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> sed-4.9
lfs:/mnt/lfs/sources/sed-4.9$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span> <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>./build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/sed-4.9$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/sed-4.9$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.15-tar-1.35" tabindex="-1">6.15 Tar-1.35</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf tar-1.35.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> tar-1.35
lfs:/mnt/lfs/sources/tar-1.35$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                     <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/tar-1.35$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/tar-1.35$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="6.16-xz-5.4.6" tabindex="-1">6.16 Xz-5.4.6</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources$ <span class="token function">tar</span> xf xz-5.4.6.tar.xz
lfs:/mnt/lfs/sources$ <span class="token builtin class-name">cd</span> xz-5.4.6
lfs:/mnt/lfs/sources/xz-5.4.6$ ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                     <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>build-aux/config.guess<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static                  <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/xz-5.4.6
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/xz-5.4.6$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/xz-5.4.6$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/xz-5.4.6$ <span class="token function">rm</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/lib/liblzma.la
removed <span class="token string">'/mnt/lfs/usr/lib/liblzma.la'</span>
lfs:/mnt/lfs/sources/xz-5.4.6$</code></pre>
<h3 id="6.17-binutils-2.42---pass-2" tabindex="-1">6.17 Binutils-2.42 - Pass 2</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">sed</span> <span class="token string">'6009s/$add_dir//'</span> <span class="token parameter variable">-i</span> ltmain.sh
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">du</span> <span class="token parameter variable">-sh</span> build
183M    build
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> build
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token function">mkdir</span> <span class="token parameter variable">-v</span> build
mkdir: created directory <span class="token string">'build'</span>
lfs:/mnt/lfs/sources/binutils-2.42$ <span class="token builtin class-name">cd</span>       build
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token punctuation">..</span>/configure                   <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr              <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token punctuation">..</span>/config.guess<span class="token variable">)</span></span> <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>            <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-nls              <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-shared            <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-gprofng<span class="token operator">=</span>no        <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-werror           <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-64-bit-bfd        <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-default-hash-style<span class="token operator">=</span>gnu
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/binutils-2.42/build$ <span class="token function">rm</span> <span class="token parameter variable">-v</span> <span class="token variable">$LFS</span>/usr/lib/lib<span class="token punctuation">{</span>bfd,ctf,ctf-nobfd,opcodes,sframe<span class="token punctuation">}</span>.<span class="token punctuation">{</span>a,la<span class="token punctuation">}</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libbfd.a'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libbfd.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libctf.a'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libctf.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libctf-nobfd.a'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libctf-nobfd.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libopcodes.a'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libopcodes.la'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libsframe.a'</span>
removed <span class="token string">'/mnt/lfs/usr/lib/libsframe.la'</span>
lfs:/mnt/lfs/sources/binutils-2.42/build$</code></pre>
<h3 id="6.18-gcc-13.2.0---pass-2" tabindex="-1">6.18 GCC-13.2.0 - Pass 2</h3>
<pre class="language-bash"><code class="language-bash">lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/mpfr-4.2.1.tar.xz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> mpfr-4.2.1 mpfr
renamed <span class="token string">'mpfr-4.2.1'</span> -<span class="token operator">></span> <span class="token string">'mpfr/mpfr-4.2.1'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/gmp-6.3.0.tar.xz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> gmp-6.3.0 gmp
renamed <span class="token string">'gmp-6.3.0'</span> -<span class="token operator">></span> <span class="token string">'gmp/gmp-6.3.0'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">tar</span> <span class="token parameter variable">-xf</span> <span class="token punctuation">..</span>/mpc-1.3.1.tar.gz
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mv</span> <span class="token parameter variable">-v</span> mpc-1.3.1 mpc
renamed <span class="token string">'mpc-1.3.1'</span> -<span class="token operator">></span> <span class="token string">'mpc/mpc-1.3.1'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token keyword">case</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> <span class="token parameter variable">-m</span><span class="token variable">)</span></span> <span class="token keyword">in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span>
<span class="token operator">></span>     <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'/m64=/s/lib64/lib/'</span> <span class="token punctuation">\</span>
<span class="token operator">></span>         <span class="token parameter variable">-i.orig</span> gcc/config/i386/t-linux64
<span class="token operator">></span>   <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">sed</span> <span class="token string">'/thread_header =/s/@.*@/gthr-posix.h/'</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> libgcc/Makefile.in libstdc++-v3/include/Makefile.in
lfs:/mnt/lfs/sources/gcc-13.2.0$ ld <span class="token parameter variable">-d</span> build
ld: <span class="token builtin class-name">read</span> <span class="token keyword">in</span> flex scanner failed
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">ls</span> <span class="token parameter variable">-d</span> build
build
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> build
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token function">mkdir</span> <span class="token parameter variable">-v</span> build
mkdir: created directory <span class="token string">'build'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0$ <span class="token builtin class-name">cd</span>       build
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token punctuation">..</span>/configure                                       <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--build</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token punctuation">..</span>/config.guess<span class="token variable">)</span></span>                     <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                                <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--target</span><span class="token operator">=</span><span class="token variable">$LFS_TGT</span>                              <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable">LDFLAGS_FOR_TARGET</span><span class="token operator">=</span>-L<span class="token environment constant">$PWD</span>/<span class="token variable">$LFS_TGT</span>/libgcc      <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                                  <span class="token punctuation">\</span>
<span class="token operator">></span>     --with-build-sysroot<span class="token operator">=</span><span class="token variable">$LFS</span>                      <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-default-pie                           <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-default-ssp                           <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-nls                                  <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-multilib                             <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libatomic                            <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libgomp                              <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libquadmath                          <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libsanitizer                         <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libssp                               <span class="token punctuation">\</span>
<span class="token operator">></span>     --disable-libvtv                               <span class="token punctuation">\</span>
<span class="token operator">></span>     --enable-languages<span class="token operator">=</span>c,c++
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">make</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span><span class="token variable">$LFS</span> <span class="token function">install</span>
<span class="token punctuation">..</span>.
lfs:/mnt/lfs/sources/gcc-13.2.0/build$ <span class="token function">ln</span> <span class="token parameter variable">-sv</span> gcc <span class="token variable">$LFS</span>/usr/bin/cc
<span class="token string">'/mnt/lfs/usr/bin/cc'</span> -<span class="token operator">></span> <span class="token string">'gcc'</span>
lfs:/mnt/lfs/sources/gcc-13.2.0/build$</code></pre>
<h2 id="7.-entering-chroot-and-building-additional-temporary-tools" tabindex="-1">7. Entering Chroot and Building Additional Temporary Tools</h2>
<h3 id="7.2-changing-ownership" tabindex="-1">7.2 Changing Ownership</h3>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># chown -R root:root $LFS/{usr,lib,var,etc,bin,sbin,tools}</span>
bash-5.2<span class="token comment"># case $(uname -m) in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> root:root <span class="token variable">$LFS</span>/lib64 <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span></code></pre>
<h3 id="7.3-preparing-virtual-kernel-file-systems" tabindex="-1">7.3 Preparing Virtual Kernel File Systems</h3>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># mkdir -pv $LFS/{dev,proc,sys,run}</span>
mkdir: created directory <span class="token string">'/mnt/lfs/dev'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/proc'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/sys'</span>
mkdir: created directory <span class="token string">'/mnt/lfs/run'</span>
bash-5.2<span class="token comment">#</span></code></pre>
<h3 id="7.3.1-mounting-and-populating-%2Fdev%2F" tabindex="-1">7.3.1 Mounting and Populating /dev/</h3>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># mount -v --bind /dev $LFS/dev</span>
mount: /dev bound on /mnt/lfs/dev.
bash-5.2<span class="token comment">#</span></code></pre>
<h4 id="7.3.2-mounting-virtual-kernel-file-systems" tabindex="-1">7.3.2 Mounting Virtual Kernel File Systems</h4>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># mount -vt devpts devpts -o gid=5,mode=0620 $LFS/dev/pts</span>
mount: devpts mounted on /mnt/lfs/dev/pts.
bash-5.2<span class="token comment"># mount -vt proc proc $LFS/proc</span>
mount: proc mounted on /mnt/lfs/proc.
bash-5.2<span class="token comment"># mount -vt sysfs sysfs $LFS/sys</span>
mount: sysfs mounted on /mnt/lfs/sys.
bash-5.2<span class="token comment"># mount -vt tmpfs tmpfs $LFS/run</span>
mount: tmpfs mounted on /mnt/lfs/run.
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># if [ -h $LFS/dev/shm ]; then</span>
<span class="token operator">></span>   <span class="token function">install</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">-m</span> <span class="token number">1777</span> <span class="token variable">$LFS</span><span class="token variable"><span class="token variable">$(</span>realpath /dev/shm<span class="token variable">)</span></span>
<span class="token operator">></span> <span class="token keyword">else</span>
<span class="token operator">></span>   <span class="token function">mount</span> <span class="token parameter variable">-vt</span> tmpfs <span class="token parameter variable">-o</span> nosuid,nodev tmpfs <span class="token variable">$LFS</span>/dev/shm
<span class="token operator">></span> <span class="token keyword">fi</span>
mount: tmpfs mounted on /mnt/lfs/dev/shm.
bash-5.2<span class="token comment">#</span></code></pre>
<h3 id="7.4-entering-the-chroot-environment" tabindex="-1">7.4 Entering the Chroot Environment</h3>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># chroot "$LFS" /usr/bin/env -i   \</span>
<span class="token operator">></span>     <span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/root                  <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$TERM</span>"</span>                <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'(lfs chroot) \u:\w\$ '</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/bin:/usr/sbin     <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable">MAKEFLAGS</span><span class="token operator">=</span><span class="token string">"-j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>"</span>      <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token assign-left variable">TESTSUITEFLAGS</span><span class="token operator">=</span><span class="token string">"-j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>"</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     /bin/bash <span class="token parameter variable">--login</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span></code></pre>
<h3 id="7.5-creating-directories" tabindex="-1">7.5 Creating Directories</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /{boot,home,mnt,opt,srv}</span>
mkdir: created directory <span class="token string">'/mnt'</span>
mkdir: created directory <span class="token string">'/srv'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /etc/{opt,sysconfig}</span>
mkdir: created directory <span class="token string">'/etc/opt'</span>
mkdir: created directory <span class="token string">'/etc/sysconfig'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /lib/firmware</span>
mkdir: created directory <span class="token string">'/lib/firmware'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /media/{floppy,cdrom}</span>
mkdir: created directory <span class="token string">'/media'</span>
mkdir: created directory <span class="token string">'/media/floppy'</span>
mkdir: created directory <span class="token string">'/media/cdrom'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /usr/{,local/}{include,src}</span>
mkdir: created directory <span class="token string">'/usr/local'</span>
mkdir: created directory <span class="token string">'/usr/local/include'</span>
mkdir: created directory <span class="token string">'/usr/local/src'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /usr/local/{bin,lib,sbin}</span>
mkdir: created directory <span class="token string">'/usr/local/bin'</span>
mkdir: created directory <span class="token string">'/usr/local/lib'</span>
mkdir: created directory <span class="token string">'/usr/local/sbin'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /usr/{,local/}share/{color,dict,doc,info,locale,man}</span>
mkdir: created directory <span class="token string">'/usr/share/color'</span>
mkdir: created directory <span class="token string">'/usr/share/dict'</span>
mkdir: created directory <span class="token string">'/usr/local/share'</span>
mkdir: created directory <span class="token string">'/usr/local/share/color'</span>
mkdir: created directory <span class="token string">'/usr/local/share/dict'</span>
mkdir: created directory <span class="token string">'/usr/local/share/doc'</span>
mkdir: created directory <span class="token string">'/usr/local/share/info'</span>
mkdir: created directory <span class="token string">'/usr/local/share/locale'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /usr/{,local/}share/{misc,terminfo,zoneinfo}</span>
mkdir: created directory <span class="token string">'/usr/share/zoneinfo'</span>
mkdir: created directory <span class="token string">'/usr/local/share/misc'</span>
mkdir: created directory <span class="token string">'/usr/local/share/terminfo'</span>
mkdir: created directory <span class="token string">'/usr/local/share/zoneinfo'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /usr/{,local/}share/man/man{1..8}</span>
mkdir: created directory <span class="token string">'/usr/share/man/man2'</span>
mkdir: created directory <span class="token string">'/usr/share/man/man6'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man1'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man2'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man3'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man4'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man5'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man6'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man7'</span>
mkdir: created directory <span class="token string">'/usr/local/share/man/man8'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /var/{cache,local,log,mail,opt,spool}</span>
mkdir: created directory <span class="token string">'/var/cache'</span>
mkdir: created directory <span class="token string">'/var/local'</span>
mkdir: created directory <span class="token string">'/var/log'</span>
mkdir: created directory <span class="token string">'/var/mail'</span>
mkdir: created directory <span class="token string">'/var/opt'</span>
mkdir: created directory <span class="token string">'/var/spool'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># mkdir -pv /var/lib/{color,misc,locate}</span>
mkdir: created directory <span class="token string">'/var/lib/color'</span>
mkdir: created directory <span class="token string">'/var/lib/misc'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># ln -sfv /run /var/run</span>
<span class="token string">'/var/run'</span> -<span class="token operator">></span> <span class="token string">'/run'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># ln -sfv /run/lock /var/lock</span>
<span class="token string">'/var/lock'</span> -<span class="token operator">></span> <span class="token string">'/run/lock'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># install -dv -m 0750 /root</span>
install: creating directory <span class="token string">'/root'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># install -dv -m 1777 /tmp /var/tmp</span>
install: creating directory <span class="token string">'/var/tmp'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span></code></pre>
<h4 id="7.5.1-fhs-compliance-note" tabindex="-1">7.5.1 FHS Compliance Note</h4>
<h3 id="7.6-creating-essential-files-and-symlinks" tabindex="-1">7.6 Creating Essential Files and Symlinks</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># ln -sv /proc/self/mounts /etc/mtab</span>
<span class="token string">'/etc/mtab'</span> -<span class="token operator">></span> <span class="token string">'/proc/self/mounts'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># cat > /etc/hosts &lt;&lt; EOF</span>
<span class="token operator">></span> <span class="token number">127.0</span>.0.1  localhost <span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span>
<span class="token operator">></span> ::1        localhost
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># cat > /etc/passwd &lt;&lt; "EOF"</span>
<span class="token operator">></span> root:x:0:0:root:/root:/bin/bash
<span class="token operator">></span> bin:x:1:1:bin:/dev/null:/usr/bin/false
<span class="token operator">></span> daemon:x:6:6:Daemon User:/dev/null:/usr/bin/false
<span class="token operator">></span> messagebus:x:18:18:D-Bus Message Daemon User:/run/dbus:/usr/bin/false
<span class="token operator">></span> uuidd:x:80:80:UUID Generation Daemon User:/dev/null:/usr/bin/false
<span class="token operator">></span> nobody:x:65534:65534:Unprivileged User:/dev/null:/usr/bin/false
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># cat > /etc/group &lt;&lt; "EOF"</span>
<span class="token operator">></span> root:x:0:
<span class="token operator">></span> bin:x:1:daemon
<span class="token operator">></span> sys:x:2:
<span class="token operator">></span> kmem:x:3:
<span class="token operator">></span> tape:x:4:
<span class="token operator">></span> tty:x:5:
<span class="token operator">></span> daemon:x:6:
<span class="token operator">></span> floppy:x:7:
<span class="token operator">></span> disk:x:8:
<span class="token operator">></span> lp:x:9:
<span class="token operator">></span> dialout:x:10:
<span class="token operator">></span> audio:x:11:
<span class="token operator">></span> video:x:12:
<span class="token operator">></span> utmp:x:13:
<span class="token operator">></span> cdrom:x:15:
<span class="token operator">></span> adm:x:16:
<span class="token operator">></span> messagebus:x:18:
<span class="token operator">></span> input:x:24:
<span class="token operator">></span> mail:x:34:
<span class="token operator">></span> kvm:x:61:
<span class="token operator">></span> uuidd:x:80:
<span class="token operator">></span> wheel:x:97:
<span class="token operator">></span> users:x:999:
<span class="token operator">></span> nogroup:x:65534:
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># echo "tester:x:101:101::/home/tester:/bin/bash" >> /etc/passwd</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># echo "tester:x:101:" >> /etc/group</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># install -o tester -d /home/tester</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> I have no name<span class="token operator">!</span>:/<span class="token comment"># exec /usr/bin/bash --login</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment"># touch /var/log/{btmp,lastlog,faillog,wtmp}</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment"># chgrp -v utmp /var/log/lastlog</span>
changed group of <span class="token string">'/var/log/lastlog'</span> from root to utmp
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment"># chmod -v 664  /var/log/lastlog</span>
mode of <span class="token string">'/var/log/lastlog'</span> changed from 0644 <span class="token punctuation">(</span>rw-r--r--<span class="token punctuation">)</span> to 0664 <span class="token punctuation">(</span>rw-rw-r--<span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment"># chmod -v 600  /var/log/btmp</span>
mode of <span class="token string">'/var/log/btmp'</span> changed from 0644 <span class="token punctuation">(</span>rw-r--r--<span class="token punctuation">)</span> to 0600 <span class="token punctuation">(</span>rw-------<span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/<span class="token comment">#</span></code></pre>
<h3 id="7.7-gettext-0.22.4" tabindex="-1">7.7 Gettext-0.22.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gettext-0.22.4.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gettext-0.22.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># ./configure --disable-shared</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># cp -v gettext-tools/src/{msgfmt,msgmerge,xgettext} /usr/bin</span>
<span class="token string">'gettext-tools/src/msgfmt'</span> -<span class="token operator">></span> <span class="token string">'/usr/bin/msgfmt'</span>
<span class="token string">'gettext-tools/src/msgmerge'</span> -<span class="token operator">></span> <span class="token string">'/usr/bin/msgmerge'</span>
<span class="token string">'gettext-tools/src/xgettext'</span> -<span class="token operator">></span> <span class="token string">'/usr/bin/xgettext'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment">#</span></code></pre>
<h3 id="7.8-bison-3.8.2" tabindex="-1">7.8 Bison-3.8.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf bison-3.8.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd bison-3.8.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># ./configure --prefix=/usr \</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/bison-3.8.2
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># make </span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="7.9-perl-5.38.2" tabindex="-1">7.9 Perl-5.38.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf perl-5.38.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd perl-5.38.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># sh Configure -des                                        \</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dprefix</span><span class="token operator">=</span>/usr                               <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorprefix</span><span class="token operator">=</span>/usr                         <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Duseshrplib</span>                                <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dprivlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/core_perl     <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Darchlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/core_perl     <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dsitelib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/site_perl     <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dsitearch</span><span class="token operator">=</span>/usr/lib/perl5/5.38/site_perl    <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/vendor_perl <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorarch</span><span class="token operator">=</span>/usr/lib/perl5/5.38/vendor_perl
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="7.10-python-3.12.2" tabindex="-1">7.10 Python-3.12.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf Python-3.12.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd Python-3.12.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># ./configure --prefix=/usr   \</span>
<span class="token operator">></span>             --enable-shared <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-ensurepip
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="7.11-texinfo-7.1" tabindex="-1">7.11 Texinfo-7.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf texinfo-7.1.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd texinfo-7.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="7.12-util-linux-2.39.3" tabindex="-1">7.12 Util-linux-2.39.3</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># mkdir -pv /var/lib/hwclock</span>
mkdir: created directory <span class="token string">'/var/lib/hwclock'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf util-linux-2.39.3.tar.xz</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd util-linux-2.39.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># ./configure --libdir=/usr/lib    \</span>
<span class="token operator">></span>             <span class="token parameter variable">--runstatedir</span><span class="token operator">=</span>/run   <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-chfn-chsh  <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-login      <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-nologin    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-su         <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-setpriv    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-runuser    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-pylibmount <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static     <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-python     <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token assign-left variable">ADJTIME_PATH</span><span class="token operator">=</span>/var/lib/hwclock/adjtime <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/util-linux-2.39.3
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="7.13-cleaning-up-and-saving-the-temporary-system" tabindex="-1">7.13 Cleaning up and Saving the Temporary System</h3>
<h4 id="7.13.1-cleaning" tabindex="-1">7.13.1 Cleaning</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf /usr/share/{info,man,doc}/*</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># find /usr/{lib,libexec} -name \*.la -delete</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf /tools</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment">#</span></code></pre>
<h4 id="7.13.2-backup" tabindex="-1">7.13.2 Backup</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment">#</span>
<span class="token builtin class-name">logout</span>
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># mountpoint -q $LFS/dev/shm &amp;&amp; umount $LFS/dev/shm</span>
bash-5.2<span class="token comment"># umount $LFS/dev/pts</span>
bash-5.2<span class="token comment"># umount $LFS/{sys,proc,run,dev}</span>
bash-5.2<span class="token comment"># echo $LFS</span>
/mnt/lfs
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># cd $LFS</span>
bash-5.2<span class="token comment"># ls</span>
bin   dev  home  lib64       media  opt   root  sbin     srv  tmp  var
boot  etc  lib   lost+found  mnt    proc  run   sources  sys  usr
bash-5.2<span class="token comment"># pwd</span>
/mnt/lfs
bash-5.2<span class="token comment"># date</span>
Mon May <span class="token number">20</span> <span class="token number">10</span>:14:44 PM CST <span class="token number">2024</span>
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># du -sh /mnt/lfs</span>
12G     /mnt/lfs
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># tar -cJpf $HOME/lfs-temp-tools-12.1.tar.xz .</span>
bash-5.2<span class="token comment"># du -sh /root/lfs-temp-tools-12.1.tar.xz</span>
<span class="token number">2</span>.2G    /root/lfs-temp-tools-12.1.tar.xz
bash-5.2<span class="token comment">#</span></code></pre>
<h2 id="8.-installing-basic-system-software" tabindex="-1">8. Installing Basic System Software</h2>
<h3 id="8.3-man-pages-6.06" tabindex="-1">8.3 Man-pages-6.06</h3>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># history 10</span>
  <span class="token number">537</span>  removed <span class="token string">'man3/crypt.3'</span>
  <span class="token number">538</span>  removed <span class="token string">'man3/crypt_r.3'</span>
  <span class="token number">539</span>
  <span class="token number">540</span>  <span class="token function">mount</span> <span class="token parameter variable">-v</span> <span class="token parameter variable">--bind</span> /dev <span class="token variable">$LFS</span>/dev
  <span class="token number">541</span>  <span class="token function">mount</span> <span class="token parameter variable">-vt</span> devpts devpts <span class="token parameter variable">-o</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span>0620 <span class="token variable">$LFS</span>/dev/pts
  <span class="token number">542</span>  <span class="token function">mount</span> <span class="token parameter variable">-vt</span> proc proc <span class="token variable">$LFS</span>/proc
  <span class="token number">543</span>  <span class="token function">mount</span> <span class="token parameter variable">-vt</span> sysfs sysfs <span class="token variable">$LFS</span>/sys
  <span class="token number">544</span>  <span class="token function">mount</span> <span class="token parameter variable">-vt</span> tmpfs tmpfs <span class="token variable">$LFS</span>/run
  <span class="token number">545</span>  <span class="token function">mount</span> <span class="token parameter variable">-vt</span> tmpfs <span class="token parameter variable">-o</span> nosuid,nodev tmpfs <span class="token variable">$LFS</span>/dev/shm
  <span class="token number">546</span>  <span class="token function">history</span> <span class="token number">10</span>
bash-5.2<span class="token comment"># chroot "$LFS" /usr/bin/env -i       HOME=/root                      TERM="$TERM"                    PS1='(lfs chroot) \u:\w\$ '     PATH=/usr/bin:/usr/sbin         MAKEFLAGS="-j$(nproc)"          TESTSUITEFLAGS="-j$(nproc)"     /bin/bash --login</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf man-pages-6.06.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd man-pages-6.06</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/man-pages-6.06<span class="token comment"># rm -v man3/crypt*</span>
removed <span class="token string">'man3/crypt.3'</span>
removed <span class="token string">'man3/crypt_r.3'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/man-pages-6.06<span class="token comment"># make prefix=/usr install</span></code></pre>
<h3 id="8.4-iana-etc-20240125" tabindex="-1">8.4 Iana-Etc-20240125</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf iana-etc-20240125.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd iana-etc-20240125</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iana-etc-20240125<span class="token comment"># cp services protocols /etc</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iana-etc-20240125<span class="token comment">#</span></code></pre>
<h3 id="8.5-glibc-2.39" tabindex="-1">8.5 Glibc-2.39</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment"># patch -Np1 -i ../glibc-2.39-fhs-1.patch</span>
patching <span class="token function">file</span> Makeconfig
Reversed <span class="token punctuation">(</span>or previously applied<span class="token punctuation">)</span> patch detected<span class="token operator">!</span>  Skipping patch.
<span class="token number">1</span> out of <span class="token number">1</span> hunk ignored -- saving rejects to <span class="token function">file</span> Makeconfig.rej
patching <span class="token function">file</span> nscd/nscd.h
Reversed <span class="token punctuation">(</span>or previously applied<span class="token punctuation">)</span> patch detected<span class="token operator">!</span>  Skipping patch.
<span class="token number">1</span> out of <span class="token number">1</span> hunk ignored -- saving rejects to <span class="token function">file</span> nscd/nscd.h.rej
patching <span class="token function">file</span> nss/db-Makefile
Reversed <span class="token punctuation">(</span>or previously applied<span class="token punctuation">)</span> patch detected<span class="token operator">!</span>  Skipping patch.
<span class="token number">1</span> out of <span class="token number">1</span> hunk ignored -- saving rejects to <span class="token function">file</span> nss/db-Makefile.rej
patching <span class="token function">file</span> sysdeps/generic/paths.h
Reversed <span class="token punctuation">(</span>or previously applied<span class="token punctuation">)</span> patch detected<span class="token operator">!</span>  Skipping patch.
<span class="token number">1</span> out of <span class="token number">1</span> hunk ignored -- saving rejects to <span class="token function">file</span> sysdeps/generic/paths.h.rej
patching <span class="token function">file</span> sysdeps/unix/sysv/linux/paths.h
Reversed <span class="token punctuation">(</span>or previously applied<span class="token punctuation">)</span> patch detected<span class="token operator">!</span>  Skipping patch.
<span class="token number">1</span> out of <span class="token number">1</span> hunk ignored -- saving rejects to <span class="token function">file</span> sysdeps/unix/sysv/linux/paths.h.rej
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment"># ls -d build</span>
build
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment"># rm -rf build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment"># mkdir -v build</span>
mkdir: created directory <span class="token string">'build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># echo "rootsbindir=/usr/sbin" > configparms</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># ../configure --prefix=/usr                            \</span>
<span class="token operator">></span>              --disable-werror                         <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-kernel<span class="token operator">=</span><span class="token number">4.19</span>                     <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-stack-protector<span class="token operator">=</span>strong          <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-nscd                           <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token assign-left variable">libc_cv_slibdir</span><span class="token operator">=</span>/usr/lib
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># make</span>
<span class="token punctuation">..</span>.</code></pre>
<p>I ignore some fails</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
FAIL: io/tst-lchmod
<span class="token punctuation">..</span>.
FAIL: math/test-double-vlen4-avx2-tan
<span class="token punctuation">..</span>.
FAIL: math/test-float-vlen8-avx2-acos
<span class="token punctuation">..</span>.
                <span class="token operator">==</span><span class="token operator">=</span> Summary of results <span class="token operator">==</span><span class="token operator">=</span>
      <span class="token number">3</span> FAIL
   <span class="token number">5135</span> PASS
    <span class="token number">132</span> UNSUPPORTED
     <span class="token number">16</span> XFAIL
      <span class="token number">4</span> XPASS
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: *** <span class="token punctuation">[</span>Makefile:663: tests<span class="token punctuation">]</span> Error <span class="token number">1</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/glibc-2.39'</span>
make: *** <span class="token punctuation">[</span>Makefile:9: check<span class="token punctuation">]</span> Error <span class="token number">2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># echo $?</span>
<span class="token number">2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span></code></pre>
<p>Continue</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># touch /etc/ld.so.conf</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># sed '/test-installation/s@$(PERL)@echo not running@' -i ../Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># sed '/RTLDLIST=/s@/usr@@g' -i /usr/bin/ldd</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i C -f UTF-8 C.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i cs_CZ -f UTF-8 cs_CZ.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i de_DE -f ISO-8859-1 de_DE</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i de_DE@euro -f ISO-8859-15 de_DE@euro</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i de_DE -f UTF-8 de_DE.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i el_GR -f ISO-8859-7 el_GR</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_GB -f ISO-8859-1 en_GB</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_GB -f UTF-8 en_GB.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_HK -f ISO-8859-1 en_HK</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_PH -f ISO-8859-1 en_PH</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_US -f ISO-8859-1 en_US</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i en_US -f UTF-8 en_US.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i es_ES -f ISO-8859-15 es_ES@euro</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i es_MX -f ISO-8859-1 es_MX</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i fa_IR -f UTF-8 fa_IR</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i fr_FR -f ISO-8859-1 fr_FR</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i fr_FR@euro -f ISO-8859-15 fr_FR@euro</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i fr_FR -f UTF-8 fr_FR.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i is_IS -f ISO-8859-1 is_IS</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i is_IS -f UTF-8 is_IS.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i it_IT -f ISO-8859-1 it_IT</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i it_IT -f ISO-8859-15 it_IT@euro</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i it_IT -f UTF-8 it_IT.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ja_JP -f EUC-JP ja_JP</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ja_JP -f SHIFT_JIS ja_JP.SJIS 2> /dev/null || true</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ja_JP -f UTF-8 ja_JP.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i nl_NL@euro -f ISO-8859-15 nl_NL@euro</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ru_RU -f KOI8-R ru_RU.KOI8-R</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ru_RU -f UTF-8 ru_RU.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i se_NO -f UTF-8 se_NO.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i ta_IN -f UTF-8 ta_IN.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i tr_TR -f UTF-8 tr_TR.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i zh_CN -f GB18030 zh_CN.GB18030</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i zh_HK -f BIG5-HKSCS zh_HK.BIG5-HKSCS</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># localedef -i zh_TW -f UTF-8 zh_TW.UTF-8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># make localedata/install-locales</span></code></pre>
<h4 id="8.5.2-configuring-glibc" tabindex="-1">8.5.2 Configuring Glibc</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># cat > /etc/nsswitch.conf &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/nsswitch.conf</span>
<span class="token operator">></span> passwd: files
<span class="token operator">></span> group: files
<span class="token operator">></span> shadow: files
<span class="token operator">></span> hosts: files dns
<span class="token operator">></span> networks: files
<span class="token operator">></span> protocols: files
<span class="token operator">></span> services: files
<span class="token operator">></span> ethers: files
<span class="token operator">></span> rpc: files
<span class="token operator">></span> <span class="token comment"># End /etc/nsswitch.conf</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># tar -xf ../../tzdata2024a.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># ZONEINFO=/usr/share/zoneinfo</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># mkdir -pv $ZONEINFO/{posix,right}</span>
mkdir: created directory <span class="token string">'/usr/share/zoneinfo/posix'</span>
mkdir: created directory <span class="token string">'/usr/share/zoneinfo/right'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># for tz in etcetera southamerica northamerica europe africa antarctica  \</span>
<span class="token operator">></span>           asia australasia backward<span class="token punctuation">;</span> <span class="token keyword">do</span>
<span class="token operator">></span>     zic <span class="token parameter variable">-L</span> /dev/null   <span class="token parameter variable">-d</span> <span class="token variable">$ZONEINFO</span>       <span class="token variable">${tz}</span>
<span class="token operator">></span>     zic <span class="token parameter variable">-L</span> /dev/null   <span class="token parameter variable">-d</span> <span class="token variable">$ZONEINFO</span>/posix <span class="token variable">${tz}</span>
<span class="token operator">></span>     zic <span class="token parameter variable">-L</span> leapseconds <span class="token parameter variable">-d</span> <span class="token variable">$ZONEINFO</span>/right <span class="token variable">${tz}</span>
<span class="token operator">></span> <span class="token keyword">done</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
warning: <span class="token string">"leapseconds"</span>, line <span class="token number">80</span>: <span class="token string">"#expires"</span> is obsolescent<span class="token punctuation">;</span> use <span class="token string">"Expires"</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># cp -v zone.tab zone1970.tab iso3166.tab $ZONEINFO</span>
<span class="token string">'zone.tab'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/zoneinfo/zone.tab'</span>
<span class="token string">'zone1970.tab'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/zoneinfo/zone1970.tab'</span>
<span class="token string">'iso3166.tab'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/zoneinfo/iso3166.tab'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># zic -d $ZONEINFO -p America/New_York</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># unset ZONEINFO</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span></code></pre>
<p>Select timezone</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># tzselect</span>
Please identify a location so that <span class="token function">time</span> zone rules can be <span class="token builtin class-name">set</span> correctly.
Please <span class="token keyword">select</span> a continent, ocean, <span class="token string">"coord"</span>, or <span class="token string">"TZ"</span><span class="token builtin class-name">.</span>
 <span class="token number">1</span><span class="token punctuation">)</span> Africa
 <span class="token number">2</span><span class="token punctuation">)</span> Americas
 <span class="token number">3</span><span class="token punctuation">)</span> Antarctica
 <span class="token number">4</span><span class="token punctuation">)</span> Asia
 <span class="token number">5</span><span class="token punctuation">)</span> Atlantic Ocean
 <span class="token number">6</span><span class="token punctuation">)</span> Australia
 <span class="token number">7</span><span class="token punctuation">)</span> Europe
 <span class="token number">8</span><span class="token punctuation">)</span> Indian Ocean
 <span class="token number">9</span><span class="token punctuation">)</span> Pacific Ocean
<span class="token number">10</span><span class="token punctuation">)</span> coord - I want to use geographical coordinates.
<span class="token number">11</span><span class="token punctuation">)</span> TZ - I want to specify the timezone using the Posix TZ format.
<span class="token comment">#? 4</span>
Please <span class="token keyword">select</span> a country whose clocks agree with yours.
 <span class="token number">1</span><span class="token punctuation">)</span> Afghanistan              <span class="token number">15</span><span class="token punctuation">)</span> French S. Terr.          <span class="token number">29</span><span class="token punctuation">)</span> Kyrgyzstan               <span class="token number">43</span><span class="token punctuation">)</span> Russia
 <span class="token number">2</span><span class="token punctuation">)</span> Antarctica               <span class="token number">16</span><span class="token punctuation">)</span> Georgia                  <span class="token number">30</span><span class="token punctuation">)</span> Laos                     <span class="token number">44</span><span class="token punctuation">)</span> Saudi Arabia
 <span class="token number">3</span><span class="token punctuation">)</span> Armenia                  <span class="token number">17</span><span class="token punctuation">)</span> Hong Kong                <span class="token number">31</span><span class="token punctuation">)</span> Lebanon                  <span class="token number">45</span><span class="token punctuation">)</span> Seychelles
 <span class="token number">4</span><span class="token punctuation">)</span> Azerbaijan               <span class="token number">18</span><span class="token punctuation">)</span> India                    <span class="token number">32</span><span class="token punctuation">)</span> Macau                    <span class="token number">46</span><span class="token punctuation">)</span> Singapore
 <span class="token number">5</span><span class="token punctuation">)</span> Bahrain                  <span class="token number">19</span><span class="token punctuation">)</span> Indonesia                <span class="token number">33</span><span class="token punctuation">)</span> Malaysia                 <span class="token number">47</span><span class="token punctuation">)</span> Sri Lanka
 <span class="token number">6</span><span class="token punctuation">)</span> Bangladesh               <span class="token number">20</span><span class="token punctuation">)</span> Iran                     <span class="token number">34</span><span class="token punctuation">)</span> Mongolia                 <span class="token number">48</span><span class="token punctuation">)</span> Syria
 <span class="token number">7</span><span class="token punctuation">)</span> Bhutan                   <span class="token number">21</span><span class="token punctuation">)</span> Iraq                     <span class="token number">35</span><span class="token punctuation">)</span> Myanmar <span class="token punctuation">(</span>Burma<span class="token punctuation">)</span>          <span class="token number">49</span><span class="token punctuation">)</span> Taiwan
 <span class="token number">8</span><span class="token punctuation">)</span> Brunei                   <span class="token number">22</span><span class="token punctuation">)</span> Israel                   <span class="token number">36</span><span class="token punctuation">)</span> Nepal                    <span class="token number">50</span><span class="token punctuation">)</span> Tajikistan
 <span class="token number">9</span><span class="token punctuation">)</span> Cambodia                 <span class="token number">23</span><span class="token punctuation">)</span> Japan                    <span class="token number">37</span><span class="token punctuation">)</span> Oman                     <span class="token number">51</span><span class="token punctuation">)</span> Thailand
<span class="token number">10</span><span class="token punctuation">)</span> China                    <span class="token number">24</span><span class="token punctuation">)</span> Jordan                   <span class="token number">38</span><span class="token punctuation">)</span> Pakistan                 <span class="token number">52</span><span class="token punctuation">)</span> Turkmenistan
<span class="token number">11</span><span class="token punctuation">)</span> Christmas Island         <span class="token number">25</span><span class="token punctuation">)</span> Kazakhstan               <span class="token number">39</span><span class="token punctuation">)</span> Palestine                <span class="token number">53</span><span class="token punctuation">)</span> United Arab Emirates
<span class="token number">12</span><span class="token punctuation">)</span> Cocos <span class="token punctuation">(</span>Keeling<span class="token punctuation">)</span> Islands  <span class="token number">26</span><span class="token punctuation">)</span> Korea <span class="token punctuation">(</span>North<span class="token punctuation">)</span>            <span class="token number">40</span><span class="token punctuation">)</span> Philippines              <span class="token number">54</span><span class="token punctuation">)</span> Uzbekistan
<span class="token number">13</span><span class="token punctuation">)</span> Cyprus                   <span class="token number">27</span><span class="token punctuation">)</span> Korea <span class="token punctuation">(</span>South<span class="token punctuation">)</span>            <span class="token number">41</span><span class="token punctuation">)</span> Qatar                    <span class="token number">55</span><span class="token punctuation">)</span> Vietnam
<span class="token number">14</span><span class="token punctuation">)</span> East Timor               <span class="token number">28</span><span class="token punctuation">)</span> Kuwait                   <span class="token number">42</span><span class="token punctuation">)</span> R?union                  <span class="token number">56</span><span class="token punctuation">)</span> Yemen
<span class="token comment">#? 10</span>
Please <span class="token keyword">select</span> one of the following timezones.
<span class="token number">1</span><span class="token punctuation">)</span> Beijing Time
<span class="token number">2</span><span class="token punctuation">)</span> Xinjiang Time
<span class="token comment">#? 1</span>

The following information has been given:

        China
        Beijing Time

Therefore <span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span> will be used.
Selected <span class="token function">time</span> is now:   Tue May <span class="token number">21</span> <span class="token number">17</span>:28:04 CST <span class="token number">2024</span>.
Universal Time is now:  Tue May <span class="token number">21</span> 09:28:04 UTC <span class="token number">2024</span>.
Is the above information OK?
<span class="token number">1</span><span class="token punctuation">)</span> Yes
<span class="token number">2</span><span class="token punctuation">)</span> No
<span class="token comment">#? 1</span>

You can <span class="token function">make</span> this change permanent <span class="token keyword">for</span> yourself by appending the line
        <span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> TZ
to the <span class="token function">file</span> <span class="token string">'.profile'</span> <span class="token keyword">in</span> your home directory<span class="token punctuation">;</span> <span class="token keyword">then</span> log out and log <span class="token keyword">in</span> again.

Here is that TZ value again, this <span class="token function">time</span> on standard output so that you
can use the /usr/bin/tzselect <span class="token builtin class-name">command</span> <span class="token keyword">in</span> shell scripts:
Asia/Shanghai
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># echo "TZ='Asia/Shanghai'; export TZ" >> ~/.profile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># cat ~/.profile</span>
<span class="token assign-left variable">TZ</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span><span class="token punctuation">;</span> <span class="token builtin class-name">export</span> TZ
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># ln -sfv /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span>
<span class="token string">'/etc/localtime'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/zoneinfo/Asia/Shanghai'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span></code></pre>
<h5 id="8.5.2.3-configuring-the-dynamic-loader" tabindex="-1">8.5.2.3 Configuring the Dynamic Loader</h5>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># cat > /etc/ld.so.conf &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/ld.so.conf</span>
<span class="token operator">></span> /usr/local/lib
<span class="token operator">></span> /opt/lib
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># cat >> /etc/ld.so.conf &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Add an include directory</span>
<span class="token operator">></span> include /etc/ld.so.conf.d/*.conf
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment"># mkdir -pv /etc/ld.so.conf.d</span>
mkdir: created directory <span class="token string">'/etc/ld.so.conf.d'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/glibc-2.39/build<span class="token comment">#</span></code></pre>
<h3 id="8.6-zlib-1.3.1" tabindex="-1">8.6 Zlib-1.3.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf zlib-1.3.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd zlib-1.3.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment"># rm -fv /usr/lib/libz.a</span>
removed <span class="token string">'/usr/lib/libz.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zlib-1.3.1<span class="token comment">#</span></code></pre>
<h3 id="8.7-bzip2-1.0.8" tabindex="-1">8.7 Bzip2-1.0.8</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf bzip2-1.0.8.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd bzip2-1.0.8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># patch -Np1 -i ../bzip2-1.0.8-install_docs-1.patch</span>
patching <span class="token function">file</span> Makefile
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># sed -i 's@\(ln -s -f \)$(PREFIX)/bin/@\1@' Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># sed -i "s@(PREFIX)/man@(PREFIX)/share/man@g" Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># make -f Makefile-libbz2_so</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># make clean</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> *.o libbz2.a <span class="token function">bzip2</span> bzip2recover <span class="token punctuation">\</span>
sample1.rb2 sample2.rb2 sample3.rb2 <span class="token punctuation">\</span>
sample1.tst sample2.tst sample3.tst
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># make PREFIX=/usr install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># cp -av libbz2.so.* /usr/lib</span>
<span class="token string">'libbz2.so.1.0'</span> -<span class="token operator">></span> <span class="token string">'/usr/lib/libbz2.so.1.0'</span>
<span class="token string">'libbz2.so.1.0.8'</span> -<span class="token operator">></span> <span class="token string">'/usr/lib/libbz2.so.1.0.8'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># ln -sv libbz2.so.1.0.8 /usr/lib/libbz2.so</span>
<span class="token string">'/usr/lib/libbz2.so'</span> -<span class="token operator">></span> <span class="token string">'libbz2.so.1.0.8'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># cp -v bzip2-shared /usr/bin/bzip2</span>
<span class="token string">'bzip2-shared'</span> -<span class="token operator">></span> <span class="token string">'/usr/bin/bzip2'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># for i in /usr/bin/{bzcat,bunzip2}; do</span>
<span class="token operator">></span>   <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> <span class="token function">bzip2</span> <span class="token variable">$i</span>
<span class="token operator">></span> <span class="token keyword">done</span>
<span class="token string">'/usr/bin/bzcat'</span> -<span class="token operator">></span> <span class="token string">'bzip2'</span>
<span class="token string">'/usr/bin/bunzip2'</span> -<span class="token operator">></span> <span class="token string">'bzip2'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment"># rm -fv /usr/lib/libbz2.a</span>
removed <span class="token string">'/usr/lib/libbz2.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bzip2-1.0.8<span class="token comment">#</span></code></pre>
<h3 id="8.8-xz-5.4.6" tabindex="-1">8.8 Xz-5.4.6</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf xz-5.4.6.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd xz-5.4.6</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/xz-5.4.6<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/xz-5.4.6
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/xz-5.4.6<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/xz-5.4.6<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/xz-5.4.6<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.9-zstd-1.5.5" tabindex="-1">8.9 Zstd-1.5.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf zstd-1.5.5.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd zstd-1.5.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zstd-1.5.5<span class="token comment"># make prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zstd-1.5.5<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zstd-1.5.5<span class="token comment"># make prefix=/usr install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zstd-1.5.5<span class="token comment"># rm -v /usr/lib/libzstd.a</span>
removed <span class="token string">'/usr/lib/libzstd.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/zstd-1.5.5<span class="token comment">#</span></code></pre>
<h3 id="8.10-file-5.45" tabindex="-1">8.10 File-5.45</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf file-5.45.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd file-5.45</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/file-5.45<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/file-5.45<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/file-5.45<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/file-5.45<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.11-readline-8.2" tabindex="-1">8.11 Readline-8.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf readline-8.2.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd readline-8.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># sed -i '/MV.*old/d' Makefile.in</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># sed -i '/{OLDSUFF}/c:' support/shlib-install</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-curses    <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/readline-8.2
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># make SHLIB_LIBS="-lncursesw"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># make SHLIB_LIBS="-lncursesw" install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment"># install -v -m644 doc/*.{ps,pdf,html,dvi} /usr/share/doc/readline-8.2</span>
<span class="token string">'doc/history.ps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/history.ps'</span>
<span class="token string">'doc/history_3.ps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/history_3.ps'</span>
<span class="token string">'doc/readline.ps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/readline.ps'</span>
<span class="token string">'doc/readline_3.ps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/readline_3.ps'</span>
<span class="token string">'doc/rluserman.ps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/rluserman.ps'</span>
<span class="token string">'doc/history.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/history.pdf'</span>
<span class="token string">'doc/readline.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/readline.pdf'</span>
<span class="token string">'doc/rluserman.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/rluserman.pdf'</span>
<span class="token string">'doc/history.html'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/history.html'</span>
<span class="token string">'doc/readline.html'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/readline.html'</span>
<span class="token string">'doc/rluserman.html'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/rluserman.html'</span>
<span class="token string">'doc/history.dvi'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/history.dvi'</span>
<span class="token string">'doc/readline.dvi'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/readline.dvi'</span>
<span class="token string">'doc/rluserman.dvi'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/readline-8.2/rluserman.dvi'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/readline-8.2<span class="token comment">#</span></code></pre>
<h3 id="8.12-m4-1.4.19" tabindex="-1">8.12 M4-1.4.19</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/m4-1.4.19<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/m4-1.4.19<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/m4-1.4.19<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/m4-1.4.19<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.13-bc-6.7.5" tabindex="-1">8.13 Bc-6.7.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf bc-6.7.5.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd bc-6.7.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bc-6.7.5<span class="token comment"># CC=gcc ./configure --prefix=/usr -G -O3 -r</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bc-6.7.5<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bc-6.7.5<span class="token comment"># make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bc-6.7.5<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.14-flex-2.6.4" tabindex="-1">8.14 Flex-2.6.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf flex-2.6.4.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd flex-2.6.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># ./configure --prefix=/usr \</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/flex-2.6.4 <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># ln -sv flex   /usr/bin/lex</span>
<span class="token string">'/usr/bin/lex'</span> -<span class="token operator">></span> <span class="token string">'flex'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment"># ln -sv flex.1 /usr/share/man/man1/lex.1</span>
<span class="token string">'/usr/share/man/man1/lex.1'</span> -<span class="token operator">></span> <span class="token string">'flex.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flex-2.6.4<span class="token comment">#</span></code></pre>
<h3 id="8.15-tcl-8.6.13" tabindex="-1">8.15 Tcl-8.6.13</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf tcl8.6.13-src.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd tcl8.6.13</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># SRCDIR=$(pwd)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># cd unix</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># ./configure --prefix=/usr           \</span>
<span class="token operator">></span>             <span class="token parameter variable">--mandir</span><span class="token operator">=</span>/usr/share/man
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># sed -e "s|$SRCDIR/unix|/usr/lib|" \</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>|/usr/include|"</span>  <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> tclConfig.sh
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># sed -e "s|$SRCDIR/unix/pkgs/tdbc1.1.5|/usr/lib/tdbc1.1.5|" \</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>/pkgs/tdbc1.1.5/generic|/usr/include|"</span>    <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>/pkgs/tdbc1.1.5/library|/usr/lib/tcl8.6|"</span> <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>/pkgs/tdbc1.1.5|/usr/include|"</span>            <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> pkgs/tdbc1.1.5/tdbcConfig.sh
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># sed -e "s|$SRCDIR/unix/pkgs/itcl4.2.3|/usr/lib/itcl4.2.3|" \</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>/pkgs/itcl4.2.3/generic|/usr/include|"</span>    <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">"s|<span class="token variable">$SRCDIR</span>/pkgs/itcl4.2.3|/usr/include|"</span>            <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> pkgs/itcl4.2.3/itclConfig.sh
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># unset SRCDIR</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># chmod -v u+w /usr/lib/libtcl8.6.so</span>
mode of <span class="token string">'/usr/lib/libtcl8.6.so'</span> changed from 0555 <span class="token punctuation">(</span>r-xr-xr-x<span class="token punctuation">)</span> to 0755 <span class="token punctuation">(</span>rwxr-xr-x<span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># make install-private-headers</span>
Installing private header files to /usr/include/
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># ln -sfv tclsh8.6 /usr/bin/tclsh</span>
<span class="token string">'/usr/bin/tclsh'</span> -<span class="token operator">></span> <span class="token string">'tclsh8.6'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># mv /usr/share/man/man3/{Thread,Tcl_Thread}.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13/unix<span class="token comment"># cd ..</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># tar -xf ../tcl8.6.13-html.tar.gz --strip-components=1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># mkdir -v -p /usr/share/doc/tcl-8.6.13</span>
mkdir: created directory <span class="token string">'/usr/share/doc/tcl-8.6.13'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># cp -v -r  ./html/* /usr/share/doc/tcl-8.6.13</span>
<span class="token string">'./html/ItclCmd'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/tcl-8.6.13/ItclCmd'</span>
<span class="token string">'./html/ItclCmd/scope.htm'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/tcl-8.6.13/ItclCmd/scope.htm'</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.16-expect-5.45.4" tabindex="-1">8.16 Expect-5.45.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment"># python3 -c 'from pty import spawn; spawn(["echo", "ok"])'</span>
ok
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tcl8.6.13<span class="token comment">#(lfs chroot) root:/sources/tcl8.6.13# cd ..</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf expect5.45.4.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd expect5.45.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment"># ./configure --prefix=/usr           \</span>
<span class="token operator">></span>             --with-tcl<span class="token operator">=</span>/usr/lib     <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-shared         <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--mandir</span><span class="token operator">=</span>/usr/share/man <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-tclinclude<span class="token operator">=</span>/usr/include
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment"># make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment"># ln -svf expect5.45.4/libexpect5.45.4.so /usr/lib</span>
<span class="token string">'/usr/lib/libexpect5.45.4.so'</span> -<span class="token operator">></span> <span class="token string">'expect5.45.4/libexpect5.45.4.so'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expect5.45.4<span class="token comment">#</span></code></pre>
<h3 id="8.17-dejagnu-1.6.3" tabindex="-1">8.17 DejaGNU-1.6.3</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf dejagnu-1.6.3.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd dejagnu-1.6.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3<span class="token comment"># mkdir -v build</span>
mkdir: created directory <span class="token string">'build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># ../configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># makeinfo --html --no-split -o doc/dejagnu.html ../doc/dejagnu.texi</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># makeinfo --plaintext       -o doc/dejagnu.txt  ../doc/dejagnu.texi</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># install -v -dm755  /usr/share/doc/dejagnu-1.6.3</span>
install: creating directory <span class="token string">'/usr/share/doc/dejagnu-1.6.3'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment"># install -v -m644   doc/dejagnu.{html,txt} /usr/share/doc/dejagnu-1.6.3</span>
<span class="token string">'doc/dejagnu.html'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/dejagnu-1.6.3/dejagnu.html'</span>
<span class="token string">'doc/dejagnu.txt'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/dejagnu-1.6.3/dejagnu.txt'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/dejagnu-1.6.3/build<span class="token comment">#</span></code></pre>
<h3 id="8.18-pkgconf-2.1.1" tabindex="-1">8.18 Pkgconf-2.1.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf pkgconf-2.1.1.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd pkgconf-2.1.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment"># ./configure --prefix=/usr              \</span>
<span class="token operator">></span>             --disable-static           <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/pkgconf-2.1.1
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment"># ln -sv pkgconf   /usr/bin/pkg-config</span>
<span class="token string">'/usr/bin/pkg-config'</span> -<span class="token operator">></span> <span class="token string">'pkgconf'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment"># ln -sv pkgconf.1 /usr/share/man/man1/pkg-config.1</span>
<span class="token string">'/usr/share/man/man1/pkg-config.1'</span> -<span class="token operator">></span> <span class="token string">'pkgconf.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/pkgconf-2.1.1<span class="token comment">#</span></code></pre>
<h3 id="8.19-binutils-2.42" tabindex="-1">8.19 Binutils-2.42</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42<span class="token comment"># rm -rf build/</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42<span class="token comment"># mkdir -v build</span>
mkdir: created directory <span class="token string">'build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># ../configure --prefix=/usr       \</span>
<span class="token operator">></span>              <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc   <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-gold       <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-ld<span class="token operator">=</span>default <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-plugins    <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-shared     <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-werror    <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-64-bit-bfd <span class="token punctuation">\</span>
<span class="token operator">></span>              --with-system-zlib  <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-default-hash-style<span class="token operator">=</span>gnu
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># make tooldir=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># make -k check</span>
<span class="token punctuation">..</span>.
Running /sources/binutils-2.42/ld/testsuite/ld-xtensa/xtensa.exp <span class="token punctuation">..</span>.
Running /sources/binutils-2.42/ld/testsuite/ld-z80/z80.exp <span class="token punctuation">..</span>.
Running /sources/binutils-2.42/ld/testsuite/ld-z8k/z8k.exp <span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> ld Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            2949</span>
<span class="token comment"># of expected failures          60</span>
<span class="token comment"># of untested testcases         1</span>
<span class="token comment"># of unsupported tests          28</span>
./ld-new <span class="token number">2.42</span>

make<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/binutils-2.42/build/ld'</span>
make<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/binutils-2.42/build/ld'</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/binutils-2.42/build/ld'</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/binutils-2.42/build/ld'</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Target <span class="token string">'check-host'</span> not remade because of errors.
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/binutils-2.42/build'</span>
make: *** <span class="token punctuation">[</span>Makefile:2568: do-check<span class="token punctuation">]</span> Error <span class="token number">2</span>
make: Target <span class="token string">'check'</span> not remade because of errors.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># grep '^FAIL:' $(find -name '*.log')</span>
./gold/testsuite/test-suite.log:FAIL: weak_undef_test
./gold/testsuite/test-suite.log:FAIL: initpri3a
./gold/testsuite/test-suite.log:FAIL: script_test_1
./gold/testsuite/test-suite.log:FAIL: script_test_2
./gold/testsuite/test-suite.log:FAIL: justsyms
./gold/testsuite/test-suite.log:FAIL: justsyms_exec
./gold/testsuite/test-suite.log:FAIL: binary_test
./gold/testsuite/test-suite.log:FAIL: script_test_3
./gold/testsuite/test-suite.log:FAIL: tls_phdrs_script_test
./gold/testsuite/test-suite.log:FAIL: script_test_12i
./gold/testsuite/test-suite.log:FAIL: incremental_test_2
./gold/testsuite/test-suite.log:FAIL: incremental_test_5
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># grep '^FAIL:' $(find -name '*.log') | wc -l</span>
<span class="token number">12</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># make tooldir=/usr install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment"># rm -fv /usr/lib/lib{bfd,ctf,ctf-nobfd,gprofng,opcodes,sframe}.a</span>
removed <span class="token string">'/usr/lib/libbfd.a'</span>
removed <span class="token string">'/usr/lib/libctf.a'</span>
removed <span class="token string">'/usr/lib/libctf-nobfd.a'</span>
removed <span class="token string">'/usr/lib/libgprofng.a'</span>
removed <span class="token string">'/usr/lib/libopcodes.a'</span>
removed <span class="token string">'/usr/lib/libsframe.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/binutils-2.42/build<span class="token comment">#</span></code></pre>
<h3 id="8.20-gmp-6.3.0" tabindex="-1">8.20 GMP-6.3.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gmp-6.3.0.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gmp</span>
bash: cd: gmp: No such <span class="token function">file</span> or directory
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gmp-6.3.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --enable-cxx     <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/gmp-6.3.0 <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--host</span><span class="token operator">=</span>none-linux-gnu
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># make html</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># make check 2>&amp;1 | tee gmp-check-log</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># awk '/# PASS:/{total+=$3} ; END{print total}' gmp-check-log</span>
<span class="token number">199</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gmp-6.3.0<span class="token comment"># make install-html</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.21-mpfr-4.2.1" tabindex="-1">8.21 MPFR-4.2.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf mpfr-4.2.1.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd mpfr-4.2.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpfr-4.2.1<span class="token comment"># ./configure --prefix=/usr        \</span>
<span class="token operator">></span>             --disable-static     <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-thread-safe <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/mpfr-4.2.1
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpfr-4.2.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpfr-4.2.1<span class="token comment"># make html</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpfr-4.2.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpfr-4.2.1<span class="token comment"># make install-html</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.22-mpc-1.3.1" tabindex="-1">8.22 MPC-1.3.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf mpc-1.3.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd mpc-1.3.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/mpc-1.3.1
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># make html</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/mpc-1.3.1<span class="token comment"># make install-html</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.23-attr-2.5.2" tabindex="-1">8.23 Attr-2.5.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf attr-2.5.2.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd attr-2.5.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/attr-2.5.2<span class="token comment"># ./configure --prefix=/usr     \</span>
<span class="token operator">></span>             --disable-static  <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/attr-2.5.2
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/attr-2.5.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/attr-2.5.2<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/attr-2.5.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.24-acl-2.3.2" tabindex="-1">8.24 Acl-2.3.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf acl-2.3.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd acl-2.3.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/acl-2.3.2<span class="token comment"># ./configure --prefix=/usr         \</span>
<span class="token operator">></span>             --disable-static      <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/acl-2.3.2
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/acl-2.3.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/acl-2.3.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.25-libcap-2.69" tabindex="-1">8.25 Libcap-2.69</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf libcap-2.69.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd libcap-2.69</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libcap-2.69<span class="token comment"># sed -i '/install -m.*STA/d' libcap/Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libcap-2.69<span class="token comment"># make prefix=/usr lib=lib</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libcap-2.69<span class="token comment"># make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libcap-2.69<span class="token comment"># make prefix=/usr lib=lib install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.26-libxcrypt-4.4.36" tabindex="-1">8.26 Libxcrypt-4.4.36</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libcap-2.69<span class="token comment"># cd ..</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf libxcrypt-4.4.36.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd libxcrypt-4.4.36</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libxcrypt-4.4.36<span class="token comment"># ./configure --prefix=/usr                \</span>
<span class="token operator">></span>             --enable-hashes<span class="token operator">=</span>strong,glibc <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-obsolete-api<span class="token operator">=</span>no     <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static             <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-failure-tokens
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libxcrypt-4.4.36<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libxcrypt-4.4.36<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libxcrypt-4.4.36<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.27-shadow-4.14.5" tabindex="-1">8.27 Shadow-4.14.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf shadow-4.14.5.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd shadow-4.14.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># sed -i 's/groups$(EXEEXT) //' src/Makefile.in</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># find man -name Makefile.in -exec sed -i 's/groups\.1 / /'   {} \;</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># find man -name Makefile.in -exec sed -i 's/getspnam\.3 / /' {} \;</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># find man -name Makefile.in -exec sed -i 's/passwd\.5 / /'   {} \;</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># sed -e 's:#ENCRYPT_METHOD DES:ENCRYPT_METHOD YESCRYPT:' \</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">'s:/var/spool/mail:/var/mail:'</span>                   <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-e</span> <span class="token string">'/PATH=/{s@/sbin:@@;s@/bin:@@}'</span>                  <span class="token punctuation">\</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> etc/login.defs
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># touch /usr/bin/passwd</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># ./configure --sysconfdir=/etc   \</span>
<span class="token operator">></span>             --disable-static    <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-<span class="token punctuation">{</span>b,yes<span class="token punctuation">}</span>crypt <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-libbsd    <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-group-name-max-length<span class="token operator">=</span><span class="token number">32</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># make exec_prefix=/usr install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># make -C man install-man</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.27.2-configuring-shadow" tabindex="-1">8.27.2 Configuring Shadow</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># pwconv</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># grpconv</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># mkdir -p /etc/default</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># useradd -D --gid 999</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># sed -i '/MAIL/s/yes/no/' /etc/default/useradd</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment"># passwd root</span>
Changing password <span class="token keyword">for</span> root
Enter the new password <span class="token punctuation">(</span>minimum of <span class="token number">5</span> characters<span class="token punctuation">)</span>
Please use a combination of upper and lower <span class="token keyword">case</span> letters and numbers.
New password:
Bad password: too short.
Warning: weak password <span class="token punctuation">(</span>enter it again to use it anyway<span class="token punctuation">)</span>.
New password:
Re-enter new password:
passwd: password changed.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/shadow-4.14.5<span class="token comment">#</span></code></pre>
<h3 id="8.28-gcc-13.2.0" tabindex="-1">8.28 GCC-13.2.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0<span class="token comment"># rm -rf build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0<span class="token comment"># case $(uname -m) in</span>
<span class="token operator">></span>   x86_64<span class="token punctuation">)</span>
<span class="token operator">></span>     <span class="token function">sed</span> <span class="token parameter variable">-e</span> <span class="token string">'/m64=/s/lib64/lib/'</span> <span class="token punctuation">\</span>
<span class="token operator">></span>         <span class="token parameter variable">-i.orig</span> gcc/config/i386/t-linux64
<span class="token operator">></span>   <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token operator">></span> <span class="token keyword">esac</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0<span class="token comment"># mkdir -v build</span>
mkdir: created directory <span class="token string">'build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ../configure --prefix=/usr            \</span>
<span class="token operator">></span>              <span class="token assign-left variable">LD</span><span class="token operator">=</span>ld                    <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-languages<span class="token operator">=</span>c,c++ <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-default-pie     <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-default-ssp     <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-multilib       <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-bootstrap      <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-fixincludes    <span class="token punctuation">\</span>
<span class="token operator">></span>              --with-system-zlib
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ulimit -s 32768</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># su tester -c "PATH=$PATH make -j8 -k check"</span>
<span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            4275</span>
<span class="token comment"># of expected failures          11</span>
<span class="token comment"># of unsupported tests          102</span>
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1533</span>
<span class="token comment"># of expected failures          8</span>
<span class="token comment"># of unsupported tests          37</span>

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1419</span>
<span class="token comment"># of unexpected failures        1</span>
<span class="token comment"># of expected failures          19</span>
<span class="token comment"># of unsupported tests          58</span>

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1536</span>
<span class="token comment"># of expected failures          14</span>
<span class="token comment"># of unsupported tests          36</span>
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1480</span>
<span class="token comment"># of expected failures          12</span>
<span class="token comment"># of unsupported tests          19</span>

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1470</span>
<span class="token comment"># of expected failures          18</span>
<span class="token comment"># of unsupported tests          25</span>
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-prettyprinters/prettyprinters.exp <span class="token punctuation">..</span>.
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-prettyprinters/prettyprinters.exp <span class="token punctuation">..</span>.
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            1397</span>
<span class="token comment"># of expected failures          10</span>
<span class="token comment"># of unsupported tests          26</span>
Running /sources/gcc-13.2.0/libstdc++-v3/testsuite/libstdc++-xmethods/xmethods.exp <span class="token punctuation">..</span>.

                <span class="token operator">==</span><span class="token operator">=</span> libstdc++ Summary <span class="token operator">==</span><span class="token operator">=</span>

<span class="token comment"># of expected passes            2567</span>
<span class="token comment"># of expected failures          14</span>
<span class="token comment"># of unsupported tests          78</span>
make<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/testsuite'</span>
make<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/testsuite'</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/testsuite'</span>
Making check <span class="token keyword">in</span> python
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Entering directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/python'</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Nothing to be <span class="token keyword">done</span> <span class="token keyword">for</span> <span class="token string">'check'</span><span class="token builtin class-name">.</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3/python'</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Entering directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3'</span>
<span class="token boolean">true</span> <span class="token string">"AR_FLAGS=rc"</span> <span class="token string">"CC_FOR_BUILD=gcc"</span> <span class="token string">"CC_FOR_TARGET=/sources/gcc-13.2.0/build/./gcc/xgcc -B/sources/gcc-13.2.0/build/./gcc/"</span> <span class="token string">"CFLAGS=-g -O2"</span> <span class="token string">"CXXFLAGS=-g -O2 -D_GNU_SOURCE"</span> <span class="token string">"CFLAGS_FOR_BUILD=-g -O2"</span> <span class="token string">"CFLAGS_FOR_TARGET=-g -O2"</span> <span class="token string">"INSTALL=/usr/bin/install -c"</span> <span class="token string">"INSTALL_DATA=/usr/bin/install -c -m 644"</span> <span class="token string">"INSTALL_PROGRAM=/usr/bin/install -c"</span> <span class="token string">"INSTALL_SCRIPT=/usr/bin/install -c"</span> <span class="token string">"LDFLAGS="</span> <span class="token string">"LIBCFLAGS=-g -O2"</span> <span class="token string">"LIBCFLAGS_FOR_TARGET=-g -O2"</span> <span class="token string">"MAKE=make"</span> <span class="token string">"MAKEINFO=makeinfo --split-size=5000000 --split-size=5000000  "</span> <span class="token string">"SHELL=/bin/sh"</span> <span class="token string">"RUNTESTFLAGS="</span> <span class="token string">"exec_prefix=/usr"</span> <span class="token string">"infodir=/usr/share/info"</span> <span class="token string">"libdir=/usr/lib"</span> <span class="token string">"includedir=/usr/include"</span> <span class="token string">"prefix=/usr"</span> <span class="token string">"tooldir=/usr/x86_64-pc-linux-gnu"</span> <span class="token string">"gxx_include_dir=/usr/include/c++/13.2.0"</span> <span class="token string">"AR=ar"</span> <span class="token string">"AS=/sources/gcc-13.2.0/build/./gcc/as"</span> <span class="token string">"LD=/sources/gcc-13.2.0/build/./gcc/collect-ld"</span> <span class="token string">"RANLIB=ranlib"</span> <span class="token string">"NM=/sources/gcc-13.2.0/build/./gcc/nm"</span> <span class="token string">"NM_FOR_BUILD="</span> <span class="token string">"NM_FOR_TARGET=nm"</span> <span class="token string">"DESTDIR="</span> <span class="token string">"WERROR="</span> <span class="token assign-left variable">DO</span><span class="token operator">=</span>all multi-do <span class="token comment"># make</span>
make<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3'</span>
make<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build/x86_64-pc-linux-gnu/libstdc++-v3'</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/gcc-13.2.0/build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># echo $?</span>
<span class="token number">0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ../contrib/test_summary</span>
<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">'EOF'<span class="token bash punctuation"> <span class="token operator">|</span></span>
LAST_UPDATED: Obtained from git: releases/gcc-13.2.0 revision c891d8dc23e1a46ad9f3e757d09e57b500d40044

Native configuration is x86_64-pc-linux-gnu

                === g++ tests ===


Running target unix
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array + 3, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array - 1, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array, NULL, 36) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtollOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array + 3, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array - 1, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array, NULL, 36) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/asan_test.C   -O2  AddressSanitizer_StrtolOOBTest Strtol(array, NULL, 0) execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O0  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O1  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O2  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O3 -g  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -Os  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O2 -flto -fno-use-linker-plugin -flto-partition=none  execution test
FAIL: g++.dg/asan/interception-malloc-test-1.C   -O2 -flto -fuse-linker-plugin -fno-fat-lto-objects  execution test

                === g++ Summary ===

# of expected passes            237387
# of unexpected failures        21
# of expected failures          2071
# of unsupported tests          10456
/sources/gcc-13.2.0/build/gcc/xg++  version 13.2.0 (GCC)

                === gcc tests ===


Running target unix
FAIL: gcc.dg/analyzer/data-model-4.c (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -O0  (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -O1  (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -O2  (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -O3 -g  (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -Os  (test for excess errors)
FAIL: gcc.dg/analyzer/torture/conftest-1.c   -O2 -flto -fno-use-linker-plugin -flto-partition=none  (test for excess errors)
FAIL: gcc.dg/pr56837.c scan-tree-dump-times optimized "memset ..c, 68, 16384.;" 1

                === gcc Summary ===

# of expected passes            184920
# of unexpected failures        8
# of expected failures          1436
# of unsupported tests          2461
/sources/gcc-13.2.0/build/gcc/xgcc  version 13.2.0 (GCC)

                === libatomic tests ===


Running target unix

                === libatomic Summary ===

# of expected passes            54
                === libgomp tests ===


Running target unix

                === libgomp Summary ===

# of expected passes            5118
# of expected failures          32
# of unsupported tests          355
                === libitm tests ===


Running target unix

                === libitm Summary ===

# of expected passes            44
# of expected failures          3
# of unsupported tests          1
                === libstdc++ tests ===


Running target unix
FAIL: 23_containers/vector/bool/allocator/copy.cc (test for excess errors)

                === libstdc++ Summary ===

# of expected passes            15677
# of unexpected failures        1
# of expected failures          106
# of unsupported tests          381

Compiler version: 13.2.0 (GCC)
Platform: x86_64-pc-linux-gnu
configure flags: --prefix=/usr LD=ld --enable-languages=c,c++ --enable-default-pie --enable-default-ssp --disable-multilib --disable-bootstrap --disable-fixincludes --with-system-zlib
EOF</span>
Mail <span class="token parameter variable">-s</span> <span class="token string">"Results for 13.2.0 (GCC) testsuite on x86_64-pc-linux-gnu"</span> gcc-testresults@gcc.gnu.org <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./gcc/testsuite/g++/g++.sum /sources/gcc-13.2.0/build/./gcc/testsuite/g++/g++.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./gcc/testsuite/gcc/gcc.sum /sources/gcc-13.2.0/build/./gcc/testsuite/gcc/gcc.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libatomic/testsuite/libatomic.sum /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libatomic/testsuite/libatomic.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libgomp/testsuite/libgomp.sum /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libgomp/testsuite/libgomp.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libitm/testsuite/libitm.sum /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libitm/testsuite/libitm.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libstdc++-v3/testsuite/libstdc++.sum /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libstdc++-v3/testsuite/libstdc++.sum.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./gcc/testsuite/g++/g++.log /sources/gcc-13.2.0/build/./gcc/testsuite/g++/g++.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./gcc/testsuite/gcc/gcc.log /sources/gcc-13.2.0/build/./gcc/testsuite/gcc/gcc.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libatomic/testsuite/libatomic.log /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libatomic/testsuite/libatomic.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libgomp/testsuite/libgomp.log /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libgomp/testsuite/libgomp.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libitm/testsuite/libitm.log /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libitm/testsuite/libitm.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token function">mv</span> /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libstdc++-v3/testsuite/libstdc++.log /sources/gcc-13.2.0/build/./x86_64-pc-linux-gnu/libstdc++-v3/testsuite/libstdc++.log.sent <span class="token operator">&amp;&amp;</span>
<span class="token boolean">true</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># chown -v -R root:root \</span>
<span class="token operator">></span>     /usr/lib/gcc/<span class="token variable"><span class="token variable">$(</span>gcc <span class="token parameter variable">-dumpmachine</span><span class="token variable">)</span></span>/13.2.0/include<span class="token punctuation">{</span>,-fixed<span class="token punctuation">}</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ln -svr /usr/bin/cpp /usr/lib</span>
<span class="token string">'/usr/lib/cpp'</span> -<span class="token operator">></span> <span class="token string">'../bin/cpp'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ln -sv gcc.1 /usr/share/man/man1/cc.1</span>
<span class="token string">'/usr/share/man/man1/cc.1'</span> -<span class="token operator">></span> <span class="token string">'gcc.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># ln -sfv ../../libexec/gcc/$(gcc -dumpmachine)/13.2.0/liblto_plugin.so \</span>
<span class="token operator">></span>         /usr/lib/bfd-plugins
<span class="token string">'/usr/lib/bfd-plugins/liblto_plugin.so'</span> -<span class="token operator">></span> <span class="token string">'../../libexec/gcc/x86_64-pc-linux-gnu/13.2.0/liblto_plugin.so'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># echo 'int main(){}' > dummy.c</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># cc dummy.c -v -Wl,--verbose &amp;> dummy.log</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># readelf -l a.out | grep ': /lib'</span>
      <span class="token punctuation">[</span>Requesting program interpreter: /lib64/ld-linux-x86-64.so.2<span class="token punctuation">]</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># grep -E -o '/usr/lib.*/S?crt[1in].*succeeded' dummy.log</span>
/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.0/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/lib/Scrt1.o succeeded
/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.0/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/lib/crti.o succeeded
/usr/lib/gcc/x86_64-pc-linux-gnu/13.2.0/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/lib/crtn.o succeeded
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># grep -B4 '^ /usr/include' dummy.log</span>
<span class="token comment">#include &lt;...> search starts here:</span>
 /usr/lib/gcc/x86_64-pc-linux-gnu/13.2.0/include
 /usr/local/include
 /usr/lib/gcc/x86_64-pc-linux-gnu/13.2.0/include-fixed
 /usr/include
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># grep 'SEARCH.*/usr/lib' dummy.log |sed 's|; |\n|g'</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/x86_64-pc-linux-gnu/lib64"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/local/lib64"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/lib64"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/lib64"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/x86_64-pc-linux-gnu/lib"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/local/lib"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/lib"</span><span class="token punctuation">)</span>
SEARCH_DIR<span class="token punctuation">(</span><span class="token string">"/usr/lib"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># grep "/lib.*/libc.so.6 " dummy.log</span>
attempt to <span class="token function">open</span> /usr/lib/libc.so.6 succeeded
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># grep found dummy.log</span>
found ld-linux-x86-64.so.2 at /usr/lib/ld-linux-x86-64.so.2
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># rm -v dummy.c a.out dummy.log</span>
removed <span class="token string">'dummy.c'</span>
removed <span class="token string">'a.out'</span>
removed <span class="token string">'dummy.log'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># mkdir -pv /usr/share/gdb/auto-load/usr/lib</span>
mkdir: created directory <span class="token string">'/usr/share/gdb'</span>
mkdir: created directory <span class="token string">'/usr/share/gdb/auto-load'</span>
mkdir: created directory <span class="token string">'/usr/share/gdb/auto-load/usr'</span>
mkdir: created directory <span class="token string">'/usr/share/gdb/auto-load/usr/lib'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment"># mv -v /usr/lib/*gdb.py /usr/share/gdb/auto-load/usr/lib</span>
renamed <span class="token string">'/usr/lib/libstdc++.so.6.0.32-gdb.py'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/gdb/auto-load/usr/lib/libstdc++.so.6.0.32-gdb.py'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gcc-13.2.0/build<span class="token comment">#</span></code></pre>
<h3 id="8.29-ncurses-6.4-20230520" tabindex="-1">8.29 Ncurses-6.4-20230520</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># ./configure --prefix=/usr           \</span>
<span class="token operator">></span>             <span class="token parameter variable">--mandir</span><span class="token operator">=</span>/usr/share/man <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-shared           <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-debug         <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-normal        <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-cxx-shared       <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-pc-files       <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-widec          <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-pkg-config-libdir<span class="token operator">=</span>/usr/lib/pkgconfig
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># make DESTDIR=$PWD/dest install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># install -vm755 dest/usr/lib/libncursesw.so.6.4 /usr/lib</span>
removed <span class="token string">'/usr/lib/libncursesw.so.6.4'</span>
<span class="token string">'dest/usr/lib/libncursesw.so.6.4'</span> -<span class="token operator">></span> <span class="token string">'/usr/lib/libncursesw.so.6.4'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># rm -v  dest/usr/lib/libncursesw.so.6.4</span>
removed <span class="token string">'dest/usr/lib/libncursesw.so.6.4'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># sed -e 's/^#if.*XOPEN.*$/#if 1/' \</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> dest/usr/include/curses.h
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># cp -av dest/* /</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># for lib in ncurses form panel menu ; do</span>
<span class="token operator">></span>     <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> lib<span class="token variable">${lib}</span>w.so /usr/lib/lib<span class="token variable">${lib}</span>.so
<span class="token operator">></span>     <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> <span class="token variable">${lib}</span>w.pc    /usr/lib/pkgconfig/<span class="token variable">${lib}</span>.pc
<span class="token operator">></span> <span class="token keyword">done</span>
<span class="token string">'/usr/lib/libncurses.so'</span> -<span class="token operator">></span> <span class="token string">'libncursesw.so'</span>
<span class="token string">'/usr/lib/pkgconfig/ncurses.pc'</span> -<span class="token operator">></span> <span class="token string">'ncursesw.pc'</span>
<span class="token string">'/usr/lib/libform.so'</span> -<span class="token operator">></span> <span class="token string">'libformw.so'</span>
<span class="token string">'/usr/lib/pkgconfig/form.pc'</span> -<span class="token operator">></span> <span class="token string">'formw.pc'</span>
<span class="token string">'/usr/lib/libpanel.so'</span> -<span class="token operator">></span> <span class="token string">'libpanelw.so'</span>
<span class="token string">'/usr/lib/pkgconfig/panel.pc'</span> -<span class="token operator">></span> <span class="token string">'panelw.pc'</span>
<span class="token string">'/usr/lib/libmenu.so'</span> -<span class="token operator">></span> <span class="token string">'libmenuw.so'</span>
<span class="token string">'/usr/lib/pkgconfig/menu.pc'</span> -<span class="token operator">></span> <span class="token string">'menuw.pc'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># ln -sfv libncursesw.so /usr/lib/libcurses.so</span>
<span class="token string">'/usr/lib/libcurses.so'</span> -<span class="token operator">></span> <span class="token string">'libncursesw.so'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ncurses-6.4-20230520<span class="token comment"># cp -v -R doc -T /usr/share/doc/ncurses-6.4-20230520</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.30-sed-4.9" tabindex="-1">8.30 Sed-4.9</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># make html</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># su tester -c "PATH=$PATH make check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># install -d -m755           /usr/share/doc/sed-4.9</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sed-4.9<span class="token comment"># install -m644 doc/sed.html /usr/share/doc/sed-4.9</span></code></pre>
<h3 id="8.31-psmisc-23.6" tabindex="-1">8.31 Psmisc-23.6</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf psmisc-23.6.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd psmisc-23.6</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/psmisc-23.6<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/psmisc-23.6<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/psmisc-23.6<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/psmisc-23.6<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.32-gettext-0.22.4" tabindex="-1">8.32 Gettext-0.22.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf gettext-0.22.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gettext-0.22.4.tar.xz</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gettext-0.22.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/gettext-0.22.4
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment"># chmod -v 0755 /usr/lib/preloadable_libintl.so</span>
mode of <span class="token string">'/usr/lib/preloadable_libintl.so'</span> changed from 0644 <span class="token punctuation">(</span>rw-r--r--<span class="token punctuation">)</span> to 0755 <span class="token punctuation">(</span>rwxr-xr-x<span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gettext-0.22.4<span class="token comment">#</span></code></pre>
<h3 id="8.33-bison-3.8.2" tabindex="-1">8.33 Bison-3.8.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm bison-3.8.2</span>
rm: cannot remove <span class="token string">'bison-3.8.2'</span><span class="token builtin class-name">:</span> Is a directory
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf bison-3.8.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf bison-3.8.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd bison-3.8.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># ./configure --prefix=/usr --docdir=/usr/share/doc/bison-3.8.2</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bison-3.8.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.35.-bash-5.2.21" tabindex="-1">8.35. Bash-5.2.21</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf bash-5.2.21</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf bash-5.2.21.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd bash-5.2.21</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># patch -Np1 -i ../bash-5.2.21-upstream_fixes-1.patch</span>
patching <span class="token function">file</span> builtins/declare.def
patching <span class="token function">file</span> patchlevel.h
patching <span class="token function">file</span> arrayfunc.c
patching <span class="token function">file</span> subst.c
patching <span class="token function">file</span> patchlevel.h
patching <span class="token function">file</span> execute_cmd.c
patching <span class="token function">file</span> patchlevel.h
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># ./configure --prefix=/usr             \</span>
<span class="token operator">></span>             --without-bash-malloc     <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-installed-readline <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/bash-5.2.21
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># su -s /usr/bin/expect tester &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token function">timeout</span> <span class="token parameter variable">-1</span>
<span class="token operator">></span> spawn <span class="token function">make</span> tests
<span class="token operator">></span> <span class="token function">expect</span> eof
<span class="token operator">></span> lassign <span class="token punctuation">[</span>wait<span class="token punctuation">]</span> _ _ _ value
<span class="token operator">></span> <span class="token builtin class-name">exit</span> <span class="token variable">$value</span>
<span class="token operator">></span> EOF
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment"># exec /usr/bin/bash --login</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/bash-5.2.21<span class="token comment">#</span></code></pre>
<h3 id="8.36-libtool-2.4.7" tabindex="-1">8.36 Libtool-2.4.7</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf libtool-2.4.7.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd libtool-2.4.7</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment"># make -k check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment"># rm -fv /usr/lib/libltdl.a</span>
removed <span class="token string">'/usr/lib/libltdl.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libtool-2.4.7<span class="token comment">#</span></code></pre>
<h3 id="8.37-gdbm-1.23" tabindex="-1">8.37 GDBM-1.23</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gdbm-1.23.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gdbm-1.23</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gdbm-1.23<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-libgdbm-compat
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gdbm-1.23<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gdbm-1.23<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gdbm-1.23<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.38-gperf-3.1" tabindex="-1">8.38 Gperf-3.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gperf-3.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gperf-3.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gperf-3.1<span class="token comment"># ./configure --prefix=/usr --docdir=/usr/share/doc/gperf-3.1</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gperf-3.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gperf-3.1<span class="token comment"># make -j1 check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gperf-3.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.39-expat-2.6.0" tabindex="-1">8.39 Expat-2.6.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment"># ./configure --prefix=/usr    \</span>
<span class="token operator">></span>             --disable-static <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/expat-2.6.2

<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment"># install -v -m644 doc/*.{html,css} /usr/share/doc/expat-2.6.2</span>
<span class="token string">'doc/reference.html'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/expat-2.6.2/reference.html'</span>
<span class="token string">'doc/ok.min.css'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/expat-2.6.2/ok.min.css'</span>
<span class="token string">'doc/style.css'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/expat-2.6.2/style.css'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/expat-2.6.2<span class="token comment">#</span></code></pre>
<h3 id="8.40-inetutils-2.5" tabindex="-1">8.40 Inetutils-2.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf inetutils-2.5.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd inetutils-2.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment"># ./configure --prefix=/usr        \</span>
<span class="token operator">></span>             <span class="token parameter variable">--bindir</span><span class="token operator">=</span>/usr/bin    <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--localstatedir</span><span class="token operator">=</span>/var <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-logger     <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-whois      <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-rcp        <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-rexec      <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-rlogin     <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-rsh        <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-servers
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment"># mv -v /usr/{,s}bin/ifconfig</span>
renamed <span class="token string">'/usr/bin/ifconfig'</span> -<span class="token operator">></span> <span class="token string">'/usr/sbin/ifconfig'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/inetutils-2.5<span class="token comment">#</span></code></pre>
<h3 id="8.41-less-643" tabindex="-1">8.41 Less-643</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf less-643.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd less-643</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/less-643<span class="token comment"># ./configure --prefix=/usr --sysconfdir=/etc</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/less-643<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/less-643<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/less-643<span class="token comment"># make install</span>
./mkinstalldirs /usr/bin /usr/share/man/man1
/usr/bin/install <span class="token parameter variable">-c</span> <span class="token function">less</span> /usr/bin/less
/usr/bin/install <span class="token parameter variable">-c</span> lesskey /usr/bin/lesskey
/usr/bin/install <span class="token parameter variable">-c</span> lessecho /usr/bin/lessecho
/usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> ./less.nro /usr/share/man/man1/less.1
/usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> ./lesskey.nro /usr/share/man/man1/lesskey.1
/usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> ./lessecho.nro /usr/share/man/man1/lessecho.1
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/less-643<span class="token comment">#</span></code></pre>
<h3 id="8.42-perl-5.38.2" tabindex="-1">8.42 Perl-5.38.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf perl-5.38.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd perl-5.38.2.tar.xz</span>
bash: cd: perl-5.38.2.tar.xz: Not a directory
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd perl-5.38.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># export BUILD_ZLIB=False</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># export BUILD_BZIP2=0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># sh Configure -des                                         \</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dprefix</span><span class="token operator">=</span>/usr                                <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorprefix</span><span class="token operator">=</span>/usr                          <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dprivlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/core_perl      <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Darchlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/core_perl      <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dsitelib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/site_perl      <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dsitearch</span><span class="token operator">=</span>/usr/lib/perl5/5.38/site_perl     <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorlib</span><span class="token operator">=</span>/usr/lib/perl5/5.38/vendor_perl  <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dvendorarch</span><span class="token operator">=</span>/usr/lib/perl5/5.38/vendor_perl <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dman1dir</span><span class="token operator">=</span>/usr/share/man/man1                <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dman3dir</span><span class="token operator">=</span>/usr/share/man/man3                <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dpager</span><span class="token operator">=</span><span class="token string">"/usr/bin/less -isR"</span>                 <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Duseshrplib</span>                                 <span class="token punctuation">\</span>
<span class="token operator">></span>              <span class="token parameter variable">-Dusethreads</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># TEST_JOBS=$(nproc) make test_harness</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment"># unset BUILD_ZLIB BUILD_BZIP2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/perl-5.38.2<span class="token comment">#</span></code></pre>
<h3 id="8.43-xml%3A%3Aparse-2.47" tabindex="-1">8.43 XML::Parse-2.47</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf XML-Parser-2.47.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd XML-Parser-2.47</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/XML-Parser-2.47<span class="token comment"># perl Makefile.PL</span>
Checking <span class="token keyword">if</span> your kit is complete<span class="token punctuation">..</span>.
Looks good
Warning: prerequisite LWP::UserAgent <span class="token number">0</span> not found.
Writing MYMETA.yml and MYMETA.json
Generating a Unix-style Makefile
Writing Makefile <span class="token keyword">for</span> XML::Parser
Writing MYMETA.yml and MYMETA.json
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/XML-Parser-2.47<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/XML-Parser-2.47<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/XML-Parser-2.47<span class="token comment"># make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/XML-Parser-2.47<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.44-intltool-0.51.0" tabindex="-1">8.44 Intltool-0.51.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf intltool-0.51.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd intltool-0.51.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># sed -i 's:\\\${:\\\$\\{:' intltool-update.in</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment"># install -v -Dm644 doc/I18N-HOWTO /usr/share/doc/intltool-0.51.0/I18N-HOWTO</span>
install: creating directory <span class="token string">'/usr/share/doc/intltool-0.51.0'</span>
<span class="token string">'doc/I18N-HOWTO'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/intltool-0.51.0/I18N-HOWTO'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/intltool-0.51.0<span class="token comment">#</span></code></pre>
<h3 id="8.45-autoconf-2.72" tabindex="-1">8.45 Autoconf-2.72</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf autoconf-2.72.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd autoconf-2.72</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/autoconf-2.72<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/autoconf-2.72<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/autoconf-2.72<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/autoconf-2.72<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.46-automake-1.16.5" tabindex="-1">8.46 Automake-1.16.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf automake-1.16.5.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd automake-1.16.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/automake-1.16.5<span class="token comment"># ./configure --prefix=/usr --docdir=/usr/share/doc/automake-1.16.5</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/automake-1.16.5<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/automake-1.16.5<span class="token comment"># make -j$(($(nproc)>4?$(nproc):4)) check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/automake-1.16.5<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.47-openssl-3.2.1" tabindex="-1">8.47 OpenSSL-3.2.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf openssl-3.2.1.tar.gz</span>
cd<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd openssl-3.2.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># ./config --prefix=/usr         \</span>
<span class="token operator">></span>          <span class="token parameter variable">--openssldir</span><span class="token operator">=</span>/etc/ssl <span class="token punctuation">\</span>
<span class="token operator">></span>          <span class="token parameter variable">--libdir</span><span class="token operator">=</span>lib          <span class="token punctuation">\</span>
<span class="token operator">></span>          shared                <span class="token punctuation">\</span>
<span class="token operator">></span>          zlib-dynamic
Configuring OpenSSL version <span class="token number">3.2</span>.1 <span class="token keyword">for</span> target linux-x86_64
Using os-specific seed configuration
Created configdata.pm
Running configdata.pm
Created Makefile.in
Created Makefile
Created include/openssl/configuration.h

**********************************************************************
***                                                                ***
***   OpenSSL has been successfully configured                     ***
***                                                                ***
***   If you encounter a problem <span class="token keyword">while</span> building, please <span class="token function">open</span> an    ***
***   issue on GitHub <span class="token operator">&lt;</span>https://github.com/openssl/openssl/issues<span class="token operator">></span>  ***
***   and include the output from the following command:           ***
***                                                                ***
***       perl configdata.pm <span class="token parameter variable">--dump</span>                                ***
***                                                                ***
***   <span class="token punctuation">(</span>If you are new to OpenSSL, you might want to consult the    ***
***   <span class="token string">'Troubleshooting'</span> section <span class="token keyword">in</span> the INSTALL.md <span class="token function">file</span> first<span class="token punctuation">)</span>      ***
***                                                                ***
**********************************************************************
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># HARNESS_JOBS=$(nproc) make test</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># sed -i '/INSTALL_LIBS/s/libcrypto.a libssl.a//' Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># make MANSUFFIX=ssl install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># mv -v /usr/share/doc/openssl /usr/share/doc/openssl-3.2.1</span>
renamed <span class="token string">'/usr/share/doc/openssl'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/openssl-3.2.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment">#</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/openssl-3.2.1<span class="token comment"># cp -vfr doc/* /usr/share/doc/openssl-3.2.1</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.48-kmod-31" tabindex="-1">8.48 Kmod-31</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf kmod-31.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd kmod-31</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment"># ./configure --prefix=/usr          \</span>
<span class="token operator">></span>             <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc      <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-openssl         <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-xz              <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-zstd            <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-zlib
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment"># for target in depmod insmod modinfo modprobe rmmod; do</span>
<span class="token operator">></span>   <span class="token function">ln</span> <span class="token parameter variable">-sfv</span> <span class="token punctuation">..</span>/bin/kmod /usr/sbin/<span class="token variable">$target</span>
<span class="token operator">></span> <span class="token keyword">done</span>
<span class="token string">'/usr/sbin/depmod'</span> -<span class="token operator">></span> <span class="token string">'../bin/kmod'</span>
<span class="token string">'/usr/sbin/insmod'</span> -<span class="token operator">></span> <span class="token string">'../bin/kmod'</span>
<span class="token string">'/usr/sbin/modinfo'</span> -<span class="token operator">></span> <span class="token string">'../bin/kmod'</span>
<span class="token string">'/usr/sbin/modprobe'</span> -<span class="token operator">></span> <span class="token string">'../bin/kmod'</span>
<span class="token string">'/usr/sbin/rmmod'</span> -<span class="token operator">></span> <span class="token string">'../bin/kmod'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment"># ln -sfv kmod /usr/bin/lsmod</span>
<span class="token string">'/usr/bin/lsmod'</span> -<span class="token operator">></span> <span class="token string">'kmod'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kmod-31<span class="token comment">#</span></code></pre>
<h3 id="8.49-libelf-from-elfutils-0.190" tabindex="-1">8.49 Libelf from Elfutils-0.190</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf elfutils-0.190.tar.bz2</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd elfutils-0.190</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># ./configure --prefix=/usr                \</span>
<span class="token operator">></span>             --disable-debuginfod         <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-libdebuginfod<span class="token operator">=</span>dummy
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># make -C libelf install</span>
make: Entering directory <span class="token string">'/sources/elfutils-0.190/libelf'</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Entering directory <span class="token string">'/sources/elfutils-0.190/libelf'</span>
 /usr/bin/mkdir <span class="token parameter variable">-p</span> <span class="token string">'/usr/include'</span>
 /usr/bin/mkdir <span class="token parameter variable">-p</span> <span class="token string">'/usr/lib'</span>
 /usr/bin/mkdir <span class="token parameter variable">-p</span> <span class="token string">'/usr/include/elfutils'</span>
 /usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span>  libelf.a <span class="token string">'/usr/lib'</span>
 /usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> libelf.h gelf.h nlist.h <span class="token string">'/usr/include'</span>
 /usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> elf-knowledge.h <span class="token string">'/usr/include/elfutils'</span>
 <span class="token punctuation">(</span> <span class="token builtin class-name">cd</span> <span class="token string">'/usr/lib'</span> <span class="token operator">&amp;&amp;</span> ranlib libelf.a <span class="token punctuation">)</span>
make<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>: Leaving directory <span class="token string">'/sources/elfutils-0.190/libelf'</span>
/bin/sh /sources/elfutils-0.190/config/install-sh <span class="token parameter variable">-d</span> /usr/lib
/usr/bin/install <span class="token parameter variable">-c</span> libelf.so /usr/lib/libelf-0.190.so
<span class="token function">ln</span> <span class="token parameter variable">-fs</span> libelf-0.190.so /usr/lib/libelf.so.1
<span class="token function">ln</span> <span class="token parameter variable">-fs</span> libelf.so.1 /usr/lib/libelf.so
make: Leaving directory <span class="token string">'/sources/elfutils-0.190/libelf'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># install -vm644 config/libelf.pc /usr/lib/pkgconfig</span>
<span class="token string">'config/libelf.pc'</span> -<span class="token operator">></span> <span class="token string">'/usr/lib/pkgconfig/libelf.pc'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment"># rm /usr/lib/libelf.a</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/elfutils-0.190<span class="token comment">#</span></code></pre>
<h3 id="8.50-libffi-3.4.4" tabindex="-1">8.50 Libffi-3.4.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf libffi-3.4.4.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd libffi-3.4.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libffi-3.4.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libffi-3.4.4<span class="token comment"># ./configure --prefix=/usr          \</span>
<span class="token operator">></span>             --disable-static       <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-gcc-arch<span class="token operator">=</span>native
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libffi-3.4.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libffi-3.4.4<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libffi-3.4.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.51-python-3.12.2" tabindex="-1">8.51 Python-3.12.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf Python-3.12.2.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd Python-3.12.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># ./configure --prefix=/usr        \</span>
<span class="token operator">></span>             --enable-shared      <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-system-expat  <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-optimizations
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># cat > /etc/pip.conf &lt;&lt; EOF</span>
<span class="token operator">></span> <span class="token punctuation">[</span>global<span class="token punctuation">]</span>
<span class="token operator">></span> root-user-action <span class="token operator">=</span> ignore
<span class="token operator">></span> disable-pip-version-check <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># install -v -dm755 /usr/share/doc/python-3.12.2/html</span>
install: creating directory <span class="token string">'/usr/share/doc/python-3.12.2'</span>
install: creating directory <span class="token string">'/usr/share/doc/python-3.12.2/html'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># tar --no-same-owner \</span>
<span class="token operator">></span>     <span class="token parameter variable">-xvf</span> <span class="token punctuation">..</span>/python-3.12.2-docs-html.tar.bz2
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment"># cp -R --no-preserve=mode python-3.12.2-docs-html/* \</span>
<span class="token operator">></span>     /usr/share/doc/python-3.12.2/html
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Python-3.12.2<span class="token comment">#</span></code></pre>
<h3 id="8.52-flit-core-3.9.0" tabindex="-1">8.52 Flit-Core-3.9.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf flit_core-3.9.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd flit_core-3.9.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flit_core-3.9.0<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/flit_core-3.9.0
  Preparing metadata <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: flit_core
  Building wheel <span class="token keyword">for</span> flit_core <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> flit_core: <span class="token assign-left variable">filename</span><span class="token operator">=</span>flit_core-3.9.0-py3-none-any.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">63141</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>d61a541bb12e58406692ad78cb808a5fe5d746dac137e4619e4963489aef48a5
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-v5z3h4o7/wheels/b6/fc/d9/1867098c7dd8bc9463aed01828eb04127f3a0565dcd57be316
Successfully built flit_core
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flit_core-3.9.0<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flit_core-3.9.0<span class="token comment"># pip3 install --no-index --no-user --find-links dist flit_core</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/flit_core-3.9.0-py3-none-any.whl
Installing collected packages: flit_core
Successfully installed flit_core-3.9.0
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/flit_core-3.9.0<span class="token comment">#</span></code></pre>
<h3 id="8.53-wheel-0.42.0" tabindex="-1">8.53 Wheel-0.42.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf wheel-0.42.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd wheel-0.42.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/wheel-0.42.0<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/wheel-0.42.0
  Preparing metadata <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: wheel
  Building wheel <span class="token keyword">for</span> wheel <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> wheel: <span class="token assign-left variable">filename</span><span class="token operator">=</span>wheel-0.42.0-py3-none-any.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">65375</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>aa65537a94606a588446baf42051e993e220fc456d49d19752323cc2e7911cd7
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-mamfoq23/wheels/02/94/16/334df4c2d9032c6eb640d74b51dd8388488b81261b1399a4fd
Successfully built wheel
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/wheel-0.42.0<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/wheel-0.42.0<span class="token comment"># pip3 install --no-index --find-links=dist wheel</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/wheel-0.42.0-py3-none-any.whl
Installing collected packages: wheel
Successfully installed wheel-0.42.0
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/wheel-0.42.0<span class="token comment">#</span></code></pre>
<h3 id="8.54-setuptools-69.1.0" tabindex="-1">8.54 Setuptools-69.1.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf setuptools-69.1.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd setuptools-69.1.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/setuptools-69.1.0<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/setuptools-69.1.0
  Preparing metadata <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: setuptools
  Building wheel <span class="token keyword">for</span> setuptools <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> setuptools: <span class="token assign-left variable">filename</span><span class="token operator">=</span>setuptools-69.1.0-py3-none-any.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">819314</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>5913efbbf6a4913e866b12ed7e3c852dd28929042b8ca94a64a5161dff824e55
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-0w6ufu_p/wheels/9e/dc/53/648ca7a5e317475a9a283910378c5d5ab9a155688228c77eca
Successfully built setuptools
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/setuptools-69.1.0<span class="token comment"># pip3 install --no-index --find-links dist setuptools</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/setuptools-69.1.0-py3-none-any.whl
Installing collected packages: setuptools
Successfully installed setuptools-69.1.0
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/setuptools-69.1.0<span class="token comment">#</span></code></pre>
<h3 id="8.55-ninja-1.11.1" tabindex="-1">8.55 Ninja-1.11.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf ninja-1.11.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd nin</span>
bash: cd: nin: No such <span class="token function">file</span> or directory
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd ninja-1.11.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ninja-1.11.1<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ninja-1.11.1<span class="token comment"># export NINJAJOBS=4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ninja-1.11.1<span class="token comment"># sed -i '/int Guess/a \</span>
<span class="token operator">></span>   int   j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token operator">></span>   char* <span class="token function">jobs</span> <span class="token operator">=</span> getenv<span class="token punctuation">(</span> <span class="token string">"NINJAJOBS"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token operator">></span>   <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">jobs</span> <span class="token operator">!=</span> NULL <span class="token punctuation">)</span> j <span class="token operator">=</span> atoi<span class="token punctuation">(</span> <span class="token function">jobs</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token operator">></span>   <span class="token keyword">if</span> <span class="token punctuation">(</span> j <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token builtin class-name">return</span> j<span class="token punctuation">;</span><span class="token punctuation">\</span>
<span class="token operator">></span> <span class="token string">' src/ninja.cc
(lfs chroot) root:/sources/ninja-1.11.1# python3 configure.py --bootstrap
...
(lfs chroot) root:/sources/ninja-1.11.1# ./ninja ninja_test
[22/22] LINK ninja_test
(lfs chroot) root:/sources/ninja-1.11.1# ./ninja_test --gtest_filter=-SubprocessTest.SetWithLots
[384/384] ElideMiddle.ElideInTheMiddle
passed
(lfs chroot) root:/sources/ninja-1.11.1#
(lfs chroot) root:/sources/ninja-1.11.1# install -vm755 ninja /usr/bin/
'</span>ninja<span class="token string">' -> '</span>/usr/bin/ninja<span class="token string">'
(lfs chroot) root:/sources/ninja-1.11.1# install -vDm644 misc/bash-completion /usr/share/bash-completion/completions/ninja
'</span>misc/bash-completion<span class="token string">' -> '</span>/usr/share/bash-completion/completions/ninja<span class="token string">'
(lfs chroot) root:/sources/ninja-1.11.1# install -vDm644 misc/zsh-completion  /usr/share/zsh/site-functions/_ninja
install: creating directory '</span>/usr/share/zsh<span class="token string">'
install: creating directory '</span>/usr/share/zsh/site-functions<span class="token string">'
'</span>misc/zsh-completion<span class="token string">' -> '</span>/usr/share/zsh/site-functions/_ninja'
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/ninja-1.11.1<span class="token comment">#</span></code></pre>
<h3 id="8.56-meson-1.3.2" tabindex="-1">8.56 Meson-1.3.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf meson-1.3.2.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd meson-1.3.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/meson-1.3.2
  Preparing metadata <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: meson
  Building wheel <span class="token keyword">for</span> meson <span class="token punctuation">(</span>pyproject.toml<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> meson: <span class="token assign-left variable">filename</span><span class="token operator">=</span>meson-1.3.2-py3-none-any.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">977700</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>f749279c8b67d25f1376675152fc3383c5a0d945158fd5052061142174f59062
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-4eu1hnir/wheels/22/35/7b/685fa5e0df89cbe0b89b4075adf0b71c0255152a1000c1fa88
Successfully built meson
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment"># pip3 install --no-index --find-links dist meson</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/meson-1.3.2-py3-none-any.whl
Installing collected packages: meson
Successfully installed meson-1.3.2
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment"># install -vDm644 data/shell-completions/bash/meson /usr/share/bash-completion/completions/meson</span>
<span class="token string">'data/shell-completions/bash/meson'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/bash-completion/completions/meson'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment"># install -vDm644 data/shell-completions/zsh/_meson /usr/share/zsh/site-functions/_meson</span>
<span class="token string">'data/shell-completions/zsh/_meson'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/zsh/site-functions/_meson'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/meson-1.3.2<span class="token comment">#</span></code></pre>
<h3 id="8.57-coreutils-9.4" tabindex="-1">8.57 Coreutils-9.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf coreutils-9.4.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd coreutils-9.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># patch -Np1 -i ../coreutils-9.4-i18n-1.patch</span>
patching <span class="token function">file</span> bootstrap.conf
patching <span class="token function">file</span> configure.ac
patching <span class="token function">file</span> src/cut.c
patching <span class="token function">file</span> src/expand-common.c
patching <span class="token function">file</span> src/expand-common.h
patching <span class="token function">file</span> src/expand.c
patching <span class="token function">file</span> src/fold.c
patching <span class="token function">file</span> src/join.c
patching <span class="token function">file</span> src/local.mk
patching <span class="token function">file</span> src/pr.c
patching <span class="token function">file</span> src/sort.c
patching <span class="token function">file</span> src/unexpand.c
patching <span class="token function">file</span> src/uniq.c
patching <span class="token function">file</span> tests/Coreutils.pm
patching <span class="token function">file</span> tests/expand/mb.sh
patching <span class="token function">file</span> tests/i18n/sort.sh
patching <span class="token function">file</span> tests/local.mk
patching <span class="token function">file</span> tests/misc/expand.pl
patching <span class="token function">file</span> tests/misc/fold.pl
patching <span class="token function">file</span> tests/misc/join.pl
patching <span class="token function">file</span> tests/misc/unexpand.pl
patching <span class="token function">file</span> tests/pr/pr-tests.pl
patching <span class="token function">file</span> tests/sort/sort-mb-tests.sh
patching <span class="token function">file</span> tests/sort/sort-merge.pl
patching <span class="token function">file</span> tests/sort/sort.pl
patching <span class="token function">file</span> tests/unexpand/mb.sh
patching <span class="token function">file</span> tests/uniq/uniq.pl
patching <span class="token function">file</span> lib/linebuffer.h
patching <span class="token function">file</span> lib/mbfile.c
patching <span class="token function">file</span> lib/mbfile.h
patching <span class="token function">file</span> m4/mbfile.m4
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># sed -e '/n_out += n_hold/,+4 s|.*bufsize.*|//&amp;|' \</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> src/split.c
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># autoreconf -fiv</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># FORCE_UNSAFE_CONFIGURE=1 ./configure \</span>
<span class="token operator">></span>             <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr            <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-no-install-program<span class="token operator">=</span>kill,uptime
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># make NON_ROOT_USERNAME=tester check-root</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># groupadd -g 102 dummy -U tester</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># su tester -c "PATH=$PATH make RUN_EXPENSIVE_TESTS=yes check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># groupdel dummy</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># mv -v /usr/bin/chroot /usr/sbin</span>
renamed <span class="token string">'/usr/bin/chroot'</span> -<span class="token operator">></span> <span class="token string">'/usr/sbin/chroot'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># mv -v /usr/share/man/man1/chroot.1 /usr/share/man/man8/chroot.8</span>
renamed <span class="token string">'/usr/share/man/man1/chroot.1'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/man/man8/chroot.8'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment"># sed -i 's/"1"/"8"/' /usr/share/man/man8/chroot.8</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/coreutils-9.4<span class="token comment">#</span></code></pre>
<h3 id="8.58-check-0.15.2" tabindex="-1">8.58 Check-0.15.2</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf check-0.15.2.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd check-0.15.2</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/check-0.15.2<span class="token comment"># ./configure --prefix=/usr --disable-static</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/check-0.15.2<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/check-0.15.2<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/check-0.15.2<span class="token comment"># make docdir=/usr/share/doc/check-0.15.2 install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.59-diffutils-3.10" tabindex="-1">8.59 Diffutils-3.10</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf diffutils-3.10.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd diffutils-3.10</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/diffutils-3.10<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/diffutils-3.10<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/diffutils-3.10<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/diffutils-3.10<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/diffutils-3.10<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.60-gawk-5.3.0" tabindex="-1">8.60 Gawk-5.3.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf gawk-5.3.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gawk-5.3.0.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gawk-5.3.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># sed -i 's/extras//' Makefile.in</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># su tester -c "PATH=$PATH make check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># rm -f /usr/bin/gawk-5.3.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># ln -sv gawk.1 /usr/share/man/man1/awk.1</span>
<span class="token string">'/usr/share/man/man1/awk.1'</span> -<span class="token operator">></span> <span class="token string">'gawk.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># mkdir -pv                                   /usr/share/doc/gawk-5.3.0</span>
mkdir: created directory <span class="token string">'/usr/share/doc/gawk-5.3.0'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment"># cp    -v doc/{awkforai.txt,*.{eps,pdf,jpg}} /usr/share/doc/gawk-5.3.0</span>
<span class="token string">'doc/awkforai.txt'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/awkforai.txt'</span>
<span class="token string">'doc/gawk_api-figure1.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure1.eps'</span>
<span class="token string">'doc/gawk_api-figure2.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure2.eps'</span>
<span class="token string">'doc/gawk_api-figure3.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure3.eps'</span>
<span class="token string">'doc/gawk_array-elements.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_array-elements.eps'</span>
<span class="token string">'doc/gawk_general-program.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_general-program.eps'</span>
<span class="token string">'doc/gawk_process-flow.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_process-flow.eps'</span>
<span class="token string">'doc/gawk_statist.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_statist.eps'</span>
<span class="token string">'doc/lflashlight.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/lflashlight.eps'</span>
<span class="token string">'doc/rflashlight.eps'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/rflashlight.eps'</span>
<span class="token string">'doc/gawk_api-figure1.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure1.pdf'</span>
<span class="token string">'doc/gawk_api-figure2.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure2.pdf'</span>
<span class="token string">'doc/gawk_api-figure3.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_api-figure3.pdf'</span>
<span class="token string">'doc/gawk_array-elements.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_array-elements.pdf'</span>
<span class="token string">'doc/gawk_general-program.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_general-program.pdf'</span>
<span class="token string">'doc/gawk_process-flow.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_process-flow.pdf'</span>
<span class="token string">'doc/gawk_statist.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_statist.pdf'</span>
<span class="token string">'doc/lflashlight.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/lflashlight.pdf'</span>
<span class="token string">'doc/rflashlight.pdf'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/rflashlight.pdf'</span>
<span class="token string">'doc/gawk_statist.jpg'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/gawk-5.3.0/gawk_statist.jpg'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gawk-5.3.0<span class="token comment">#</span></code></pre>
<h3 id="8.61-findutils-4.9.0" tabindex="-1">8.61 Findutils-4.9.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf findutils-4.9.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf findutils-4.9.0.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd findutils-4.9.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/findutils-4.9.0<span class="token comment"># ./configure --prefix=/usr --localstatedir=/var/lib/locate</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/findutils-4.9.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/findutils-4.9.0<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/findutils-4.9.0<span class="token comment"># su tester -c "PATH=$PATH make check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/findutils-4.9.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.62-groff-1.23.0" tabindex="-1">8.62 Groff-1.23.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf groff-1.23.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd groff-1.23.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/groff-1.23.0<span class="token comment"># PAGE=A4 ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/groff-1.23.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/groff-1.23.0<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/groff-1.23.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.63-grub-2.12" tabindex="-1">8.63 Grub-2.12</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf grub-2.12.tar.xz</span>
<span class="token builtin class-name">cd</span> <span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd grub-2.12</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># unset {C,CPP,CXX,LD}FLAGS</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># echo depends bli part_gpt > grub-core/extra_deps.lst</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># ./configure --prefix=/usr          \</span>
<span class="token operator">></span>             <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc      <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-efiemu       <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-werror
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment"># mv -v /etc/bash_completion.d/grub /usr/share/bash-completion/completions</span>
copied <span class="token string">'/etc/bash_completion.d/grub'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/bash-completion/completions/grub'</span>
removed <span class="token string">'/etc/bash_completion.d/grub'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/grub-2.12<span class="token comment">#</span></code></pre>
<h3 id="8.64-gzip-1.13" tabindex="-1">8.64 Gzip-1.13</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf gzip-1.13</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf gzip-1.13.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd gzip-1.13</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gzip-1.13<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gzip-1.13<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gzip-1.13<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/gzip-1.13<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.65-iproute2-6.7.0" tabindex="-1">8.65 IPRoute2-6.7.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf iproute2-6.7.0.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd iproute2-6.7.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># sed -i /ARPD/d Makefile</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># rm -fv man/man8/arpd.8</span>
removed <span class="token string">'man/man8/arpd.8'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># make NETNS_RUN_DIR=/run/netns</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># make SBINDIR=/usr/sbin install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># mkdir -pv             /usr/share/doc/iproute2-6.7.0</span>
mkdir: created directory <span class="token string">'/usr/share/doc/iproute2-6.7.0'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment"># cp -v COPYING README* /usr/share/doc/iproute2-6.7.0</span>
<span class="token string">'COPYING'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/iproute2-6.7.0/COPYING'</span>
<span class="token string">'README'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/iproute2-6.7.0/README'</span>
<span class="token string">'README.devel'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/doc/iproute2-6.7.0/README.devel'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/iproute2-6.7.0<span class="token comment">#</span></code></pre>
<h3 id="8.66-kbd-2.6.4" tabindex="-1">8.66 Kbd-2.6.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf kbd-2.6.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf kbd-2.6.4.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd kbd-2.6.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># patch -Np1 -i ../kbd-2.6.4-backspace-1.patch</span>
patching <span class="token function">file</span> data/keymaps/i386/dvorak/dvorak-l.map
patching <span class="token function">file</span> data/keymaps/i386/dvorak/dvorak-r.map
patching <span class="token function">file</span> data/keymaps/i386/fgGIod/tr_f-latin5.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/lt.l4.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/lt.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/no-latin1.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ru1.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ru2.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ru-cp1251.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ru-ms.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ru_win.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/se-ir209.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/se-lat6.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/tr_q-latin5.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ua.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ua-utf.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ua-utf-ws.map
patching <span class="token function">file</span> data/keymaps/i386/qwerty/ua-ws.map
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># sed -i '/RESIZECONS_PROGS=/s/yes/no/' configure</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># sed -i 's/resizecons.8 //' docs/man/man8/Makefile.in</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># ./configure --prefix=/usr --disable-vlocky</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/kbd-2.6.4<span class="token comment"># cp -R -v docs/doc -T /usr/share/doc/kbd-2.6.4</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.67-libpipeline-1.5.7" tabindex="-1">8.67 Libpipeline-1.5.7</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># ls libpipeline-1.5.7.tar.gz</span>
libpipeline-1.5.7.tar.gz
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf libpipeline-1.5.7.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd libpipeline-1.5.7</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libpipeline-1.5.7<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libpipeline-1.5.7<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libpipeline-1.5.7<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/libpipeline-1.5.7<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.68-make-4.4.1" tabindex="-1">8.68 Make-4.4.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># ls make-4.4.1</span>
ABOUT-NLS  Makefile      README.DOS      SCOPTIONS     build_w32.bat  doc           po
AUTHORS    Makefile.am   README.OS2      aclocal.m4    builddos.bat   lib           src
Basic.mk   Makefile.in   README.VMS      build-aux     config.log     m4            tests
COPYING    NEWS          README.W32      build.cfg     config.status  <span class="token function">make</span>          vms_export_symbol_test.com
ChangeLog  README        README.customs  build.cfg.in  configure      makefile.com
INSTALL    README.Amiga  README.zOS      build.sh      configure.ac   mk
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf make-4.4.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf make-4.4.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd make-4.4.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment"># su tester -c "PATH=$PATH make check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/make-4.4.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.69-path-2.7.6" tabindex="-1">8.69 Path-2.7.6</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># ls patch-2.7.6</span>
AUTHORS    ChangeLog-2011  Makefile     NEWS    aclocal.m4  cfg.mk      config.log     configure.ac  maint.mk   src
COPYING    GNUmakefile     Makefile.am  README  bootstrap   config.h    config.status  lib           patch.man  stamp-h1
ChangeLog  INSTALL         Makefile.in  TODO    build-aux   config.hin  configure      m4            pc         tests
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf patch-2.7.6</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf patch-2.7.6.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd patch-2.7.6</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/patch-2.7.6<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/patch-2.7.6<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/patch-2.7.6<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/patch-2.7.6<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.70-tar-1.35" tabindex="-1">8.70 Tar-1.35</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf tar-1.35</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf tar-1.35.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd tar-1.35</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment"># FORCE_UNSAFE_CONFIGURE=1  \</span>
<span class="token operator">></span> ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment"># make install</span>
<span class="token punctuation">..</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment"># make -C doc install-html docdir=/usr/share/doc/tar-1.35</span>
make: Entering directory <span class="token string">'/sources/tar-1.35/doc'</span>
  MAKEINFO tar.html
 /usr/bin/mkdir <span class="token parameter variable">-p</span> <span class="token string">'/usr/share/doc/tar-1.35'</span>
 /usr/bin/mkdir <span class="token parameter variable">-p</span> <span class="token string">'/usr/share/doc/tar-1.35/tar.html'</span>
 /usr/bin/install <span class="token parameter variable">-c</span> <span class="token parameter variable">-m</span> <span class="token number">644</span> <span class="token string">'tar.html'</span>/* <span class="token string">'/usr/share/doc/tar-1.35/tar.html'</span>
make: Leaving directory <span class="token string">'/sources/tar-1.35/doc'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/tar-1.35<span class="token comment">#</span></code></pre>
<h3 id="8.71-texinfo-7.1" tabindex="-1">8.71 Texinfo-7.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf texinfo-7.1</span>
r<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf texinfo-7.1.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd texinfo-7.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/texinfo-7.1<span class="token comment"># make TEXMF=/usr/share/texmf install-tex</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.72-vim-9.1.0041" tabindex="-1">8.72 Vim-9.1.0041</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar -xf vim-9.1.0041.tar.gz</span>
cd<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd vim-9.1.0041</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># echo '#define SYS_VIMRC_FILE "/etc/vimrc"' >> src/feature.h</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># ./configure --prefix=/usr</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># su tester -c "TERM=xterm-256color LANG=en_US.UTF-8 make -j1 test" \</span>
<span class="token operator">></span>    <span class="token operator">&amp;></span> vim-test.log
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># less vim-test.log</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># ln -sv vim /usr/bin/vi</span>
<span class="token string">'/usr/bin/vi'</span> -<span class="token operator">></span> <span class="token string">'vim'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># for L in  /usr/share/man/{,*/}man1/vim.1; do</span>
<span class="token operator">></span>     <span class="token function">ln</span> <span class="token parameter variable">-sv</span> vim.1 <span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $L<span class="token variable">)</span></span>/vi.1
<span class="token operator">></span> <span class="token keyword">done</span>
<span class="token string">'/usr/share/man/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/da.ISO8859-1/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/da.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/da/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/de.ISO8859-1/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/de.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/de/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/fr.ISO8859-1/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/fr.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/fr/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/it.ISO8859-1/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/it.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/it/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/ja/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/pl.ISO8859-2/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/pl.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/pl/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/ru.KOI8-R/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/ru.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/tr.ISO8859-9/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/tr.UTF-8/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token string">'/usr/share/man/tr/man1/vi.1'</span> -<span class="token operator">></span> <span class="token string">'vim.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># ln -sv ../vim/vim91/doc /usr/share/doc/vim-9.1.0041</span>
<span class="token string">'/usr/share/doc/vim-9.1.0041'</span> -<span class="token operator">></span> <span class="token string">'../vim/vim91/doc'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment"># cat > /etc/vimrc &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token string">" Begin /etc/vimrc
> "</span> Ensure defaults are <span class="token builtin class-name">set</span> before customizing settings, not after
<span class="token operator">></span> <span class="token builtin class-name">source</span> <span class="token variable">$VIMRUNTIME</span>/defaults.vim
<span class="token operator">></span> <span class="token builtin class-name">let</span> <span class="token assign-left variable">skip_defaults_vim</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> nocompatible
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">backspace</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">mouse</span><span class="token operator">=</span>
<span class="token operator">></span> syntax on
<span class="token operator">></span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>term <span class="token operator">==</span> <span class="token string">"xterm"</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>term <span class="token operator">==</span> <span class="token string">"putty"</span><span class="token punctuation">)</span>
<span class="token operator">></span>   <span class="token builtin class-name">set</span> <span class="token assign-left variable">background</span><span class="token operator">=</span>dark
<span class="token operator">></span> endif
<span class="token operator">></span> " End /etc/vimrc
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/vim-9.1.0041<span class="token comment">#</span></code></pre>
<h3 id="8.73-markupsafe-2.1.5" tabindex="-1">8.73 MarkupSafe-2.1.5</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf MarkupSafe-2.1.5.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd MarkupSafe-2.1.5</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/MarkupSafe-2.1.5<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/MarkupSafe-2.1.5
  Preparing metadata <span class="token punctuation">(</span>setup.py<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: MarkupSafe
  Building wheel <span class="token keyword">for</span> MarkupSafe <span class="token punctuation">(</span>setup.py<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> MarkupSafe: <span class="token assign-left variable">filename</span><span class="token operator">=</span>MarkupSafe-2.1.5-cp312-cp312-linux_x86_64.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">28207</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>1fca476f7d1b074ba48fecfd0a7383f2c9c09715cde18e835751db805bcc90ca
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-j678i7qr/wheels/9c/21/74/f259dcee52a6b4bb13a12df2edc72ab5d9a9bb46ad350a1b4e
Successfully built MarkupSafe
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/MarkupSafe-2.1.5<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/MarkupSafe-2.1.5<span class="token comment"># pip3 install --no-index --no-user --find-links dist Markupsafe</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/MarkupSafe-2.1.5-cp312-cp312-linux_x86_64.whl
Installing collected packages: Markupsafe
Successfully installed Markupsafe-2.1.5
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/MarkupSafe-2.1.5<span class="token comment">#</span></code></pre>
<h3 id="8.74-jinja2-3.1.3" tabindex="-1">8.74 Jinja2-3.1.3</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf Jinja2-3.1.3.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd Jinja2-3.1.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Jinja2-3.1.3<span class="token comment"># pip3 wheel -w dist --no-cache-dir --no-build-isolation --no-deps $PWD</span>
Processing /sources/Jinja2-3.1.3
  Preparing metadata <span class="token punctuation">(</span>setup.py<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Building wheels <span class="token keyword">for</span> collected packages: Jinja2
  Building wheel <span class="token keyword">for</span> Jinja2 <span class="token punctuation">(</span>setup.py<span class="token punctuation">)</span> <span class="token punctuation">..</span>. <span class="token keyword">done</span>
  Created wheel <span class="token keyword">for</span> Jinja2: <span class="token assign-left variable">filename</span><span class="token operator">=</span>Jinja2-3.1.3-py3-none-any.whl <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">133236</span> <span class="token assign-left variable">sha256</span><span class="token operator">=</span>4b1771fc170c71ee8e7f703d300b378363fdefad65771e0565db71eb8aa6d159
  Stored <span class="token keyword">in</span> directory: /tmp/pip-ephem-wheel-cache-urk2hkhk/wheels/fb/ef/cf/1f58c0e9cb1941e91e76da88c981090a45a8e6928aaaad649a
Successfully built Jinja2
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Jinja2-3.1.3<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Jinja2-3.1.3<span class="token comment"># pip3 install --no-index --no-user --find-links dist Jinja2</span>
Looking <span class="token keyword">in</span> links: dist
Processing ./dist/Jinja2-3.1.3-py3-none-any.whl
Requirement already satisfied: MarkupSafe<span class="token operator">>=</span><span class="token number">2.0</span> <span class="token keyword">in</span> /usr/lib/python3.12/site-packages <span class="token punctuation">(</span>from Jinja2<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">2.1</span>.5<span class="token punctuation">)</span>
Installing collected packages: Jinja2
Successfully installed Jinja2-3.1.3
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/Jinja2-3.1.3<span class="token comment">#</span></code></pre>
<h3 id="8.75-udev-from-systemd-255" tabindex="-1">8.75 Udev from Systemd-255</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf systemd-255.tar.gz</span>
c<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd systemd-255</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255<span class="token comment"># sed -i -e 's/GROUP="render"/GROUP="video"/' \</span>
<span class="token operator">></span>        <span class="token parameter variable">-e</span> <span class="token string">'s/GROUP="sgx", //'</span> rules.d/50-udev-default.rules.in
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255<span class="token comment"># sed '/NETWORK_DIRS/s/systemd/udev/' -i src/basic/path-lookup.h</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255<span class="token comment"># mkdir -p build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># ls</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># meson setup \</span>
<span class="token operator">></span>       <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr                 <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">--buildtype</span><span class="token operator">=</span>release           <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">-Dmode</span><span class="token operator">=</span>release                <span class="token punctuation">\</span>
<span class="token operator">></span>       -Ddev-kvm-mode<span class="token operator">=</span>0660           <span class="token punctuation">\</span>
<span class="token operator">></span>       -Dlink-udev-shared<span class="token operator">=</span>false      <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">-Dlogind</span><span class="token operator">=</span>false                <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token parameter variable">-Dvconsole</span><span class="token operator">=</span>false              <span class="token punctuation">\</span>
<span class="token operator">></span>       <span class="token punctuation">..</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># export udev_helpers=$(grep "'name' :" ../src/udev/meson.build | \</span>
<span class="token operator">></span>                       <span class="token function">awk</span> <span class="token string">'{print $3}'</span> <span class="token operator">|</span> <span class="token function">tr</span> <span class="token parameter variable">-d</span> <span class="token string">",'"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token string">'udevadm'</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># echo $udev_helpers</span>
ata_id cdrom_id dmi_memory_id fido_id iocost mtd_probe scsi_id v4l_id
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># ninja udevadm systemd-hwdb                                           \</span>
<span class="token operator">></span>       <span class="token variable"><span class="token variable">$(</span>ninja <span class="token parameter variable">-n</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-Eo</span> '<span class="token punctuation">(</span>src/<span class="token punctuation">(</span>lib<span class="token punctuation">)</span>?udev<span class="token operator">|</span>rules.d<span class="token operator">|</span>hwdb.d<span class="token variable">)</span></span>/<span class="token punctuation">[</span>^ <span class="token punctuation">]</span>*<span class="token string">') \
>       $(realpath libudev.so --relative-to .)                         \
>       $udev_helpers
...
(lfs chroot) root:/sources/systemd-255/build# install -vm755 -d {/usr/lib,/etc}/udev/{hwdb.d,rules.d,network}
install: creating directory '</span>/usr/lib/udev<span class="token string">'
install: creating directory '</span>/usr/lib/udev/hwdb.d<span class="token string">'
install: creating directory '</span>/usr/lib/udev/rules.d<span class="token string">'
install: creating directory '</span>/usr/lib/udev/network<span class="token string">'
install: creating directory '</span>/etc/udev<span class="token string">'
install: creating directory '</span>/etc/udev/hwdb.d<span class="token string">'
install: creating directory '</span>/etc/udev/rules.d<span class="token string">'
install: creating directory '</span>/etc/udev/network<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm755 -d /usr/{lib,share}/pkgconfig
install: creating directory '</span>/usr/share/pkgconfig<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm755 udevadm                             /usr/bin/
'</span>udevadm<span class="token string">' -> '</span>/usr/bin/udevadm<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm755 systemd-hwdb                        /usr/bin/udev-hwdb
'</span>systemd-hwdb<span class="token string">' -> '</span>/usr/bin/udev-hwdb<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# ln      -svfn  ../bin/udevadm                      /usr/sbin/udevd
'</span>/usr/sbin/udevd<span class="token string">' -> '</span><span class="token punctuation">..</span>/bin/udevadm<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build#
(lfs chroot) root:/sources/systemd-255/build# install -vm644 ../src/libudev/libudev.h            /usr/include/
'</span><span class="token punctuation">..</span>/src/libudev/libudev.h<span class="token string">' -> '</span>/usr/include/libudev.h<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 src/libudev/*.pc                    /usr/lib/pkgconfig/
'</span>src/libudev/libudev.pc<span class="token string">' -> '</span>/usr/lib/pkgconfig/libudev.pc<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 src/udev/*.pc                       /usr/share/pkgconfig/
'</span>src/udev/udev.pc<span class="token string">' -> '</span>/usr/share/pkgconfig/udev.pc<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 ../src/udev/udev.conf               /etc/udev/
'</span><span class="token punctuation">..</span>/src/udev/udev.conf<span class="token string">' -> '</span>/etc/udev/udev.conf<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 rules.d/* ../rules.d/README         /usr/lib/udev/rules.d/
'</span>rules.d/50-udev-default.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/50-udev-default.rules<span class="token string">'
'</span>rules.d/60-persistent-storage.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-storage.rules<span class="token string">'
'</span>rules.d/64-btrfs.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/64-btrfs.rules<span class="token string">'
'</span>rules.d/99-systemd.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/99-systemd.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/README<span class="token string">' -> '</span>/usr/lib/udev/rules.d/README<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 $(find ../rules.d/*.rules \
>                       -not -name '</span>*power-switch*<span class="token string">') /usr/lib/udev/rules.d/
'</span><span class="token punctuation">..</span>/rules.d/60-autosuspend.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-autosuspend.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-block.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-block.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-cdrom_id.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-cdrom_id.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-dmi-id.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-dmi-id.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-drm.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-drm.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-evdev.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-evdev.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-fido-id.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-fido-id.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-infiniband.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-infiniband.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-input-id.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-input-id.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-persistent-alsa.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-alsa.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-persistent-input.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-input.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-persistent-storage-mtd.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-storage-mtd.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-persistent-storage-tape.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-storage-tape.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-persistent-v4l.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-persistent-v4l.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-sensor.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-sensor.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/60-serial.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/60-serial.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/70-camera.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/70-camera.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/70-joystick.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/70-joystick.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/70-memory.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/70-memory.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/70-mouse.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/70-mouse.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/70-touchpad.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/70-touchpad.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/75-net-description.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/75-net-description.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/75-probe_mtd.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/75-probe_mtd.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/78-sound-card.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/78-sound-card.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/80-drivers.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/80-drivers.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/80-net-setup-link.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/80-net-setup-link.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/81-net-dhcp.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/81-net-dhcp.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/82-net-auto-link-local.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/82-net-auto-link-local.rules<span class="token string">'
'</span><span class="token punctuation">..</span>/rules.d/90-iocost.rules<span class="token string">' -> '</span>/usr/lib/udev/rules.d/90-iocost.rules<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 hwdb.d/*  ../hwdb.d/{*.hwdb,README} /usr/lib/udev/hwdb.d/
'</span>hwdb.d/60-autosuspend-chromiumos.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-autosuspend-chromiumos.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-OUI.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-OUI.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-acpi-vendor.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-acpi-vendor.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-bluetooth-vendor-product.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-bluetooth-vendor-product.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-dmi-id.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-dmi-id.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-net-ifname.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-net-ifname.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-pci-classes.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-pci-classes.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-pci-vendor-model.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-pci-vendor-model.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-sdio-classes.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-sdio-classes.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-sdio-vendor-model.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-sdio-vendor-model.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-usb-classes.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-usb-classes.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-usb-vendor-model.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-usb-vendor-model.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/20-vmbus-class.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/20-vmbus-class.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-autosuspend-fingerprint-reader.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-autosuspend-fingerprint-reader.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-autosuspend.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-autosuspend.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-evdev.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-evdev.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-input-id.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-input-id.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-keyboard.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-keyboard.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-seat.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-seat.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/60-sensor.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/60-sensor.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-analyzers.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-analyzers.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-av-production.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-av-production.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-cameras.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-cameras.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-joystick.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-joystick.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-mouse.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-mouse.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-pda.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-pda.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-pointingstick.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-pointingstick.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-sound-card.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-sound-card.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/70-touchpad.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/70-touchpad.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/80-ieee1394-unit-function.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/80-ieee1394-unit-function.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/82-net-auto-link-local.hwdb<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/82-net-auto-link-local.hwdb<span class="token string">'
'</span><span class="token punctuation">..</span>/hwdb.d/README<span class="token string">' -> '</span>/usr/lib/udev/hwdb.d/README<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm755 $udev_helpers                       /usr/lib/udev
'</span>ata_id<span class="token string">' -> '</span>/usr/lib/udev/ata_id<span class="token string">'
'</span>cdrom_id<span class="token string">' -> '</span>/usr/lib/udev/cdrom_id<span class="token string">'
'</span>dmi_memory_id<span class="token string">' -> '</span>/usr/lib/udev/dmi_memory_id<span class="token string">'
'</span>fido_id<span class="token string">' -> '</span>/usr/lib/udev/fido_id<span class="token string">'
'</span>iocost<span class="token string">' -> '</span>/usr/lib/udev/iocost<span class="token string">'
'</span>mtd_probe<span class="token string">' -> '</span>/usr/lib/udev/mtd_probe<span class="token string">'
'</span>scsi_id<span class="token string">' -> '</span>/usr/lib/udev/scsi_id<span class="token string">'
'</span>v4l_id<span class="token string">' -> '</span>/usr/lib/udev/v4l_id<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build# install -vm644 ../network/99-default.link          /usr/lib/udev/network
'</span><span class="token punctuation">..</span>/network/99-default.link<span class="token string">' -> '</span>/usr/lib/udev/network/99-default.link<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build#
(lfs chroot) root:/sources/systemd-255/build# tar -xvf ../../udev-lfs-20230818.tar.xz
udev-lfs-20230818/
udev-lfs-20230818/init-net-rules.sh
udev-lfs-20230818/rule_generator.functions
udev-lfs-20230818/Makefile.lfs
udev-lfs-20230818/write_cd_rules
udev-lfs-20230818/55-lfs.rules
udev-lfs-20230818/README
udev-lfs-20230818/contrib/
udev-lfs-20230818/contrib/debian/
udev-lfs-20230818/contrib/debian/write_cd_aliases
udev-lfs-20230818/contrib/debian/81-cdrom.rules
udev-lfs-20230818/contrib/debian/83-cdrom-symlinks.rules
udev-lfs-20230818/55-lfs.txt
udev-lfs-20230818/ChangeLog
udev-lfs-20230818/write_net_rules
(lfs chroot) root:/sources/systemd-255/build# make -f udev-lfs-20230818/Makefile.lfs install
mkdir: created directory '</span>/usr/share/doc/udev-20230818<span class="token string">'
mkdir: created directory '</span>/usr/share/doc/udev-20230818/lfs<span class="token string">'
'</span>udev-lfs-20230818/55-lfs.rules<span class="token string">' -> '</span>/etc/udev/rules.d/55-lfs.rules<span class="token string">'
'</span>udev-lfs-20230818/init-net-rules.sh<span class="token string">' -> '</span>/usr/lib/udev/init-net-rules.sh<span class="token string">'
'</span>udev-lfs-20230818/write_net_rules<span class="token string">' -> '</span>/usr/lib/udev/write_net_rules<span class="token string">'
'</span>udev-lfs-20230818/rule_generator.functions<span class="token string">' -> '</span>/usr/lib/udev/rule_generator.functions<span class="token string">'
'</span>udev-lfs-20230818/README<span class="token string">' -> '</span>/usr/share/doc/udev-20230818/lfs/README<span class="token string">'
'</span>udev-lfs-20230818/55-lfs.txt<span class="token string">' -> '</span>/usr/share/doc/udev-20230818/lfs/55-lfs.txt<span class="token string">'
(lfs chroot) root:/sources/systemd-255/build#
(lfs chroot) root:/sources/systemd-255/build# tar -xf ../../systemd-man-pages-255.tar.xz                            \
>     --no-same-owner --strip-components=1                              \
>     -C /usr/share/man --wildcards '</span>*/udev*<span class="token string">' '</span>*/libudev*<span class="token string">'              \
>                                   '</span>*/systemd.link.5<span class="token string">'                  \
>                                   '</span>*/systemd-<span class="token string">'{hwdb,udevd.service}.8
(lfs chroot) root:/sources/systemd-255/build# sed '</span>s<span class="token operator">|</span>systemd/network<span class="token operator">|</span>udev/network<span class="token operator">|</span><span class="token string">'                                 \
>     /usr/share/man/man5/systemd.link.5                                \
>   > /usr/share/man/man5/udev.link.5
(lfs chroot) root:/sources/systemd-255/build# sed '</span>s/systemd<span class="token punctuation">\</span><span class="token punctuation">(</span><span class="token punctuation">\</span><span class="token punctuation">\</span><span class="token punctuation">\</span>?-<span class="token punctuation">\</span><span class="token punctuation">)</span>/udev<span class="token punctuation">\</span><span class="token number">1</span>/<span class="token string">' /usr/share/man/man8/systemd-hwdb.8   \
>                                > /usr/share/man/man8/udev-hwdb.8
(lfs chroot) root:/sources/systemd-255/build# sed '</span>s<span class="token operator">|</span>lib.*udevd<span class="token operator">|</span>sbin/udevd<span class="token operator">|</span>'                                        <span class="token punctuation">\</span>
<span class="token operator">></span>     /usr/share/man/man8/systemd-udevd.service.8                       <span class="token punctuation">\</span>
<span class="token operator">></span>   <span class="token operator">></span> /usr/share/man/man8/udevd.8
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># rm /usr/share/man/man*/systemd*</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># unset udev_helpers</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment">#</span></code></pre>
<h4 id="8.75.2-configuring-udev" tabindex="-1">8.75.2 Configuring Udev</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment"># udev-hwdb update</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/systemd-255/build<span class="token comment">#</span></code></pre>
<h3 id="8.76-man-db-2.12.0" tabindex="-1">8.76 Man-DB-2.12.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf man-db-2.12.0.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd man-db-2.12.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/man-db-2.12.0<span class="token comment"># ./configure --prefix=/usr                         \</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/man-db-2.12.0 <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc                     <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-setuid                      <span class="token punctuation">\</span>
<span class="token operator">></span>             --enable-cache-owner<span class="token operator">=</span>bin              <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-browser<span class="token operator">=</span>/usr/bin/lynx          <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-vgrind<span class="token operator">=</span>/usr/bin/vgrind         <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-grap<span class="token operator">=</span>/usr/bin/grap             <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-systemdtmpfilesdir<span class="token operator">=</span>            <span class="token punctuation">\</span>
<span class="token operator">></span>             --with-systemdsystemunitdir<span class="token operator">=</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/man-db-2.12.0<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/man-db-2.12.0<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.77-procps-ng-4.0.4" tabindex="-1">8.77 Procps-ng-4.0.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf procps-ng-4.0.4.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd procps-ng-4.0.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/procps-ng-4.0.4<span class="token comment"># ./configure --prefix=/usr                           \</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/procps-ng-4.0.4 <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static                        <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-kill
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/procps-ng-4.0.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/procps-ng-4.0.4<span class="token comment"># make -k check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/procps-ng-4.0.4<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.78-util-linux-2.39.3" tabindex="-1">8.78 Util-linux-2.39.3</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf util-linux-2.39.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf util-linux-2.39.3.tar.xz</span>
c<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd util-linux-2.39.3</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># sed -i '/test_mkfds/s/^/#/' tests/helpers/Makemodule.am</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># ./configure --bindir=/usr/bin    \</span>
<span class="token operator">></span>             <span class="token parameter variable">--libdir</span><span class="token operator">=</span>/usr/lib    <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--runstatedir</span><span class="token operator">=</span>/run   <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--sbindir</span><span class="token operator">=</span>/usr/sbin  <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-chfn-chsh  <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-login      <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-nologin    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-su         <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-setpriv    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-runuser    <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-pylibmount <span class="token punctuation">\</span>
<span class="token operator">></span>             --disable-static     <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-python     <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-systemd    <span class="token punctuation">\</span>
<span class="token operator">></span>             --without-systemdsystemunitdir        <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token assign-left variable">ADJTIME_PATH</span><span class="token operator">=</span>/var/lib/hwclock/adjtime <span class="token punctuation">\</span>
<span class="token operator">></span>             <span class="token parameter variable">--docdir</span><span class="token operator">=</span>/usr/share/doc/util-linux-2.39.3
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># chown -R tester .</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># su tester -c "make -k check"</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/util-linux-2.39.3<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.79-e2fsprogs-1.47.0" tabindex="-1">8.79 E2fsprogs-1.47.0</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf e2fsprogs-1.47.0.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd e2fsprogs-1.47.0</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0<span class="token comment"># mkdir -v build</span>
mkdir: created directory <span class="token string">'build'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0<span class="token comment"># cd       build</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># ../configure --prefix=/usr           \</span>
<span class="token operator">></span>              <span class="token parameter variable">--sysconfdir</span><span class="token operator">=</span>/etc       <span class="token punctuation">\</span>
<span class="token operator">></span>              --enable-elf-shlibs     <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-libblkid      <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-libuuid       <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-uuidd         <span class="token punctuation">\</span>
<span class="token operator">></span>              --disable-fsck
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># make check</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># rm -fv /usr/lib/{libcom_err,libe2p,libext2fs,libss}.a</span>
removed <span class="token string">'/usr/lib/libcom_err.a'</span>
removed <span class="token string">'/usr/lib/libe2p.a'</span>
removed <span class="token string">'/usr/lib/libext2fs.a'</span>
removed <span class="token string">'/usr/lib/libss.a'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># gunzip -v /usr/share/info/libext2fs.info.gz</span>
/usr/share/info/libext2fs.info.gz:       <span class="token number">79.8</span>% -- replaced with /usr/share/info/libext2fs.info
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># install-info --dir-file=/usr/share/info/dir /usr/share/info/libext2fs.info</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># makeinfo -o      doc/com_err.info ../lib/et/com_err.texinfo</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># install -v -m644 doc/com_err.info /usr/share/info</span>
<span class="token string">'doc/com_err.info'</span> -<span class="token operator">></span> <span class="token string">'/usr/share/info/com_err.info'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># install-info --dir-file=/usr/share/info/dir /usr/share/info/com_err.info</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment">#</span></code></pre>
<h4 id="8.79.2-configuring-e2fsprogs" tabindex="-1">8.79.2 Configuring E2fsprogs</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment"># sed 's/metadata_csum_seed,//' -i /etc/mke2fs.conf</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/e2fsprogs-1.47.0/build<span class="token comment">#</span></code></pre>
<h3 id="8.80-sysklogd-1.5.1" tabindex="-1">8.80 Sysklogd-1.5.1</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf sysklogd-1.5.1.tar.gz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd sysklogd-1.5.1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment"># sed -i '/Error loading kernel symbols/{n;n;d}' ksym_mod.c</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment"># sed -i 's/union wait/int/' syslogd.c</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment"># make BINDIR=/sbin install</span>
/usr/bin/install <span class="token parameter variable">-o</span> root <span class="token parameter variable">-g</span> root <span class="token parameter variable">-m</span> <span class="token number">644</span> sysklogd.8 /usr/share/man/man8/sysklogd.8
/usr/bin/install <span class="token parameter variable">-m</span> <span class="token number">500</span> <span class="token parameter variable">-s</span> syslogd /sbin/syslogd
/usr/bin/install <span class="token parameter variable">-o</span> root <span class="token parameter variable">-g</span> root <span class="token parameter variable">-m</span> <span class="token number">644</span> syslogd.8 /usr/share/man/man8/syslogd.8
/usr/bin/install <span class="token parameter variable">-o</span> root <span class="token parameter variable">-g</span> root <span class="token parameter variable">-m</span> <span class="token number">644</span> syslog.conf.5 /usr/share/man/man5/syslog.conf.5
/usr/bin/install <span class="token parameter variable">-o</span> root <span class="token parameter variable">-g</span> root <span class="token parameter variable">-m</span> <span class="token number">644</span> klogd.8 /usr/share/man/man8/klogd.8
/usr/bin/install <span class="token parameter variable">-m</span> <span class="token number">500</span> <span class="token parameter variable">-s</span> klogd /sbin/klogd
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment"># cat > /etc/syslog.conf &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/syslog.conf</span>
<span class="token operator">></span> auth,authpriv.* -/var/log/auth.log
<span class="token operator">></span> *.*<span class="token punctuation">;</span>auth,authpriv.none -/var/log/sys.log
<span class="token operator">></span> daemon.* -/var/log/daemon.log
<span class="token operator">></span> kern.* -/var/log/kern.log
<span class="token operator">></span> mail.* -/var/log/mail.log
<span class="token operator">></span> user.* -/var/log/user.log
<span class="token operator">></span> *.emerg *
<span class="token operator">></span> <span class="token comment"># End /etc/syslog.conf</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysklogd-1.5.1<span class="token comment">#</span></code></pre>
<h3 id="8.81-sysvinit-3.08" tabindex="-1">8.81 Sysvinit-3.08</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf sysvinit-3.08.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd sysvinit-3.08</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># patch -Np1 -i ../sysvinit-3.08-consolidated-1.patch</span>
patching <span class="token function">file</span> src/Makefile
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="8.84-cleaning-up" tabindex="-1">8.84 Cleaning up</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># rm -rf /tmp/*</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># find /usr/lib /usr/libexec -name \*.la -delete</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment"># userdel -r tester</span>
userdel: tester mail spool <span class="token punctuation">(</span>/var/mail/tester<span class="token punctuation">)</span> not found
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/sysvinit-3.08<span class="token comment">#</span></code></pre>
<h2 id="9-system-configuration" tabindex="-1">9 System Configuration</h2>
<h3 id="9.2-lfs-bootscripts-20230728" tabindex="-1">9.2 LFS-Bootscripts-20230728</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf lfs-bootscripts-20230728.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd lfs-bootscripts-20230728</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/lfs-bootscripts-20230728<span class="token comment"># make install</span>
<span class="token punctuation">..</span>.</code></pre>
<h3 id="9.4-managing-devices" tabindex="-1">9.4 Managing Devices</h3>
<h5 id="9.4.1.2-creating-custom-udev-rules" tabindex="-1">9.4.1.2 Creating Custom Udev Rules</h5>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># bash /usr/lib/udev/init-net-rules.sh</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># ls /etc/udev/rules.d/70-persistent-net.rules</span>
/etc/udev/rules.d/70-persistent-net.rules
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># less /etc/udev/rules.d/70-persistent-net.rules</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># cat /etc/udev/rules.d/70-persistent-net.rules</span>
<span class="token comment"># This file was automatically generated by the /lib/udev/write_net_rules</span>
<span class="token comment"># program, run by the persistent-net-generator.rules rules file.</span>
<span class="token comment">#</span>
<span class="token comment"># You can modify it, as long as you keep each rule on a single</span>
<span class="token comment"># line, and change only the value of the NAME= key.</span>

<span class="token comment"># net device e1000</span>
<span class="token assign-left variable">SUBSYSTEM</span><span class="token operator">==</span><span class="token string">"net"</span>, <span class="token assign-left variable">ACTION</span><span class="token operator">==</span><span class="token string">"add"</span>, <span class="token assign-left variable">DRIVERS</span><span class="token operator">==</span><span class="token string">"?*"</span>, ATTR<span class="token punctuation">{</span>address<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"08:00:27:9e:1d:82"</span>, ATTR<span class="token punctuation">{</span>dev_id<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"0x0"</span>, ATTR<span class="token punctuation">{</span>type<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"1"</span>, <span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"enp0s3"</span>

<span class="token comment"># net device e1000</span>
<span class="token assign-left variable">SUBSYSTEM</span><span class="token operator">==</span><span class="token string">"net"</span>, <span class="token assign-left variable">ACTION</span><span class="token operator">==</span><span class="token string">"add"</span>, <span class="token assign-left variable">DRIVERS</span><span class="token operator">==</span><span class="token string">"?*"</span>, ATTR<span class="token punctuation">{</span>address<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"08:00:27:7a:18:15"</span>, ATTR<span class="token punctuation">{</span>dev_id<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"0x0"</span>, ATTR<span class="token punctuation">{</span>type<span class="token punctuation">}</span><span class="token operator">==</span><span class="token string">"1"</span>, <span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"enp0s8"</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># sed -e '/^AlternativeNamesPolicy/s/=.*$/=/'  \</span>
<span class="token operator">></span>     <span class="token parameter variable">-i</span> /usr/lib/udev/network/99-default.link <span class="token punctuation">\</span>
<span class="token operator">></span>      <span class="token operator">></span> /etc/udev/network/99-default.link</code></pre>
<p>I think the book is wrong, need to delete to get content</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment"># sed -e '/^AlternativeNamesPolicy/s/=.*$/=/'  \</span>
<span class="token operator">></span>      /usr/lib/udev/network/99-default.link <span class="token punctuation">\</span>
<span class="token operator">></span>  <span class="token operator">></span> /etc/udev/network/99-default.link
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys/bus<span class="token comment">#</span></code></pre>
<h4 id="9.5.2-creating-the-%2Fetc%2Fresolv.conf-file" tabindex="-1">9.5.2 Creating the /etc/resolv.conf File</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/resolv.conf <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"</span>
<span class="token comment"># Begin /etc/resolv.conf</span>
<span class="token comment"># domain &lt;Your Domain Name></span>
<span class="token comment"># nameserver &lt;IP address of your primary nameserver></span>
<span class="token comment"># nameserver &lt;IP address of your secondary nameserver></span>
nameserver <span class="token number">8.8</span>.8.8
nameserver <span class="token number">114.114</span>.114.114
<span class="token comment"># # End /etc/resolv.conf</span>
<span class="token comment"># EOF</span>
bash: warning: here-document at line <span class="token number">1</span> delimited by end-of-file <span class="token punctuation">(</span>wanted `EOF'<span class="token punctuation">)</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sys<span class="token comment">#</span></code></pre>
<h4 id="9.5.3-configuring-hostname" tabindex="-1">9.5.3 Configuring hostname</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment"># echo "lfs" > /etc/hostname</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment">#</span></code></pre>
<h4 id="9.5.4-set-%2Fetc%2Fhosts-file" tabindex="-1">9.5.4 Set /etc/hosts file</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/hosts <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
# Begin /etc/hosts
127.0.0.1 localhost.localdomain localhost
::1       localhost ip6-localhost ip6-loopback
ff02::1   ip6-allnodes
ff02::2   ip6-allrouters
# End /etc/hosts
EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment">#</span></code></pre>
<h3 id="9.6-configuring-sysvint" tabindex="-1">9.6 Configuring Sysvint</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment"># cat > /etc/inittab &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/inittab</span>
<span class="token operator">></span> id:3:initdefault:
<span class="token operator">></span> si::sysinit:/etc/rc.d/init.d/rc S
<span class="token operator">></span> l0:0:wait:/etc/rc.d/init.d/rc <span class="token number">0</span>
<span class="token operator">></span> l1:S1:wait:/etc/rc.d/init.d/rc <span class="token number">1</span>
<span class="token operator">></span> l2:2:wait:/etc/rc.d/init.d/rc <span class="token number">2</span>
<span class="token operator">></span> l3:3:wait:/etc/rc.d/init.d/rc <span class="token number">3</span>
<span class="token operator">></span> l4:4:wait:/etc/rc.d/init.d/rc <span class="token number">4</span>
<span class="token operator">></span> l5:5:wait:/etc/rc.d/init.d/rc <span class="token number">5</span>
<span class="token operator">></span> l6:6:wait:/etc/rc.d/init.d/rc <span class="token number">6</span>
<span class="token operator">></span> ca:12345:ctrlaltdel:/sbin/shutdown <span class="token parameter variable">-t1</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-r</span> now
<span class="token operator">></span> su:S06:once:/sbin/sulogin
<span class="token operator">></span> s1:1:respawn:/sbin/sulogin
<span class="token operator">></span> <span class="token number">1</span>:2345:respawn:/sbin/agetty <span class="token parameter variable">--noclear</span> tty1 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token number">2</span>:2345:respawn:/sbin/agetty tty2 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token number">3</span>:2345:respawn:/sbin/agetty tty3 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token number">4</span>:2345:respawn:/sbin/agetty tty4 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token number">5</span>:2345:respawn:/sbin/agetty tty5 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token number">6</span>:2345:respawn:/sbin/agetty tty6 <span class="token number">9600</span>
<span class="token operator">></span> <span class="token comment"># End /etc/inittab</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:~<span class="token comment">#</span></code></pre>
<h4 id="9.6.4-configuring-the-system-clock" tabindex="-1">9.6.4 Configuring the System Clock</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># hwclock --localtime --show</span>
<span class="token number">2024</span>-05-25 02:58:27.853636+08:00
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># date</span>
Sat May <span class="token number">25</span> <span class="token number">10</span>:59:17 CST <span class="token number">2024</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># cat > /etc/sysconfig/clock &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/sysconfig/clock</span>
<span class="token operator">></span> <span class="token assign-left variable">UTC</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token operator">></span> <span class="token comment"># Set this to any options you might need to give to hwclock,</span>
<span class="token operator">></span> <span class="token comment"># such as machine hardware clock type for Alphas.</span>
<span class="token operator">></span> <span class="token assign-left variable">CLOCKPARAMS</span><span class="token operator">=</span>
<span class="token operator">></span> <span class="token comment"># End /etc/sysconfig/clock</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment">#</span></code></pre>
<h4 id="9.6.5-configuring-the-linux-console" tabindex="-1">9.6.5 Configuring the Linux Console</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># cat > /etc/sysconfig/console &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/sysconfig/console</span>
<span class="token operator">></span> <span class="token assign-left variable">UNICODE</span><span class="token operator">=</span><span class="token string">"1"</span>
<span class="token operator">></span> <span class="token assign-left variable">FONT</span><span class="token operator">=</span><span class="token string">"Lat2-Terminus16"</span>
<span class="token operator">></span> <span class="token comment"># End /etc/sysconfig/console</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment">#</span></code></pre>
<h4 id="9.6.6-creating-files-at-boot" tabindex="-1">9.6.6 Creating Files at Boot</h4>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># echo "/tmp/.ICE-unix dir 777 root root" >> /etc/sysconfig/createfiles</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment"># cat /etc/sysconfig/createfiles</span>
<span class="token comment">########################################################################</span>
<span class="token comment"># Begin /etc/sysconfig/createfiles</span>
<span class="token comment">#</span>
<span class="token comment"># Description : Createfiles script config file</span>
<span class="token comment">#</span>
<span class="token comment"># Authors     :</span>
<span class="token comment">#</span>
<span class="token comment"># Version     : 00.00</span>
<span class="token comment">#</span>
<span class="token comment"># Notes       : The syntax of this file is as follows:</span>
<span class="token comment">#               if type is equal to "file" or "dir"</span>
<span class="token comment">#                &lt;filename> &lt;type> &lt;permissions> &lt;user> &lt;group></span>
<span class="token comment">#               if type is equal to "dev"</span>
<span class="token comment">#                &lt;filename> &lt;type> &lt;permissions> &lt;user> &lt;group> &lt;devtype></span>
<span class="token comment">#             &lt;major> &lt;minor></span>
<span class="token comment">#</span>
<span class="token comment">#               &lt;filename> is the name of the file which is to be created</span>
<span class="token comment">#               &lt;type> is either file, dir, or dev.</span>
<span class="token comment">#                       file creates a new file</span>
<span class="token comment">#                       dir creates a new directory</span>
<span class="token comment">#                       dev creates a new device</span>
<span class="token comment">#               &lt;devtype> is either block, char or pipe</span>
<span class="token comment">#                       block creates a block device</span>
<span class="token comment">#                       char creates a character device</span>
<span class="token comment">#                       pipe creates a pipe, this will ignore the &lt;major> and</span>
<span class="token comment">#           &lt;minor> fields</span>
<span class="token comment">#               &lt;major> and &lt;minor> are the major and minor numbers used for</span>
<span class="token comment">#     the device.</span>
<span class="token comment">########################################################################</span>

<span class="token comment"># End /etc/sysconfig/createfiles</span>
/tmp/.ICE-unix <span class="token function">dir</span> <span class="token number">777</span> root root
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/rc.d<span class="token comment">#</span></code></pre>
<h5 id="9.6.8.1-customize-rc.site" tabindex="-1">9.6.8.1 Customize rc.site</h5>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># grep -E -v "^(#|$)" rc.site</span>
<span class="token assign-left variable">SKIPTMPCLEAN</span><span class="token operator">=</span>y
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span></code></pre>
<h3 id="9.7-configuring-the-system-locale" tabindex="-1">9.7 Configuring the System Locale</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># locale -a | grep CN</span>
bo_CN
bo_CN.utf8
ug_CN
ug_CN.utf8
zh_CN
zh_CN.gb18030
zh_CN.gb2312
zh_CN.gbk
zh_CN.utf8
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># locale -a | grep en_US</span>
en_US
en_US.iso88591
en_US.utf8
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># LC_ALL=en_US.utf8 locale charmap</span>
UTF-8
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span>
<span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.utf8 locale language
American English
<span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.utf8 locale charmap
UTF-8
<span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.utf8 locale int_curr_symbol
USD
<span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.utf8 locale int_prefix
<span class="token number">1</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/profile <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
# Begin /etc/profile
for i in $(locale); do
  unset ${i%=*}
done
if [[ "$TERM" = linux ]]; then
  export LANG=C.UTF-8
else
  export LANG=en_US.UTF-8
fi
# End /etc/profile
EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span></code></pre>
<h3 id="9.8-creating-%2Fetc%2Finputrc" tabindex="-1">9.8 Creating /etc/inputrc</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># cat > /etc/inputrc &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/inputrc</span>
<span class="token operator">></span> <span class="token comment"># Modified by Chris Lynn &lt;roryo@roryo.dynup.net></span>
<span class="token operator">></span> <span class="token comment"># Allow the command prompt to wrap to the next line</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> horizontal-scroll-mode Off
<span class="token operator">></span> <span class="token comment"># Enable 8-bit input</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> meta-flag On
<span class="token operator">></span> <span class="token builtin class-name">set</span> input-meta On
<span class="token operator">></span> <span class="token comment"># Turns off 8th bit stripping</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> convert-meta Off
<span class="token operator">></span> <span class="token comment"># Keep the 8th bit for display</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> output-meta On
<span class="token operator">></span> <span class="token comment"># none, visible or audible</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> bell-style none
<span class="token operator">></span> <span class="token comment"># All of the following map the escape sequence of the value</span>
<span class="token operator">></span> <span class="token comment"># contained in the 1st argument to the readline specific functions</span>
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>Od"</span><span class="token builtin class-name">:</span> backward-word
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>Oc"</span><span class="token builtin class-name">:</span> forward-word
<span class="token operator">></span> <span class="token comment"># for linux console</span>
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[1~"</span><span class="token builtin class-name">:</span> beginning-of-line
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[4~"</span><span class="token builtin class-name">:</span> end-of-line
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[5~"</span><span class="token builtin class-name">:</span> beginning-of-history
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[6~"</span><span class="token builtin class-name">:</span> end-of-history
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[3~"</span><span class="token builtin class-name">:</span> delete-char
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[2~"</span><span class="token builtin class-name">:</span> quoted-insert
<span class="token operator">></span> <span class="token comment"># for xterm</span>
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>OH"</span><span class="token builtin class-name">:</span> beginning-of-line
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>OF"</span><span class="token builtin class-name">:</span> end-of-line
<span class="token operator">></span> <span class="token comment"># for Konsole</span>
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[H"</span><span class="token builtin class-name">:</span> beginning-of-line
<span class="token operator">></span> <span class="token string">"<span class="token entity" title="\e">\e</span>[F"</span><span class="token builtin class-name">:</span> end-of-line
<span class="token operator">></span> <span class="token comment"># End /etc/inputrc</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span></code></pre>
<h3 id="9.9-creating-%2Fetc%2Fshells" tabindex="-1">9.9 Creating /etc/shells</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment"># cat > /etc/shells &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/shells</span>
<span class="token operator">></span> /bin/sh
<span class="token operator">></span> /bin/bash
<span class="token operator">></span> <span class="token comment"># End /etc/shells</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span></code></pre>
<h2 id="10-making-the-lfs-system-bootable" tabindex="-1">10 Making the LFS System Bootable</h2>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/fstab <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
# Begin /etc/fstab
# file system  mount-point    type     options             dump  fsck
#                                                                order
/dev/disk/by-partlabel/root / ext4   defaults      1     1
/dev/disk/by-partlabel/boot /boot ext4   defaults      1     1
/dev/disk/by-partlabel/boot-uefi /boot/efi ext4   defaults      1     1
/dev/disk/by-partlabel/usr /usr ext4   defaults      1     1
/dev/disk/by-partlabel/home /home ext4   defaults      1     1
/dev/disk/by-partlabel/opt /opt ext4   defaults      1     1
/dev/disk/by-partlabel/tmp /tmp ext4   defaults      1     1
/dev/disk/by-partlabel/usr-src /usr/src ext4   defaults      1     1
/dev/disk/by-partlabel/swap  swap                    swap   pri=1                      0  0

proc           /proc          proc     nosuid,noexec,nodev 0     0
sysfs          /sys           sysfs    nosuid,noexec,nodev 0     0
devpts         /dev/pts       devpts   gid=5,mode=620      0     0
tmpfs          /run           tmpfs    defaults            0     0
devtmpfs       /dev           devtmpfs mode=0755,nosuid    0     0
tmpfs          /dev/shm       tmpfs    nosuid,nodev        0     0
cgroup2        /sys/fs/cgroup cgroup2  nosuid,noexec,nodev 0     0
# End /etc/fstab
EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/etc/sysconfig<span class="token comment">#</span></code></pre>
<h3 id="10.3-linux-6.7.4" tabindex="-1">10.3 Linux-6.7.4</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># rm -rf linux-6.7.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># tar xf linux-6.7.4.tar.xz</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># cd linux-6.7.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># make mrproper</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># make defconfig</span>
  HOSTCC  scripts/kconfig/conf.o
  HOSTLD  scripts/kconfig/conf
*** Default configuration is based on <span class="token string">'x86_64_defconfig'</span>
<span class="token comment">#</span>
<span class="token comment"># configuration written to .config</span>
<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># make menuconfig</span>


Your configuration changes were NOT saved.

configuration written to .config

*** End of the configuration.
*** Execute <span class="token string">'make'</span> to start the build or try <span class="token string">'make help'</span><span class="token builtin class-name">.</span>

<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># make</span>
<span class="token punctuation">..</span>.
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># make modules_install</span>
  SYMLINK /lib/modules/6.7.4/build
  INSTALL /lib/modules/6.7.4/modules.order
  INSTALL /lib/modules/6.7.4/modules.builtin
  INSTALL /lib/modules/6.7.4/modules.builtin.modinfo
  INSTALL /lib/modules/6.7.4/kernel/fs/efivarfs/efivarfs.ko
  INSTALL /lib/modules/6.7.4/kernel/drivers/thermal/intel/x86_pkg_temp_thermal.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/nf_log_syslog.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/xt_mark.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/xt_nat.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/xt_LOG.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/xt_MASQUERADE.ko
  INSTALL /lib/modules/6.7.4/kernel/net/netfilter/xt_addrtype.ko
  INSTALL /lib/modules/6.7.4/kernel/net/ipv4/netfilter/iptable_nat.ko
  DEPMOD  /lib/modules/6.7.4
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># df -h /boot/</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdd1       181M   15K  168M   <span class="token number">1</span>% /boot
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cp -iv arch/x86/boot/bzImage /boot/vmlinuz-6.7.4-lfs-12.1</span>
<span class="token string">'arch/x86/boot/bzImage'</span> -<span class="token operator">></span> <span class="token string">'/boot/vmlinuz-6.7.4-lfs-12.1'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cp -iv System.map /boot/System.map-6.7.4</span>
<span class="token string">'System.map'</span> -<span class="token operator">></span> <span class="token string">'/boot/System.map-6.7.4'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cp -iv .config /boot/config-6.7.4</span>
<span class="token string">'.config'</span> -<span class="token operator">></span> <span class="token string">'/boot/config-6.7.4'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cp -r Documentation -T /usr/share/doc/linux-6.7.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># </span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment"># chown -R 0:0 linux-6.7.4</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources<span class="token comment">#</span></code></pre>
<h3 id="10.3.2-configuring-linux-module-load-order" tabindex="-1">10.3.2 Configuring Linux Module Load Order</h3>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># install -v -m755 -d /etc/modprobe.d</span>
install: creating directory <span class="token string">'/etc/modprobe.d'</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cat > /etc/modprobe.d/usb.conf &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /etc/modprobe.d/usb.conf</span>
<span class="token operator">></span> <span class="token function">install</span> ohci_hcd /sbin/modprobe ehci_hcd <span class="token punctuation">;</span> /sbin/modprobe <span class="token parameter variable">-i</span> ohci_hcd <span class="token punctuation">;</span> <span class="token boolean">true</span>
<span class="token operator">></span> <span class="token function">install</span> uhci_hcd /sbin/modprobe ehci_hcd <span class="token punctuation">;</span> /sbin/modprobe <span class="token parameter variable">-i</span> uhci_hcd <span class="token punctuation">;</span> <span class="token boolean">true</span>
<span class="token operator">></span> <span class="token comment"># End /etc/modprobe.d/usb.conf</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span></code></pre>
<h3 id="10.4-using-grub-to-set-up-the-boot-process" tabindex="-1">10.4 using GRUB to Set Up the Boot Process</h3>
<p>I miss to create a 1-2M grub boot partition, now fix it</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>parted<span class="token punctuation">)</span> p
Model: ATA VBOX HARDDISK <span class="token punctuation">(</span>scsi<span class="token punctuation">)</span>
Disk /dev/sdd: 115GB
Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start   End     Size    File system     Name       Flags
 <span class="token number">1</span>      1049kB  210MB   209MB   ext4            boot
 <span class="token number">2</span>      210MB   419MB   210MB   ext4            boot-uefi
 <span class="token number">3</span>      419MB   <span class="token number">27</span>.3GB  <span class="token number">26</span>.8GB  ext4            usr
 <span class="token number">4</span>      <span class="token number">27</span>.3GB  <span class="token number">49</span>.8GB  <span class="token number">22</span>.5GB  ext4            home
 <span class="token number">5</span>      <span class="token number">49</span>.8GB  <span class="token number">55</span>.2GB  5369MB  ext4            opt
 <span class="token number">6</span>      <span class="token number">55</span>.2GB  <span class="token number">58</span>.4GB  3221MB  ext4            tmp
 <span class="token number">7</span>      <span class="token number">58</span>.4GB  <span class="token number">90</span>.6GB  <span class="token number">32</span>.2GB  ext4            usr-src
 <span class="token number">8</span>      <span class="token number">90</span>.6GB  112GB   <span class="token number">21</span>.5GB  ext4            root
 <span class="token number">9</span>      112GB   115GB   2732MB  linux-swap<span class="token punctuation">(</span>v1<span class="token punctuation">)</span>  swap

<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> <span class="token function">rm</span> <span class="token number">1</span>
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart bios_boot 2048s 2M
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> mkpart boot 2M 210M
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> <span class="token number">1</span> bios_grub on
<span class="token punctuation">(</span>parted<span class="token punctuation">)</span> <span class="token builtin class-name">exit</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># grub-install /dev/sdd</span>
Installing <span class="token keyword">for</span> i386-pc platform.
Installation finished. No error reported.</code></pre>
<p>Create filesystem for boot partition</p>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># mkfs.ext4 /dev/disk/by-partlabel/boot</span>
<span class="token function">mke2fs</span> <span class="token number">1.46</span>.5 <span class="token punctuation">(</span><span class="token number">30</span>-Dec-2021<span class="token punctuation">)</span>
Creating filesystem with <span class="token number">202752</span> 1k blocks and <span class="token number">50600</span> inodes
Filesystem UUID: db8e75bc-8bf1-459e-b3f5-72e68de3ed8f
Superblock backups stored on blocks:
        <span class="token number">8193</span>, <span class="token number">24577</span>, <span class="token number">40961</span>, <span class="token number">57345</span>, <span class="token number">73729</span>

Allocating group tables: <span class="token keyword">done</span>
Writing inode tables: <span class="token keyword">done</span>
Creating journal <span class="token punctuation">(</span><span class="token number">4096</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>

bash-5.2<span class="token comment"># mv /mnt/lfs/boot /mnt/lfs/boot2</span>
bash-5.2<span class="token comment"># mv /mnt/lfs/boot2/* /mnt/lfs/boot</span>
bash-5.2<span class="token comment"># ls /mnt/lfs/boot2/</span>
bash-5.2<span class="token comment"># rm -rf /mnt/lfs/boot2</span>
bash-5.2<span class="token comment">#</span></code></pre>
<p>Continue</p>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># cat > /boot/grub/grub.cfg &lt;&lt; "EOF"</span>
<span class="token operator">></span> <span class="token comment"># Begin /boot/grub/grub.cfg</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">default</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token operator">></span> insmod part_gpt
<span class="token operator">></span> insmod ext2
<span class="token operator">></span> <span class="token comment">#set root=(hd0,2)</span>
<span class="token operator">></span> search <span class="token parameter variable">--set</span><span class="token operator">=</span>root --fs-uuid 0c9e71ea-32d4-4337-b3b4-2457b9d27272
<span class="token operator">></span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">root</span><span class="token operator">=</span><span class="token punctuation">(</span>hd0,2<span class="token punctuation">)</span>
<span class="token operator">></span> menuentry <span class="token string">"GNU/Linux, Linux 6.7.4-lfs-12.1"</span> <span class="token punctuation">{</span>
<span class="token operator">></span>         <span class="token comment">#linux   /vmlinuz-6.7.4-lfs-12.1 root=/dev/sda2 ro</span>
<span class="token operator">></span>         linux   /vmlinuz-6.7.4-lfs-12.1 <span class="token assign-left variable">root</span><span class="token operator">=</span>PARTUUID<span class="token operator">=</span>c2f2887c-d09f-4f10-9e6c-68dae5ed99c2 ro
<span class="token operator">></span> <span class="token punctuation">}</span>
<span class="token operator">></span> EOF
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span></code></pre>
<h2 id="11-the-end" tabindex="-1">11 The End</h2>
<pre class="language-bash"><code class="language-bash"><span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># echo 12.1 > /etc/lfs-release</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># export EDITOR=vim</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/lsb-release <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
DISTRIB_ID="Linux From Scratch"
DISTRIB_RELEASE="12.1"
DISTRIB_CODENAME="zhihao"
DISTRIB_DESCRIPTION="Linux From Scratch"
EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment">#</span>
<span class="token function">cat</span> <span class="token operator">></span> /etc/os-release <span class="token operator">&lt;&lt;</span> <span class="token string">"EOF"
NAME="Linux From Scratch"
VERSION="12.1"
ID=lfs
PRETTY_NAME="Linux From Scratch 12.1"
VERSION_CODENAME="zhihao"
HOME_URL="https://www.linuxfromscratch.org/lfs/"
EOF</span>
<span class="token punctuation">(</span>lfs <span class="token function">chroot</span><span class="token punctuation">)</span> root:/sources/linux-6.7.4<span class="token comment"># logout</span>
bash-5.2<span class="token comment"># umount -v $LFS/dev/pts</span>
umount: /mnt/lfs/dev/pts unmounted
bash-5.2<span class="token comment"># mountpoint -q $LFS/dev/shm &amp;&amp; umount -v $LFS/dev/shm</span>
umount: /mnt/lfs/dev/shm unmounted
bash-5.2<span class="token comment"># umount -v $LFS/dev</span>
umount: /mnt/lfs/dev unmounted
bash-5.2<span class="token comment"># umount -v $LFS/run</span>
umount: /mnt/lfs/run unmounted
bash-5.2<span class="token comment"># umount -v $LFS/proc</span>
umount: /mnt/lfs/proc unmounted
bash-5.2<span class="token comment"># umount -v $LFS/sys</span>
umount: /mnt/lfs/sys unmounted
bash-5.2<span class="token comment"># umount -R /mnt/lfs/</span></code></pre>
<p>There is kernel panic after boots, I think the reason is /usr is not mounted when boot, I merge / to /usr</p>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># mount /dev/sdd8 /mnt/lfs</span>
bash-5.2<span class="token comment"># mkdir /mnt/usr</span>
bash-5.2<span class="token comment"># mount /dev/sdd3 /mnt/usr</span>
bash-5.2<span class="token comment">#</span>
bash-5.2<span class="token comment"># ls /mnt/lfs/usr</span>
bash-5.2<span class="token comment"># cp -a /mnt/lfs/usr /mnt/usr/</span>
bash-5.2<span class="token comment"># mv -v /mnt/usr/* /mnt/usr/usr/</span>
renamed <span class="token string">'/mnt/usr/bin'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/bin'</span>
renamed <span class="token string">'/mnt/usr/include'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/include'</span>
renamed <span class="token string">'/mnt/usr/lib'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/lib'</span>
renamed <span class="token string">'/mnt/usr/libexec'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/libexec'</span>
renamed <span class="token string">'/mnt/usr/local'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/local'</span>
renamed <span class="token string">'/mnt/usr/lost+found'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/lost+found'</span>
renamed <span class="token string">'/mnt/usr/sbin'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/sbin'</span>
renamed <span class="token string">'/mnt/usr/share'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/share'</span>
renamed <span class="token string">'/mnt/usr/src'</span> -<span class="token operator">></span> <span class="token string">'/mnt/usr/usr/src'</span>
mv: cannot move <span class="token string">'/mnt/usr/usr'</span> to a subdirectory of itself, <span class="token string">'/mnt/usr/usr/usr'</span>
bash-5.2<span class="token comment"># ls /mnt/usr/usr/</span>
bin  include  lib  libexec  <span class="token builtin class-name">local</span>  lost+found  sbin  share  src
bash-5.2<span class="token comment"># </span>
bash-5.2<span class="token comment"># cp -a /mnt/lfs/. /mnt/usr/.</span></code></pre>
<p>Update fstab</p>
<pre class="language-bash"><code class="language-bash">bash-5.2<span class="token comment"># cat /mnt/lfs/etc/fstab</span>
<span class="token comment"># Begin /etc/fstab</span>
<span class="token comment"># file system  mount-point    type     options             dump  fsck</span>
<span class="token comment">#                                                                order</span>
<span class="token comment">#/dev/disk/by-partlabel/root / ext4   defaults      1     1</span>
/dev/disk/by-partlabel/boot /boot ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/boot-uefi /boot/efi ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
<span class="token comment">#/dev/disk/by-partlabel/usr /usr ext4   defaults      1     1</span>
/dev/disk/by-partlabel/usr / ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/home /home ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/opt /opt ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/tmp /tmp ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/usr-src /usr/src ext4   defaults      <span class="token number">1</span>     <span class="token number">1</span>
/dev/disk/by-partlabel/swap  swap                    swap   <span class="token assign-left variable">pri</span><span class="token operator">=</span><span class="token number">1</span>                      <span class="token number">0</span>  <span class="token number">0</span>

proc           /proc          proc     nosuid,noexec,nodev <span class="token number">0</span>     <span class="token number">0</span>
sysfs          /sys           sysfs    nosuid,noexec,nodev <span class="token number">0</span>     <span class="token number">0</span>
devpts         /dev/pts       devpts   <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">5</span>,mode<span class="token operator">=</span><span class="token number">620</span>      <span class="token number">0</span>     <span class="token number">0</span>
tmpfs          /run           tmpfs    defaults            <span class="token number">0</span>     <span class="token number">0</span>
devtmpfs       /dev           devtmpfs <span class="token assign-left variable">mode</span><span class="token operator">=</span>0755,nosuid    <span class="token number">0</span>     <span class="token number">0</span>
tmpfs          /dev/shm       tmpfs    nosuid,nodev        <span class="token number">0</span>     <span class="token number">0</span>
cgroup2        /sys/fs/cgroup cgroup2  nosuid,noexec,nodev <span class="token number">0</span>     <span class="token number">0</span>
<span class="token comment"># End /etc/fstab</span>
bash-5.2<span class="token comment"># </span></code></pre>
<p>After boot, I can see the login prompt</p>
<p>The final VM image is in D:\documents\box_vms\suse\suse{9a9650c5-ba71-4f5d-b0ee-588decbc3fde}.vdi</p>

  </article>
</section>
    </main>
  </body>
</html>
